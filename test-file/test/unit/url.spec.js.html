<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">test/unit/url.spec.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <a data-ice="repoURL" href="https://github.com/reptar/reptar" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/file.js~File.html">File</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/index.js~Reptar.html">Reptar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createChecksum">createChecksum</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getReptarPackageNames">getReptarPackageNames</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createMarkdownEngine">createMarkdownEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getMarkdownEngine">getMarkdownEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-renderMarkdown">renderMarkdown</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-renderFileWithPlugins">renderFileWithPlugins</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-addBuiltinFilters">addBuiltinFilters</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-addTemplateFilter">addTemplateFilter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-configureTemplateEngine">configureTemplateEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-renderTemplate">renderTemplate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-renderTemplateString">renderTemplateString</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-cache">cache</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-KEY">KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-YAML">YAML</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-packageNameRegex">packageNameRegex</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Url">Url</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">collection</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/collection/base.js~CollectionBase.html">CollectionBase</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/collection/page.js~CollectionPage.html">CollectionPage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createCollection">createCollection</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">collection/type</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/collection/type/file-system.js~FileSystemCollection.html">FileSystemCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/collection/type/metadata.js~MetadataCollection.html">MetadataCollection</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">config</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/config/index.js~Config.html">Config</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">filter</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-futureDatesFilter">futureDatesFilter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-metadataFilter">metadataFilter</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">parse</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-fileHasFrontmatter">fileHasFrontmatter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-parse">parse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-stringify">stringify</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-parse">parse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-stringify">stringify</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">plugin</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/plugin/event-handler.js~EventHandler.html">EventHandler</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/plugin/index.js~Plugin.html">Plugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createPluginApi">createPluginApi</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-PluginEvents">PluginEvents</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">theme</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/theme/asset.js~Asset.html">Asset</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/theme/index.js~Theme.html">Theme</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/theme/processor-base.js~ProcessorBase.html">ProcessorBase</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">theme/processor</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/theme/processor/browserify.js~Browserify.html">Browserify</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/theme/processor/less.js~Less.html">Less</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/theme/processor/sass.js~Sass.html">Sass</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">test/unit/url.spec.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import assert from &apos;power-assert&apos;;
import Url from &apos;../../lib/url&apos;;

describe(&apos;url Url&apos;, () =&gt; {
  Url.setSlugOptions({
    lower: true,
  });

  describe(&apos;interpolatePermalink&apos;, () =&gt; {
    it(&apos;handles simple interpolations&apos;, () =&gt; {
      assert.equal(Url.interpolatePermalink(&apos;/:title/&apos;, {
        title: &apos;banana&apos;,
      }), &apos;/banana/&apos;);
    });

    it(&apos;handles duplicate param interpolations&apos;, () =&gt; {
      assert.equal(Url.interpolatePermalink(&apos;/:title/:title/&apos;, {
        title: &apos;banana&apos;,
      }), &apos;/banana/banana/&apos;);
    });

    it(&apos;handles permalink with no interpolation&apos;, () =&gt; {
      assert.equal(Url.interpolatePermalink(&apos;/index.html&apos;, {
        title: &apos;banana&apos;,
      }), &apos;/index.html&apos;);
    });

    it(&apos;throw if it can\&apos;t find value to interpolate in permalink&apos;, () =&gt; {
      assert.throws(() =&gt; {
        Url.interpolatePermalink(&apos;/:title/:unknown/&apos;, {
          title: &apos;banana&apos;,
        });
      });
    });

    it(&apos;handles special date permalink values&apos;, () =&gt; {
      assert.equal(
        Url.interpolatePermalink(&apos;/:date|YYYY/:date|MM/:date|D/:title/&apos;, {
          title: &apos;  In the future, the past will be history.  &apos;,
          date: new Date(&apos;2000-02-28T00:00:00-05:00&apos;),
        }), &apos;/2000/02/28/in-the-future-the-past-will-be-history/&apos;
      );

      assert.equal(Url
        .interpolatePermalink(&apos;/:date_future|YYYY/:date|MM/:date|D/:title/&apos;, {
          title: &apos;Does jello dance, or does it just jiggle?  &apos;,
          date: new Date(&apos;2000-02-28T00:00:00-05:00&apos;),
          date_future: new Date(&apos;2020-10-01T00:00:00-05:00&apos;),
        }), &apos;/2020/02/28/does-jello-dance-or-does-it-just-jiggle/&apos;);
    });
  });

  describe(&apos;replaceMarkdownExtension&apos;, () =&gt; {
    it(&apos;replaces known markdown extensions&apos;, () =&gt; {
      const markdownExtensions = [
        &apos;md&apos;,
        &apos;markdown&apos;,
      ];

      assert.equal(
        Url.replaceMarkdownExtension(
          &apos;/_posts/hello-world.md&apos;,
          markdownExtensions
        ),
        &apos;/_posts/hello-world.html&apos;
      );

      assert.equal(
        Url.replaceMarkdownExtension(
          &apos;/_posts/hello-world.markdown&apos;,
          markdownExtensions
        ),
        &apos;/_posts/hello-world.html&apos;
      );

      assert.equal(
        Url.replaceMarkdownExtension(
          &apos;/_posts/hello-world.mkdown&apos;,
          markdownExtensions
        ),
        &apos;/_posts/hello-world.mkdown&apos;
      );

      assert.equal(
        Url.replaceMarkdownExtension(
          &apos;/_posts/hello-world.html&apos;,
          markdownExtensions
        ),
        &apos;/_posts/hello-world.html&apos;
      );
    });
  });

  describe(&apos;makeUrlFileSystemSafe&apos;, () =&gt; {
    it(&apos;appends index.html to a url that has no file extension&apos;, () =&gt; {
      assert.equal(Url.makeUrlFileSystemSafe(&apos;/my-beautiful-html-permalink&apos;),
        &apos;/my-beautiful-html-permalink/index.html&apos;
      );

      assert.equal(Url.makeUrlFileSystemSafe(&apos;/my-beautiful-html-permalink/&apos;),
        &apos;/my-beautiful-html-permalink/index.html&apos;
      );

      assert.equal(Url.makeUrlFileSystemSafe(&apos;my-beautiful-html-permalink&apos;),
        &apos;/my-beautiful-html-permalink/index.html&apos;
      );
    });

    it(&apos;does not append index.html to a url that does not need it&apos;, () =&gt; {
      assert.equal(Url.makeUrlFileSystemSafe(&apos;/html/goes-here.html&apos;),
        &apos;/html/goes-here.html&apos;
      );

      assert.equal(Url.makeUrlFileSystemSafe(&apos;/html/image.png&apos;),
        &apos;/html/image.png&apos;
      );

      assert.equal(Url.makeUrlFileSystemSafe(&apos;/html/index.gif&apos;),
        &apos;/html/index.gif&apos;
      );
    });
  });

  describe(&apos;makePretty&apos;, () =&gt; {
    it(&apos;works&apos;, () =&gt; {
      let url = &apos;/html/goes-here.html&apos;;
      assert.equal(
        Url.makePretty(url),
        url
      );

      url = &apos;/my/beautiful-dream&apos;;
      assert.equal(
        Url.makePretty(url),
        url
      );

      url = &apos;/have-you-got-a-minute/&apos;;
      assert.equal(
        Url.makePretty(`${url}index.html`),
        url
      );

      url = &apos;/no-time-to-wasteindex.html&apos;;
      assert.equal(
        Url.makePretty(url),
        url
      );

      url = &apos;/favicon.ico&apos;;
      assert.equal(
        Url.makePretty(url),
        url
      );

      url = &apos;/images/index.gif&apos;;
      assert.equal(
        Url.makePretty(url),
        url
      );
    });
  });
});
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
