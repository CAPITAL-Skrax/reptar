[
  {
    "__docId__": 0,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/cache.js",
    "memberof": null,
    "longname": "lib/cache.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import path from 'path';\nimport fs from 'fs-extra';\nimport homeOrTmp from 'home-or-tmp';\nimport log from './log';\n\nlet data = {};\n\n/**\n * Namespace of the Reptar site that we're caching. This is unique for every\n * directory so we can manage cache individually for each local Reptar install.\n * @param {string}\n */\nlet namespace;\n\nfunction createFilename(name = '') {\n  return path.join(homeOrTmp, '.reptar-cache', `${name}.json`);\n}\n\nlet filename = createFilename(namespace);\n\nconst cache = {\n  setNamespace(val) {\n    namespace = val;\n\n    filename = createFilename(namespace);\n  },\n\n  load() {\n    if (this._loaded) {\n      return;\n    }\n    this._loaded = true;\n\n    process.on('exit', cache.save);\n\n    try {\n      data = JSON.parse(fs.readFileSync(filename));\n    } catch (err) { }\n  },\n\n  save() {\n    let content = {};\n\n    // Add information about the namespace for this cache so it's\n    // human readable.\n    data['_namespace'] = namespace;\n\n    try {\n      content = JSON.stringify(data, null, '  ');\n    } catch (err) {\n      if (err.message === 'Invalid string length') {\n        err.message = 'Cache too large so it\\'s been cleared.';\n        log.error(err.stack);\n      } else {\n        throw err;\n      }\n    }\n\n    fs.outputFileSync(filename, content);\n  },\n\n  clear() {\n    data = {};\n  },\n\n  put(cacheKey, cacheValue) {\n    data[cacheKey] = cacheValue;\n  },\n\n  get(cacheKey) {\n    return data[cacheKey];\n  },\n};\n\nexport default cache;\n"
  },
  {
    "__docId__": 1,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "data",
    "memberof": "lib/cache.js",
    "longname": "lib/cache.js~data",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/cache.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 2,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "createFilename",
    "memberof": "lib/cache.js",
    "longname": "lib/cache.js~createFilename",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/cache.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "",
        "defaultValue": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 3,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "filename",
    "memberof": "lib/cache.js",
    "longname": "lib/cache.js~filename",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/cache.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 19,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 4,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "cache",
    "memberof": "lib/cache.js",
    "longname": "lib/cache.js~cache",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/cache.js",
    "importStyle": "cache",
    "description": null,
    "lineNumber": 21,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 5,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/checksum.js",
    "memberof": null,
    "longname": "lib/checksum.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import crypto from 'crypto';\n\n/**\n * Create checksum hash of input.\n * @example\n *   '50de70409f11f87b430f248daaa94d67'\n * @param {string} input Input to hash.\n * @return {string}\n */\nexport default function createChecksum(input) {\n  return crypto.createHash('md5').update(input, 'utf8').digest('hex');\n}\n"
  },
  {
    "__docId__": 6,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "createChecksum",
    "memberof": "lib/checksum.js",
    "longname": "lib/checksum.js~createChecksum",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/checksum.js",
    "importStyle": "createChecksum",
    "description": "Create checksum hash of input.",
    "examples": [
      "  '50de70409f11f87b430f248daaa94d67'"
    ],
    "lineNumber": 10,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "input",
        "description": "Input to hash."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "__docId__": 7,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/collection/base.js",
    "memberof": null,
    "longname": "lib/collection/base.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import Promise from 'bluebird';\nimport path from 'path';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nimport CollectionPage from './page';\n\nexport default class CollectionBase {\n  /**\n   * Create a Collection instance.\n   * @param {string} name The name of the collection.\n   * @param {Object} collectionConfig Config object from config file.\n   * @param {Function} getConfig Delegate function that returns config object.\n   */\n  constructor(name, collectionConfig = {}, getConfig) {\n    if (_.isString(name) === false || name.length === 0) {\n      throw new Error('Collection requires a name.');\n    }\n\n    /**\n     * Unique ID of this Collection, currently its given name.\n     * @type {string}\n     */\n    this.id = name;\n\n    /**\n     * The collection name. Must be unique.\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * Data accesible to templates.\n     * @type {Object}\n     */\n    this.data = {};\n\n    /**\n     * Gets config.\n     * @type {Function}\n     */\n    this._getConfig = getConfig;\n\n    if (!_.isUndefined(collectionConfig.path)) {\n      /**\n       * Path where items belong within the collection.\n       * @type {string}\n       */\n      this.path = path.resolve(\n        this._getConfig().get('path.source'),\n        collectionConfig.path\n      );\n    }\n\n    if (!_.isUndefined(collectionConfig.metadata)) {\n      /**\n       * Metadata attribute to use to find which items are within the\n       * collection.\n       * @type {string}\n       */\n      this.metadata = collectionConfig.metadata;\n    }\n\n    if (!_.isUndefined(collectionConfig.template)) {\n      /**\n        * What template to use when rendering a CollectionPage.\n       * @type {string}\n       */\n      this.template = collectionConfig.template;\n    }\n\n    if (!_.isUndefined(collectionConfig.page_size)) {\n      if (!_.isNumber(collectionConfig.page_size)) {\n        throw new Error('Page size must be a number');\n      }\n\n      /**\n       * Size of each CollectionPage.\n       * @type {number}\n       */\n      this.pageSize = collectionConfig.page_size;\n    }\n\n    if (!_.isUndefined(collectionConfig.sort)) {\n      /**\n       * Sorting configuration.\n       * @type {Object}\n       */\n      this.sort = {\n        key: collectionConfig.sort.key,\n        order: collectionConfig.sort.order,\n      };\n    }\n\n    if (!_.isUndefined(collectionConfig.permalink)) {\n      const permalinkConfig = collectionConfig.permalink;\n\n      /**\n       * Permalink information.\n       * @type {Object}\n       */\n      this.permalink = {};\n\n      if (!_.isUndefined(permalinkConfig.index)) {\n        /**\n         * Permalink index configuration.\n         * @type {string}\n         */\n        this.permalink.index = permalinkConfig.index;\n      }\n\n      if (!_.isUndefined(permalinkConfig.page)) {\n        /**\n         * Permalink page configuration.\n         * @type {string}\n         */\n        this.permalink.page = permalinkConfig.page;\n      }\n    }\n\n    /**\n     * Array of CollectionPage objects.\n     * @type {Array.<CollectionPage>}\n     */\n    this.pages = [];\n  }\n\n  /**\n   * Whether a File is filtered by the configured filters.\n   * @param {File} file File object.\n   * @return {boolean} Whether this file should be filtered out.\n   */\n  isFiltered(file) { // eslint-disable-line class-methods-use-this\n    return file.filtered === true;\n  }\n\n  /**\n   * Populate the Collection's files via file system path or metadata attribute.\n   * @param {Object.<string, Files>} files All Files.\n   * @param {Object.<string, CollectionBase>} collections Object of all\n   *   collections.\n   * @return {CollectionBase}\n   */\n  populate(files = {}, collections = {}) { // eslint-disable-line no-unused-vars\n    return this;\n  }\n\n  /**\n   * Create a CollectionPage instance.\n   * @param {number} index Index of the page.\n   * @param {string?} pageIdArg Optional custom ID for a CollectionPage.\n   * @return {CollectionPage} CollectionPage instance.\n   */\n  createPage(index, pageIdArg) {\n    if (!_.isNumber(index)) {\n      throw new Error('Must give an index when creating a CollectionPage.');\n    }\n\n    const pageId = _.isUndefined(pageIdArg) ? this.id : pageIdArg;\n\n    const page = new CollectionPage(pageId, index);\n    page.setGetConfig(this._getConfig);\n\n    page.permalink = index === 0 ?\n      this.permalink.index :\n      this.permalink.page;\n\n    // Give each CollectionPage what template it should use.\n    page.data.template = this.template;\n\n    return page;\n  }\n\n  _linkPages(shouldLinkPrevious, shouldLinkNext) {\n    if (this.pages.length > 0) {\n      this.pages.forEach((collectionPage, index) => {\n        const previous = this.pages[index - 1];\n\n        if (shouldLinkPrevious(previous, collectionPage)) {\n          collectionPage.setPreviousPage(previous);\n        }\n\n        const next = this.pages[index + 1];\n\n        if (shouldLinkNext(next, collectionPage)) {\n          collectionPage.setNextPage(next);\n        }\n      });\n    }\n\n    // Add data to template accessible object.\n    this.data.pages = this.pages.map(page => page.data);\n\n    return this;\n  }\n\n  /**\n   * Writes every page in this collection.\n   * @param {Object} siteData Site wide data that is shared on all rendered\n   *  pages.\n   * @return {Promise}\n   */\n  write(siteData) {\n    let pagePromises = [];\n\n    // Write CollectionPage files.\n    if (this.pages.length) {\n      pagePromises = this.pages.map(collectionPage =>\n        collectionPage.write(siteData)\n      );\n    }\n\n    return Promise.all(pagePromises);\n  }\n\n\n  /**\n   * Sorts files according to a sort config object.\n   * @param {Array.<File>} files Array of File objects.\n   * @param {Object} sortConfig Sort config object.\n   * @param {string?} dateFormat Optional. File date format from config.\n   * @return {Array.<file>} Sorted files.\n   */\n  static sortFiles(files, sortConfig, dateFormat) {\n    const validSortConfig = sortConfig && sortConfig.key;\n    const hasFiles = files && files.length > 0;\n\n    if (validSortConfig && hasFiles) {\n      // Convert a File's date value to a time stamp for sorting.\n      const getFileDateTime = file =>\n         moment(file.data[sortConfig.key], dateFormat)\n          .toDate()\n          .getTime();\n\n      // Quick sniff to see if the sort value is a date object.\n      const sortIsDate = getFileDateTime(files[0]) > 0;\n\n      // eslint-disable-next-line no-param-reassign\n      files = _.sortBy(files, sortIsDate ?\n        getFileDateTime :\n        `data[${sortConfig.key}]`\n      );\n\n      if (sortConfig.order === 'descending') {\n        files.reverse();\n      }\n    }\n\n    return files;\n  }\n}\n"
  },
  {
    "__docId__": 8,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "CollectionBase",
    "memberof": "lib/collection/base.js",
    "longname": "lib/collection/base.js~CollectionBase",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/collection/base.js",
    "importStyle": "CollectionBase",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 9,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#constructor",
    "access": null,
    "description": "Create a Collection instance.",
    "lineNumber": 15,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the collection."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "collectionConfig",
        "description": "Config object from config file."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "getConfig",
        "description": "Delegate function that returns config object."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 10,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "id",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#id",
    "access": null,
    "description": "Unique ID of this Collection, currently its given name.",
    "lineNumber": 24,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 11,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#name",
    "access": null,
    "description": "The collection name. Must be unique.",
    "lineNumber": 30,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 12,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "data",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#data",
    "access": null,
    "description": "Data accesible to templates.",
    "lineNumber": 36,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 13,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_getConfig",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#_getConfig",
    "access": null,
    "description": "Gets config.",
    "lineNumber": 42,
    "type": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 14,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "path",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#path",
    "access": null,
    "description": "Path where items belong within the collection.",
    "lineNumber": 49,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 15,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "metadata",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#metadata",
    "access": null,
    "description": "Metadata attribute to use to find which items are within the\ncollection.",
    "lineNumber": 61,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 16,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "template",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#template",
    "access": null,
    "description": "What template to use when rendering a CollectionPage.",
    "lineNumber": 69,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 17,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "pageSize",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#pageSize",
    "access": null,
    "description": "Size of each CollectionPage.",
    "lineNumber": 81,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 18,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "sort",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#sort",
    "access": null,
    "description": "Sorting configuration.",
    "lineNumber": 89,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 19,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "permalink",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#permalink",
    "access": null,
    "description": "Permalink information.",
    "lineNumber": 102,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 20,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "pages",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#pages",
    "access": null,
    "description": "Array of CollectionPage objects.",
    "lineNumber": 125,
    "type": {
      "nullable": null,
      "types": [
        "Array.<CollectionPage>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 21,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "isFiltered",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#isFiltered",
    "access": null,
    "description": "Whether a File is filtered by the configured filters.",
    "lineNumber": 133,
    "params": [
      {
        "nullable": null,
        "types": [
          "File"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": "File object."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "Whether this file should be filtered out."
    },
    "generator": false
  },
  {
    "__docId__": 22,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "populate",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#populate",
    "access": null,
    "description": "Populate the Collection's files via file system path or metadata attribute.",
    "lineNumber": 144,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object.<string, Files>"
        ],
        "spread": false,
        "optional": false,
        "name": "files",
        "description": "All Files."
      },
      {
        "nullable": null,
        "types": [
          "Object.<string, CollectionBase>"
        ],
        "spread": false,
        "optional": false,
        "name": "collections",
        "description": "Object of all\n  collections."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "CollectionBase"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "__docId__": 23,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "createPage",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#createPage",
    "access": null,
    "description": "Create a CollectionPage instance.",
    "lineNumber": 154,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "index",
        "description": "Index of the page."
      },
      {
        "nullable": null,
        "types": [
          "string?"
        ],
        "spread": false,
        "optional": false,
        "name": "pageIdArg",
        "description": "Optional custom ID for a CollectionPage."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "CollectionPage"
      ],
      "spread": false,
      "description": "CollectionPage instance."
    },
    "generator": false
  },
  {
    "__docId__": 24,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_linkPages",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#_linkPages",
    "access": null,
    "description": null,
    "lineNumber": 174,
    "undocument": true,
    "params": [
      {
        "name": "shouldLinkPrevious",
        "types": [
          "*"
        ]
      },
      {
        "name": "shouldLinkNext",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 25,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "write",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase#write",
    "access": null,
    "description": "Writes every page in this collection.",
    "lineNumber": 203,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "siteData",
        "description": "Site wide data that is shared on all rendered\n pages."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "__docId__": 26,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "sortFiles",
    "memberof": "lib/collection/base.js~CollectionBase",
    "longname": "lib/collection/base.js~CollectionBase.sortFiles",
    "access": null,
    "description": "Sorts files according to a sort config object.",
    "lineNumber": 224,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array.<File>"
        ],
        "spread": false,
        "optional": false,
        "name": "files",
        "description": "Array of File objects."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "sortConfig",
        "description": "Sort config object."
      },
      {
        "nullable": null,
        "types": [
          "string?"
        ],
        "spread": false,
        "optional": false,
        "name": "dateFormat",
        "description": "Optional. File date format from config."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array.<file>"
      ],
      "spread": false,
      "description": "Sorted files."
    },
    "generator": false
  },
  {
    "__docId__": 27,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/collection/index.js",
    "memberof": null,
    "longname": "lib/collection/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import FileSystemCollection from './type/file-system';\nimport MetadataCollection from './type/metadata';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function createCollection(name, collectionConfig, getConfig) {\n  if (collectionConfig.metadata) {\n    return new MetadataCollection(name, collectionConfig, getConfig);\n  }\n\n  return new FileSystemCollection(name, collectionConfig, getConfig);\n}\n"
  },
  {
    "__docId__": 28,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "createCollection",
    "memberof": "lib/collection/index.js",
    "longname": "lib/collection/index.js~createCollection",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/collection/index.js",
    "importStyle": "{createCollection}",
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "collectionConfig",
        "types": [
          "*"
        ]
      },
      {
        "name": "getConfig",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 29,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/collection/page.js",
    "memberof": null,
    "longname": "lib/collection/page.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import _ from 'lodash';\nimport path from 'path';\nimport Promise from 'bluebird';\nimport fs from 'fs-extra';\nimport cache from '../cache';\nimport createChecksum from '../checksum';\nimport PluginEvents from '../plugin/events';\nimport {\n  renderTemplate,\n} from '../template';\nimport Url from '../url';\nimport {\n  renderFileWithPlugins,\n} from '../render';\n\nexport default class CollectionPage {\n  /**\n   * Constructor for a CollectionPage.\n   * @param {string} collectionId Collection ID.\n   * @param {number} pageIndex Page index.\n   * @constructor\n   */\n  constructor(collectionId, pageIndex) {\n    if (_.isUndefined(collectionId)) {\n      throw new Error('CollectionPage requires a collection ID as a string.');\n    }\n\n    if (!_.isNumber(pageIndex)) {\n      throw new Error('CollectionPage requires a page index.');\n    }\n\n    /**\n     * Unique ID of this CollectionPage. Comprised of its Collection's ID and\n     * its page index.\n     * @type {string}\n     */\n    this.id = `${collectionId}:${pageIndex}`;\n\n    /**\n     * Collection ID this page is a part of.\n     * @type {string}\n     */\n    this.collectionId = collectionId;\n\n    /**\n     * Page index, 0-indexed.\n     * @type {number}\n     */\n    this.index = pageIndex;\n\n    /**\n     * An array of Files that are in this page.\n     * @type {Array.<string>}\n     */\n    this.files = [];\n\n    /**\n     * The permalink template.\n     * @type {string}\n     */\n    this.permalink = '';\n\n    /**\n     * Data accessible from template.\n     * @type {Object}\n     */\n    this.data = Object.create(null);\n\n    // Current page number, 1-indexed for display purposes.\n    this.data.page = this.index + 1;\n  }\n\n  setGetConfig(getConfig) {\n    this._getConfig = getConfig;\n  }\n\n  setData(data = {}) {\n    // Current page number.\n    if (!_.isUndefined(data.page) && !_.isNumber(data.page)) {\n      throw new Error('CollectionPage requires \\'page\\' as a number.');\n    }\n\n    // How many pages in the collection.\n    if (!_.isUndefined(data.total_pages) && !_.isNumber(data.total_pages)) {\n      throw new Error('CollectionPage requires \\'total_pages\\' as a number.');\n    }\n\n    // Posts displayed per page.\n    if (!_.isUndefined(data.per_page) && !_.isNumber(data.per_page)) {\n      throw new Error('CollectionPage requires \\'per_page\\' as a number.');\n    }\n\n    // Total number of posts.\n    if (!_.isUndefined(data.total) && !_.isNumber(data.total)) {\n      throw new Error('CollectionPage requires \\'total\\' as a number.');\n    }\n\n    // Update content that's accessible from template.\n    Object.assign(this.data, data);\n\n    this._calculateDestination();\n  }\n\n  /**\n   * Set what files belong in this page.\n   * @param {Array.<File>} files Array of files.\n   */\n  setFiles(files) {\n    if (!_.isUndefined(files) && !_.isArray(files)) {\n      throw new Error('Files must be an array.');\n    }\n\n    // Save Files in this Page.\n    this.files = files;\n\n    /**\n     * Array of File data in this page.\n     * @type {Array.<File>}\n     */\n    this.data.files = files.map(file => file.data);\n  }\n\n  /**\n   * Generate the checksum of this CollectionPage. It's derived from the Files\n   * that exist in this collection.\n   * @return {string}\n   */\n  getChecksum() {\n    const fileChecksums = this.files.map(file => file.checksum);\n\n    const checksum = createChecksum(fileChecksums.join(''));\n\n    return checksum;\n  }\n\n  /**\n   * Link this page with its previus page, for use in templates.\n   * @param {CollectionPage} previous CollectionPage instance.\n   */\n  setPreviousPage(previous) {\n    Object.assign(this.data, {\n      // Previous page number. 0 if the current page is the first.\n      prev: previous.data.page,\n\n      // The URL of previous page. '' if the current page is the first.\n      prev_link: previous.data.url,\n    });\n  }\n\n  /**\n  * Link this page with its next page, for use in templates.\n  * @param {CollectionPage} next CollectionPage instance.\n   */\n  setNextPage(next) {\n    Object.assign(this.data, {\n      // Next page number. 0 if the current page is the last.\n      next: next.data.page,\n\n      // The URL of next page. '' if the current page is the last.\n      next_link: next.data.url,\n    });\n  }\n\n  /**\n   * Calculate both relative and absolute destination path for where to write\n   * the file.\n   * @private\n   */\n  _calculateDestination() {\n    // Calculate the permalink value.\n    const relativeDestination = Url.interpolatePermalink(\n      this.permalink,\n      this.data\n    );\n\n    const fileSystemSafeDestination = Url.makeUrlFileSystemSafe(\n      relativeDestination\n    );\n\n    /**\n     * The URL without the domain, but with a leading slash,\n     * e.g.  /2008/12/14/my-post.html\n     * @type {string} url Relative path to file.\n     */\n    this.data.url = Url.makePretty(fileSystemSafeDestination);\n\n    /**\n     * Absolute destination path.\n     * @type {string} destination Absolute path to file.\n     */\n    this.destination = path.join(\n      this._getConfig().get('path.destination'),\n      fileSystemSafeDestination\n    );\n  }\n\n  /**\n   * Update a CollectionPage's content via updating every File's content.\n   * @param {Object} globalData Site wide data.\n   */\n  async update(globalData) {\n    await Promise.all(this.files.map(file => file.update()));\n    await Promise.all(this.files.map(file =>\n      file.renderWithPlugins(globalData))\n    );\n\n    this.data.files = this.files.map(file => file.data);\n  }\n\n  render(globalData) {\n    const templateData = {\n      ...globalData,\n      pagination: this.data,\n    };\n\n    const template = this.data.template;\n\n    if (_.isNil(template)) {\n      let errMsg = 'CollectionPage: No template given.\\nData object: ';\n      errMsg += JSON.stringify(this.data);\n      throw new Error(errMsg);\n    }\n\n    return renderTemplate(template, templateData);\n  }\n\n  async renderWithPlugins(globalData) {\n    const [, result] = await renderFileWithPlugins(\n      this,\n      globalData,\n      PluginEvents.page.beforeRender,\n      PluginEvents.page.afterRender\n    );\n\n    return result;\n  }\n\n  /**\n   * Writes a given CollectionPage to the file system.\n   * @param {Object} globalData Site wide data.\n   */\n  async write(globalData) {\n    const checksum = this.getChecksum();\n\n    if (this._getConfig().get('incremental') &&\n        cache.get(this.id) === checksum) {\n      return;\n    }\n\n    const content = await this.renderWithPlugins(globalData);\n\n    await Promise.fromCallback((cb) => {\n      fs.outputFile(this.destination, content, 'utf8', cb);\n    });\n\n    // Save checksum to cache for incremental builds.\n    cache.put(this.id, checksum);\n  }\n}\n"
  },
  {
    "__docId__": 30,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "CollectionPage",
    "memberof": "lib/collection/page.js",
    "longname": "lib/collection/page.js~CollectionPage",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/collection/page.js",
    "importStyle": "CollectionPage",
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 31,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#constructor",
    "access": null,
    "description": "Constructor for a CollectionPage.",
    "lineNumber": 23,
    "unknown": [
      {
        "tagName": "@constructor",
        "tagValue": ""
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "collectionId",
        "description": "Collection ID."
      },
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "pageIndex",
        "description": "Page index."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 32,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "id",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#id",
    "access": null,
    "description": "Unique ID of this CollectionPage. Comprised of its Collection's ID and\nits page index.",
    "lineNumber": 37,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 33,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "collectionId",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#collectionId",
    "access": null,
    "description": "Collection ID this page is a part of.",
    "lineNumber": 43,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 34,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "index",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#index",
    "access": null,
    "description": "Page index, 0-indexed.",
    "lineNumber": 49,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 35,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "files",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#files",
    "access": null,
    "description": "An array of Files that are in this page.",
    "lineNumber": 55,
    "type": {
      "nullable": null,
      "types": [
        "Array.<string>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 36,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "permalink",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#permalink",
    "access": null,
    "description": "The permalink template.",
    "lineNumber": 61,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 37,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "data",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#data",
    "access": null,
    "description": "Data accessible from template.",
    "lineNumber": 67,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 38,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "setGetConfig",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#setGetConfig",
    "access": null,
    "description": null,
    "lineNumber": 73,
    "undocument": true,
    "params": [
      {
        "name": "getConfig",
        "types": [
          "*"
        ]
      }
    ],
    "generator": false
  },
  {
    "__docId__": 39,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_getConfig",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#_getConfig",
    "access": null,
    "description": null,
    "lineNumber": 74,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 40,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "setData",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#setData",
    "access": null,
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "params": [
      {
        "name": "data",
        "optional": true,
        "types": [
          "{}"
        ],
        "defaultRaw": {},
        "defaultValue": "{}"
      }
    ],
    "generator": false
  },
  {
    "__docId__": 41,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "setFiles",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#setFiles",
    "access": null,
    "description": "Set what files belong in this page.",
    "lineNumber": 108,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array.<File>"
        ],
        "spread": false,
        "optional": false,
        "name": "files",
        "description": "Array of files."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 42,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "files",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#files",
    "access": null,
    "description": null,
    "lineNumber": 114,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 43,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getChecksum",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#getChecksum",
    "access": null,
    "description": "Generate the checksum of this CollectionPage. It's derived from the Files\nthat exist in this collection.",
    "lineNumber": 128,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "__docId__": 44,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "setPreviousPage",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#setPreviousPage",
    "access": null,
    "description": "Link this page with its previus page, for use in templates.",
    "lineNumber": 140,
    "params": [
      {
        "nullable": null,
        "types": [
          "CollectionPage"
        ],
        "spread": false,
        "optional": false,
        "name": "previous",
        "description": "CollectionPage instance."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 45,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "setNextPage",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#setNextPage",
    "access": null,
    "description": "Link this page with its next page, for use in templates.",
    "lineNumber": 154,
    "params": [
      {
        "nullable": null,
        "types": [
          "CollectionPage"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "CollectionPage instance."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 46,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_calculateDestination",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#_calculateDestination",
    "access": "private",
    "description": "Calculate both relative and absolute destination path for where to write\nthe file.",
    "lineNumber": 169,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 47,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "destination",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#destination",
    "access": null,
    "description": "Absolute destination path.",
    "lineNumber": 191,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 48,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "update",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#update",
    "access": null,
    "description": "Update a CollectionPage's content via updating every File's content.",
    "lineNumber": 201,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "globalData",
        "description": "Site wide data."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 49,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "render",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#render",
    "access": null,
    "description": null,
    "lineNumber": 210,
    "undocument": true,
    "params": [
      {
        "name": "globalData",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 50,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "renderWithPlugins",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#renderWithPlugins",
    "access": null,
    "description": null,
    "lineNumber": 227,
    "undocument": true,
    "params": [
      {
        "name": "globalData",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 51,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "write",
    "memberof": "lib/collection/page.js~CollectionPage",
    "longname": "lib/collection/page.js~CollectionPage#write",
    "access": null,
    "description": "Writes a given CollectionPage to the file system.",
    "lineNumber": 242,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "globalData",
        "description": "Site wide data."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 52,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/collection/type/file-system.js",
    "memberof": null,
    "longname": "lib/collection/type/file-system.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import _ from 'lodash';\n\nimport CollectionBase from '../base';\n\n/**\n * A collection that derives its content from the location of a file in the\n * file system.\n */\nexport default class FileSystemCollection extends CollectionBase {\n  constructor(name, collectionConfig, getConfig) {\n    super(name, collectionConfig, getConfig);\n\n    /**\n     * Array of file id's that belong in this collection.\n     * @type {Object.<string, File>}\n     */\n    this.files = {};\n\n    /**\n     * Array of paths to exclude from including in this collection.\n     * @type {Array.<string>}\n     */\n    this.excludePaths = [];\n  }\n\n  /**\n   * Set what paths to exclude from including in this collection.\n   * @param {Object.<string, CollectionBase>} collections Array of Collections.\n   */\n  _setExcludePaths(collections) {\n    this.excludePaths = _.reduce(collections, (allPaths, collection) => {\n      // Only include a collection path if it exists and isn't the app source,\n      // and isn't this collection's path.\n      if (collection.path &&\n          collection.path !== this.path &&\n          collection.path !== this._getConfig().get('path.source')) {\n        allPaths.push(collection.path);\n      }\n\n      return allPaths;\n    }, []);\n  }\n\n  /**\n   * Is this file's path included in this collection's excludePaths.\n   * @param {File} file File object.\n   * @return {boolean} true if the file's path includes an exclude path.\n   * @private\n   */\n  _isFileExcluded(file) {\n    return this.excludePaths.some(path => file.path.includes(path));\n  }\n\n  /**\n   * Checks to see if this file passes all requirements to be considered a part\n   * of this collection.\n   * @param {File} file File object.\n   * @return {boolean} true if the file meets all requirements.\n   */\n  _isFileInCollection(file) {\n    return file.path.includes(this.path) &&\n      !this._isFileExcluded(file) &&\n      !this.isFiltered(file);\n  }\n\n  /**\n   * Add a file to the collection.\n   * @param {File} file File object.\n   * @return {boolean} True if the file was added to the collection.\n   */\n  addFile(file) {\n    if (!this._isFileInCollection(file)) {\n      return false;\n    }\n\n    // Add file.\n    this.files[file.id] = file;\n\n    // Add data to template accessible object.\n    this.data.files.push(file.data);\n\n    return true;\n  }\n\n  /**\n   * Populate the Collection's files via file system path or metadata attribute.\n   * @param {Object.<string, Files>} files All Files.\n   * @param {?Object.<string, CollectionBase>} collections Object of all\n   *   collections.\n   * @return {Collection}\n   */\n  populate(files, collections) {\n    if (!_.isUndefined(collections)) {\n      this._setExcludePaths(collections);\n    }\n\n    // Add data to template accessible object.\n    this.data.files = [];\n\n    _.each(files, (file) => {\n      // Don't return value so we iterate over every file.\n      this.addFile(file);\n    });\n\n    this.createCollectionPages();\n\n    return this;\n  }\n\n  /**\n   * Create CollectionPage objects for our Collection.\n   * @return {boolean} True if we successfully created CollectionPages.\n   */\n  createCollectionPages() {\n    // If no permalink paths are set then we don't render a CollectionPage.\n    if (!(this.permalink && this.permalink.index && this.permalink.page)) {\n      return false;\n    }\n\n    if (!_.isEmpty(this.files)) {\n      this.pages = [];\n\n      // Sort files according to config.\n      const files = CollectionBase.sortFiles(\n        _.values(this.files),\n        this.sort,\n        this._getConfig().get('file.date_format')\n      );\n\n      // Break up our array of files into arrays that match our defined\n      // pagination size.\n      const pages = _.chunk(files, this.pageSize);\n\n      pages.forEach((pageFiles, index) => {\n        const collectionPage = this.createPage(index);\n\n        // Files in the page.\n        collectionPage.setFiles(pageFiles);\n\n        // Update CollectionPage template data.\n        collectionPage.setData({\n          // How many pages in the collection.\n          total_pages: pages.length,\n\n          // Posts displayed per page.\n          per_page: this.pageSize,\n\n          // Total number of posts.\n          total: files.length,\n        });\n\n        // Add to our array of pages.\n        this.pages.push(collectionPage);\n      });\n    }\n\n    this._linkPages(\n      // ShouldLinkPrevious\n      previous => previous,\n      // ShouldLinkNext\n      next => next\n    );\n\n    return true;\n  }\n}\n"
  },
  {
    "__docId__": 53,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "FileSystemCollection",
    "memberof": "lib/collection/type/file-system.js",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/collection/type/file-system.js",
    "importStyle": "FileSystemCollection",
    "description": "A collection that derives its content from the location of a file in the\nfile system.",
    "lineNumber": 9,
    "interface": false,
    "extends": [
      "lib/collection/base.js~CollectionBase"
    ]
  },
  {
    "__docId__": 54,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/collection/type/file-system.js~FileSystemCollection",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection#constructor",
    "access": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "collectionConfig",
        "types": [
          "*"
        ]
      },
      {
        "name": "getConfig",
        "types": [
          "*"
        ]
      }
    ],
    "generator": false
  },
  {
    "__docId__": 55,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "files",
    "memberof": "lib/collection/type/file-system.js~FileSystemCollection",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection#files",
    "access": null,
    "description": "Array of file id's that belong in this collection.",
    "lineNumber": 17,
    "type": {
      "nullable": null,
      "types": [
        "Object.<string, File>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 56,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "excludePaths",
    "memberof": "lib/collection/type/file-system.js~FileSystemCollection",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection#excludePaths",
    "access": null,
    "description": "Array of paths to exclude from including in this collection.",
    "lineNumber": 23,
    "type": {
      "nullable": null,
      "types": [
        "Array.<string>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 57,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_setExcludePaths",
    "memberof": "lib/collection/type/file-system.js~FileSystemCollection",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection#_setExcludePaths",
    "access": null,
    "description": "Set what paths to exclude from including in this collection.",
    "lineNumber": 30,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object.<string, CollectionBase>"
        ],
        "spread": false,
        "optional": false,
        "name": "collections",
        "description": "Array of Collections."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 58,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "excludePaths",
    "memberof": "lib/collection/type/file-system.js~FileSystemCollection",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection#excludePaths",
    "access": null,
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 59,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_isFileExcluded",
    "memberof": "lib/collection/type/file-system.js~FileSystemCollection",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection#_isFileExcluded",
    "access": "private",
    "description": "Is this file's path included in this collection's excludePaths.",
    "lineNumber": 50,
    "params": [
      {
        "nullable": null,
        "types": [
          "File"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": "File object."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "true if the file's path includes an exclude path."
    },
    "generator": false
  },
  {
    "__docId__": 60,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_isFileInCollection",
    "memberof": "lib/collection/type/file-system.js~FileSystemCollection",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection#_isFileInCollection",
    "access": null,
    "description": "Checks to see if this file passes all requirements to be considered a part\nof this collection.",
    "lineNumber": 60,
    "params": [
      {
        "nullable": null,
        "types": [
          "File"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": "File object."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "true if the file meets all requirements."
    },
    "generator": false
  },
  {
    "__docId__": 61,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "addFile",
    "memberof": "lib/collection/type/file-system.js~FileSystemCollection",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection#addFile",
    "access": null,
    "description": "Add a file to the collection.",
    "lineNumber": 71,
    "params": [
      {
        "nullable": null,
        "types": [
          "File"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": "File object."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "True if the file was added to the collection."
    },
    "generator": false
  },
  {
    "__docId__": 62,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "populate",
    "memberof": "lib/collection/type/file-system.js~FileSystemCollection",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection#populate",
    "access": null,
    "description": "Populate the Collection's files via file system path or metadata attribute.",
    "lineNumber": 92,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object.<string, Files>"
        ],
        "spread": false,
        "optional": false,
        "name": "files",
        "description": "All Files."
      },
      {
        "nullable": true,
        "types": [
          "Object.<string, CollectionBase>"
        ],
        "spread": false,
        "optional": false,
        "name": "collections",
        "description": "Object of all\n  collections."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Collection"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "__docId__": 63,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "createCollectionPages",
    "memberof": "lib/collection/type/file-system.js~FileSystemCollection",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection#createCollectionPages",
    "access": null,
    "description": "Create CollectionPage objects for our Collection.",
    "lineNumber": 114,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "True if we successfully created CollectionPages."
    },
    "generator": false
  },
  {
    "__docId__": 64,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "pages",
    "memberof": "lib/collection/type/file-system.js~FileSystemCollection",
    "longname": "lib/collection/type/file-system.js~FileSystemCollection#pages",
    "access": null,
    "description": null,
    "lineNumber": 121,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 65,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/collection/type/metadata.js",
    "memberof": null,
    "longname": "lib/collection/type/metadata.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import _ from 'lodash';\n\nimport Url from '../../url';\nimport CollectionBase from '../base';\n\n/**\n * A collection that derives its content from a match in a files yaml\n * frontmatter data.\n */\nexport default class MetadataCollection extends CollectionBase {\n  constructor(name, collectionConfig, getConfig) {\n    super(name, collectionConfig, getConfig);\n\n    /**\n     * Object which holds a mapping of metadata value to the files that contain\n     * the metadata property.\n     * For example with metadata of 'tags' you'd have:\n     * {\n     *  'tag-name': [file, file],\n     *  'other-tag': [file, file]\n     * }\n     * @type {Object.<string, Array.<File>>}\n     */\n    this.metadataFiles = Object.create(null);\n  }\n\n  /**\n   * Checks to see if this file passes all requirements to be considered a part\n   * of this collection.\n   * @param {File} file File object.\n   * @return {boolean} true if the file meets all requirements.\n   */\n  _isFileInCollection(file) {\n    return !_.isUndefined(file.data[this.metadata]) && !this.isFiltered(file);\n  }\n\n  /**\n   * Add a file to the collection.\n   * @param {File} file File object.\n   * @return {boolean} True if the file was added to the collection.\n   */\n  addFile(file) {\n    if (!this._isFileInCollection(file)) {\n      return false;\n    }\n\n    let metadataValues = file.data[this.metadata];\n    if (!Array.isArray(metadataValues)) {\n      metadataValues = [metadataValues];\n    }\n\n    metadataValues.forEach((rawValue) => {\n      // Slugify each value to make sure there's no collisions when we write\n      // CollectionPages to disk. This prevents `open source` and `open-source`\n      // from being in two different keys but both writing to the same\n      // file-system destination.\n      const value = _.isString(rawValue) ? Url.slug(rawValue) : rawValue;\n      this.metadataFiles[value] = this.metadataFiles[value] || [];\n      this.metadataFiles[value].push(file);\n\n      // Add data to template accessible object.\n      this.data.metadata[value] = this.data.metadata[value] || [];\n      this.data.metadata[value].push(file.data);\n    });\n\n    return true;\n  }\n\n  /**\n   * Populate the Collection's files via file system path or metadata attribute.\n   * @param {Object.<string, Files>} files Object of files.\n   * @return {Collection}\n   */\n  populate(files) {\n    // Create metadata files.\n    this.metadataFiles = {};\n\n    // Initialize template data.\n    this.data.metadata = {};\n\n    // Store files that are in our collection.\n    _.each(files, (file) => {\n      // Don't return value so we iterate over every file.\n      this.addFile(file);\n    });\n\n    this.createCollectionPages();\n\n    return this;\n  }\n\n  /**\n   * Create CollectionPage objects for our Collection.\n   * @return {boolean} True if we successfully created CollectionPages.\n   * @private\n   */\n  createCollectionPages() {\n    // If no permalink paths are set then we don't render a CollectionPage.\n    if (!(this.permalink && this.permalink.index && this.permalink.page)) {\n      return false;\n    }\n\n    if (!_.isEmpty(this.metadataFiles)) {\n      this.pages = [];\n\n      // Create CollectionPage objects to represent our pagination pages.\n      _.each(this.metadataFiles, (rawFiles, metadataKey) => {\n        // Sort files.\n        const files = CollectionBase.sortFiles(\n          rawFiles,\n          this.sort,\n          this._getConfig().get('file.date_format')\n        );\n\n        // Break up our array of files into arrays that match our defined\n        // pagination size.\n        const pages = _.chunk(files, this.pageSize);\n\n        pages.forEach((pageFiles, index) => {\n          // Create CollectionPage.\n          const collectionPage = this.createPage(\n            index,\n            `${this.id}:${metadataKey}:${index}` // Custom ID.\n          );\n\n          collectionPage.setData({\n            // Extra template information.\n            metadata: metadataKey,\n\n            // How many pages in the collection.\n            total_pages: pages.length,\n\n            // Posts displayed per page\n            per_page: this.pageSize,\n\n            // Total number of posts\n            total: files.length,\n          });\n\n          // Files in the page.\n          collectionPage.setFiles(pageFiles);\n\n          // Create a map of the metadataKey to its full URL on the file object.\n          // Useful when rendering and wanting to link out to the metadata page.\n          pageFiles.forEach((file) => {\n            file.data.metadataUrls = file.data.metadataUrls || {};\n            file.data.metadataUrls[metadataKey] = collectionPage.data.url;\n          });\n\n          // Add to our array of pages.\n          this.pages.push(collectionPage);\n        });\n      });\n    }\n\n    this._linkPages(\n      // ShouldLinkPrevious\n      (previous, collectionPage) => (\n        // With metadata collections all pages aren't made in the same context.\n        // i.e. for a tag metadata collection you'll have 3 pages with metadata\n        // value of 'review', and 2 pages of value 'tutorial'. These different\n        // metadata values should not be linked.\n        previous && this.metadataFiles &&\n          previous.data.metadata === collectionPage.data.metadata\n      ),\n      // ShouldLinkNext\n      (next, collectionPage) => (\n        // With metadata collections all pages aren't made in the same context.\n        // i.e. for a tag metadata collection you'll have 3 pages with metadata\n        // value of 'review', and 2 pages of value 'tutorial'. These different\n        // metadata values should not be linked.\n        next && this.metadataFiles &&\n          next.data.metadata === collectionPage.data.metadata\n      )\n    );\n\n    return true;\n  }\n}\n"
  },
  {
    "__docId__": 66,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "MetadataCollection",
    "memberof": "lib/collection/type/metadata.js",
    "longname": "lib/collection/type/metadata.js~MetadataCollection",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/collection/type/metadata.js",
    "importStyle": "MetadataCollection",
    "description": "A collection that derives its content from a match in a files yaml\nfrontmatter data.",
    "lineNumber": 10,
    "interface": false,
    "extends": [
      "lib/collection/base.js~CollectionBase"
    ]
  },
  {
    "__docId__": 67,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/collection/type/metadata.js~MetadataCollection",
    "longname": "lib/collection/type/metadata.js~MetadataCollection#constructor",
    "access": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "params": [
      {
        "name": "name",
        "types": [
          "*"
        ]
      },
      {
        "name": "collectionConfig",
        "types": [
          "*"
        ]
      },
      {
        "name": "getConfig",
        "types": [
          "*"
        ]
      }
    ],
    "generator": false
  },
  {
    "__docId__": 68,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "metadataFiles",
    "memberof": "lib/collection/type/metadata.js~MetadataCollection",
    "longname": "lib/collection/type/metadata.js~MetadataCollection#metadataFiles",
    "access": null,
    "description": "Object which holds a mapping of metadata value to the files that contain\nthe metadata property.\nFor example with metadata of 'tags' you'd have:\n{\n 'tag-name': [file, file],\n 'other-tag': [file, file]\n}",
    "lineNumber": 24,
    "type": {
      "nullable": null,
      "types": [
        "Object.<string, Array.<File>>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 69,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_isFileInCollection",
    "memberof": "lib/collection/type/metadata.js~MetadataCollection",
    "longname": "lib/collection/type/metadata.js~MetadataCollection#_isFileInCollection",
    "access": null,
    "description": "Checks to see if this file passes all requirements to be considered a part\nof this collection.",
    "lineNumber": 33,
    "params": [
      {
        "nullable": null,
        "types": [
          "File"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": "File object."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "true if the file meets all requirements."
    },
    "generator": false
  },
  {
    "__docId__": 70,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "addFile",
    "memberof": "lib/collection/type/metadata.js~MetadataCollection",
    "longname": "lib/collection/type/metadata.js~MetadataCollection#addFile",
    "access": null,
    "description": "Add a file to the collection.",
    "lineNumber": 42,
    "params": [
      {
        "nullable": null,
        "types": [
          "File"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": "File object."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "True if the file was added to the collection."
    },
    "generator": false
  },
  {
    "__docId__": 71,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "populate",
    "memberof": "lib/collection/type/metadata.js~MetadataCollection",
    "longname": "lib/collection/type/metadata.js~MetadataCollection#populate",
    "access": null,
    "description": "Populate the Collection's files via file system path or metadata attribute.",
    "lineNumber": 74,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object.<string, Files>"
        ],
        "spread": false,
        "optional": false,
        "name": "files",
        "description": "Object of files."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Collection"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "__docId__": 72,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "metadataFiles",
    "memberof": "lib/collection/type/metadata.js~MetadataCollection",
    "longname": "lib/collection/type/metadata.js~MetadataCollection#metadataFiles",
    "access": null,
    "description": null,
    "lineNumber": 76,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 73,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "createCollectionPages",
    "memberof": "lib/collection/type/metadata.js~MetadataCollection",
    "longname": "lib/collection/type/metadata.js~MetadataCollection#createCollectionPages",
    "access": "private",
    "description": "Create CollectionPage objects for our Collection.",
    "lineNumber": 97,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "True if we successfully created CollectionPages."
    },
    "generator": false
  },
  {
    "__docId__": 74,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "pages",
    "memberof": "lib/collection/type/metadata.js~MetadataCollection",
    "longname": "lib/collection/type/metadata.js~MetadataCollection#pages",
    "access": null,
    "description": null,
    "lineNumber": 104,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 75,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/config/config-schema.js",
    "memberof": null,
    "longname": "lib/config/config-schema.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import Joi from 'joi';\n\nexport default Joi.object({\n  site: Joi.object().default(),\n  path: Joi.object({\n    source: Joi.string()\n      .default('./'),\n    destination: Joi.string()\n      .default('./_site'),\n    plugins: Joi.string()\n      .default('./_plugins'),\n    themes: Joi.string()\n      .default('./_themes'),\n    data: Joi.string()\n      .default('./_data'),\n  }).default(),\n  file: Joi.object({\n    url_key: Joi.string().default('url'),\n    date_format: Joi.string().default('YYYY-M-D'),\n    defaults: Joi.array().items(\n      Joi.object({\n        scope: Joi.object({\n          path: Joi.string().allow(''),\n          metadata: Joi.object(),\n        }),\n        values: Joi.object(),\n      })\n    ).default([]),\n    filters: Joi.object({\n      metadata: Joi.object(),\n      future_date: Joi.object({\n        key: Joi.string().default('date'),\n      }),\n    }).default({}),\n  }).default(),\n  collections: Joi.object().pattern(/\\w/, Joi.object({\n    path: Joi.string(),\n    metadata: Joi.string(),\n    template: Joi.string().default('index'),\n    page_size: Joi.number().default(6),\n    sort: Joi.object({\n      key: Joi.string().default('date'),\n      order: Joi.string().default('descending'),\n    }),\n    permalink: Joi.object({\n      index: Joi.string().default('/'),\n      page: Joi.string().default('/page/:page/'),\n    }),\n  }).without('path', 'metadata')),\n  theme: Joi.string().default('default'),\n  clean_destination: Joi.boolean().default(false),\n  slug: Joi.object({\n    lower: Joi.boolean().default(true),\n  }).default(),\n  markdown: Joi.object({\n    extensions: Joi.array().default([\n      'markdown',\n      'mkdown',\n      'mkdn',\n      'mkd',\n      'md',\n    ]),\n    options: Joi.object({\n      preset: Joi.string().default('commonmark'),\n      highlight: Joi.any().valid(\n        'prism',\n        'highlightjs',\n        true,\n        false\n      ).default(true),\n    }).default(),\n  }).default(),\n  server: Joi.object({\n    port: Joi.number().default(8080),\n    host: Joi.string().default('127.0.0.1'),\n    baseurl: Joi.string().allow('').default(''),\n  }).default(),\n  incremental: Joi.boolean().default(true),\n  new_file_permalink: Joi.string()\n    .default('/_posts/:date|YYYY-:date|MM-:date|D-:title.md'),\n  plugins: Joi.object().pattern(/\\w/, Joi.object({\n    enabled: Joi.boolean(),\n    options: Joi.object(),\n  })),\n}).default();\n"
  },
  {
    "__docId__": 76,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/config/index.js",
    "memberof": null,
    "longname": "lib/config/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import path from 'path';\nimport fs from 'fs';\nimport findUp from 'find-up';\nimport _ from 'lodash';\nimport * as CONSTANTS from '../constants';\nimport log from '../log';\nimport Parse from '../parse';\nimport schema from './config-schema';\n\n/**\n * Look for a `_config.yml` file in this directory or any parent directories.\n * @return {string} Path to the local `_config.yml` file.\n */\nfunction findLocal() {\n  // Look up directories to find a '_config.yml' file.\n  const configYmlPath = findUp.sync(CONSTANTS.YAML.CONFIG);\n\n  // If we still can't find a '_config.yml' file then throw an error.\n  if (!configYmlPath) {\n    throw new Error(`No '${CONSTANTS.YAML.CONFIG}' file found.`);\n  }\n\n  return configYmlPath;\n}\n\n/**\n * Find the directory where our local '_config.yml' exists.\n * @return {string} Path to the directory where our '_config.yml' file exists.\n */\nfunction findLocalDir() {\n  return findLocal().replace(CONSTANTS.YAML.CONFIG, '');\n}\n\n/**\n * Loads the local `_config.yml` file into memory and parses it.\n * @param {string} root Root path of instance.\n * @return {Object} Parsed YAML file as a JavaScript object.\n */\nfunction loadAndParseYaml(root) {\n  const localConfigPath = path.join(root, CONSTANTS.YAML.CONFIG);\n  let localConfig = '';\n  try {\n    localConfig = fs.readFileSync(localConfigPath, 'utf8');\n  } catch (e) {\n    // noop.\n  }\n\n  return Parse.fromYaml(localConfig);\n}\n\nexport default class Config {\n  constructor(root = findLocalDir()) {\n    /**\n     * Full path to where we're running our app from.\n     * @type {string} Full path.\n     */\n    this.root = root;\n\n    /**\n     * Raw object that holds the config object.\n     * @type {Object}\n     * @private\n     */\n    this._raw = Object.create(null);\n  }\n\n  /**\n   * Update our in-memory representation of the config file from disk.\n   * This load's the YAML file, parses it, validates it, sets defaults,\n   * and then updates our internal instance.\n   */\n  update() {\n    // Load and parse YAML file into JS object.\n    const config = loadAndParseYaml(this.root);\n\n    // Validate config against schema. Sets defaults where neccessary.\n    const { error, value } = schema.validate(config);\n\n    if (error != null) {\n      log.error(error.annotate());\n      throw new Error(`_config.yml validation error: ${error.message}`);\n    }\n\n    // Store config data privately. Assign all default values.\n    this._raw = _.defaultsDeep(\n      value,\n      schema.validate().value\n    );\n\n    // Calculate absolute path of 'paths' keys.\n    this._raw.path[CONSTANTS.KEY.SOURCE] = path.resolve(\n      this.root, this._raw.path[CONSTANTS.KEY.SOURCE]\n    );\n    _.each(this._raw.path, (val, key) => {\n      if (key !== CONSTANTS.KEY.SOURCE) {\n        this._raw.path[key] = path.resolve(\n          this._raw.path.source,\n          this._raw.path[key]\n        );\n      }\n    });\n\n    // Sort our default values. They are sorted by:\n    //   1. Scopes with only metadata are first.\n    //   2. Scopes with paths are sorted from shortest to longest (most\n    //      specific).\n    //   3. Scopes with both metadata and paths are sorted after.\n    //   4. If two objects have the same scope, or if they both have metadata,\n    //      then we sort those values in the order in which they were given.\n    const sortedDefaults = _.sortBy(this._raw.file.defaults, [\n      defaultObj => _.get(defaultObj, 'scope.path', '').length,\n      defaultObj => defaultObj.scope.metadata != null,\n    ]);\n\n    // Update each scope path to be absolute relative to source path.\n    this._raw.file.defaults = sortedDefaults.map((defaultObj) => {\n      if (defaultObj.scope.path != null) {\n        defaultObj.scope.path = path.resolve(\n          this._raw.path.source,\n          defaultObj.scope.path\n        );\n      }\n      return defaultObj;\n    });\n  }\n\n  /**\n   * Getter to access config properties. Everything is pushed through here\n   * so we can provide required defaults if they're not set. Also enforces\n   * uniform access to config properties.\n   * @param {string} objectPath Path to object property, i.e. 'path.source'.\n   * @return {*} Config value.\n   */\n  get(objectPath = '') {\n    const value = _.get(this._raw, objectPath);\n\n    if (value == null) {\n      throw new Error(`Tried to access config '${objectPath}' ` +\n        'that does not exist.');\n    }\n\n    return value;\n  }\n\n  /**\n   * Reads and parses the example config YAML file from package.\n   * @return {Object} Parsed default config.\n   */\n  static exampleConfig() {\n    return Parse.fromYaml(\n      fs.readFileSync(path.resolve(__dirname, 'config_example.yml'), 'utf8')\n    );\n  }\n}\n"
  },
  {
    "__docId__": 77,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "findLocal",
    "memberof": "lib/config/index.js",
    "longname": "lib/config/index.js~findLocal",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/config/index.js",
    "importStyle": null,
    "description": "Look for a `_config.yml` file in this directory or any parent directories.",
    "lineNumber": 14,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Path to the local `_config.yml` file."
    },
    "generator": false
  },
  {
    "__docId__": 78,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "findLocalDir",
    "memberof": "lib/config/index.js",
    "longname": "lib/config/index.js~findLocalDir",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/config/index.js",
    "importStyle": null,
    "description": "Find the directory where our local '_config.yml' exists.",
    "lineNumber": 30,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Path to the directory where our '_config.yml' file exists."
    },
    "generator": false
  },
  {
    "__docId__": 79,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "loadAndParseYaml",
    "memberof": "lib/config/index.js",
    "longname": "lib/config/index.js~loadAndParseYaml",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/config/index.js",
    "importStyle": null,
    "description": "Loads the local `_config.yml` file into memory and parses it.",
    "lineNumber": 39,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "root",
        "description": "Root path of instance."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Parsed YAML file as a JavaScript object."
    },
    "generator": false
  },
  {
    "__docId__": 80,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Config",
    "memberof": "lib/config/index.js",
    "longname": "lib/config/index.js~Config",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/config/index.js",
    "importStyle": "Config",
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 81,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/config/index.js~Config",
    "longname": "lib/config/index.js~Config#constructor",
    "access": null,
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "params": [
      {
        "name": "root",
        "optional": true,
        "types": [
          "*"
        ]
      }
    ],
    "generator": false
  },
  {
    "__docId__": 82,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "root",
    "memberof": "lib/config/index.js~Config",
    "longname": "lib/config/index.js~Config#root",
    "access": null,
    "description": "Full path to where we're running our app from.",
    "lineNumber": 57,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 83,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_raw",
    "memberof": "lib/config/index.js~Config",
    "longname": "lib/config/index.js~Config#_raw",
    "access": "private",
    "description": "Raw object that holds the config object.",
    "lineNumber": 64,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 84,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "update",
    "memberof": "lib/config/index.js~Config",
    "longname": "lib/config/index.js~Config#update",
    "access": null,
    "description": "Update our in-memory representation of the config file from disk.\nThis load's the YAML file, parses it, validates it, sets defaults,\nand then updates our internal instance.",
    "lineNumber": 72,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 85,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_raw",
    "memberof": "lib/config/index.js~Config",
    "longname": "lib/config/index.js~Config#_raw",
    "access": null,
    "description": null,
    "lineNumber": 85,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 86,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "get",
    "memberof": "lib/config/index.js~Config",
    "longname": "lib/config/index.js~Config#get",
    "access": null,
    "description": "Getter to access config properties. Everything is pushed through here\nso we can provide required defaults if they're not set. Also enforces\nuniform access to config properties.",
    "lineNumber": 134,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "objectPath",
        "description": "Path to object property, i.e. 'path.source'."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "Config value."
    },
    "generator": false
  },
  {
    "__docId__": 87,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "exampleConfig",
    "memberof": "lib/config/index.js~Config",
    "longname": "lib/config/index.js~Config.exampleConfig",
    "access": null,
    "description": "Reads and parses the example config YAML file from package.",
    "lineNumber": 149,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Parsed default config."
    },
    "generator": false
  },
  {
    "__docId__": 88,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/constants.js",
    "memberof": null,
    "longname": "lib/constants.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "/**\n * YAML filename import assert from 'power-assert';.\n * @enum {string}\n * @const\n */\nexport const YAML = {\n  CONFIG: '_config.yml',\n  THEME: '_theme.yml',\n};\n\n/**\n * Key import assert from 'power-assert';, used when looking up values in\n * objects.\n * @enum {string}\n * @const\n */\nexport const KEY = {\n  /**\n   * Key used on the config.path object to dictate where to find the site source\n   * path.\n   * @type {string}\n   */\n  SOURCE: 'source',\n\n  /**\n   * Key used on the config.path object to dictate where to find the site\n   * destination path.\n   * @type {string}\n   */\n  DESTINATION: 'destination',\n};\n"
  },
  {
    "__docId__": 89,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "YAML",
    "memberof": "lib/constants.js",
    "longname": "lib/constants.js~YAML",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/constants.js",
    "importStyle": "{YAML}",
    "description": "YAML filename import assert from 'power-assert';.",
    "lineNumber": 6,
    "unknown": [
      {
        "tagName": "@enum",
        "tagValue": "{string}"
      },
      {
        "tagName": "@const",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 90,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "KEY",
    "memberof": "lib/constants.js",
    "longname": "lib/constants.js~KEY",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/constants.js",
    "importStyle": "{KEY}",
    "description": "Key import assert from 'power-assert';, used when looking up values in\nobjects.",
    "lineNumber": 17,
    "unknown": [
      {
        "tagName": "@enum",
        "tagValue": "{string}"
      },
      {
        "tagName": "@const",
        "tagValue": ""
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 91,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/data-files.js",
    "memberof": null,
    "longname": "lib/data-files.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import path from 'path';\nimport _ from 'lodash';\nimport Promise from 'bluebird';\nimport glob from 'glob';\nimport Parse from './parse';\n\nexport default {\n  /**\n   * Load all files in the given dataPath file and parse them into a JS object.\n   * Then depending on the directory path structure and the name of the file\n   * set the files contents in that path on an object.\n   * @param {string} dataPath Path to data files.\n   * @return {Object}\n   */\n  async update(dataPath = '') {\n    // Read all files from disk and get their file paths.\n    const filePaths = await Promise.fromCallback((cb) => {\n      glob(`${dataPath}/**/*.{json,yml,yaml}`, {\n        // Do not match directories, only files.\n        nodir: true,\n        // Follow symlinks.\n        follow: true,\n      }, cb);\n    }).map(filePath =>\n      // Correct the filePath created by glob to be compatible with Windows.\n      // Known issue in node-glob https://github.com/isaacs/node-glob/pull/263.\n      // eslint-disable-next-line no-useless-escape\n      path.normalize(filePath.replace(/[\\\\\\/]/g, path.sep))\n    );\n\n    const files = filePaths.map(filePath => ({\n      filePath,\n      // Load and parse file's contents.\n      content: Parse.smartLoadAndParse(filePath),\n      // Create the path where we'll set the file's contents.\n      // This turns something like\n      // /Users/user/reptar/_data/friends/angelica.json\n      // into\n      // ['friends', 'angelica']\n      // So we can use it with _.set.\n      dataPath: path.relative(\n        dataPath,\n        path.join(\n          path.dirname(filePath),\n          path.basename(filePath, path.extname(filePath))\n        )\n      ).split(path.sep),\n    }));\n\n    return files.reduce((acc, file) =>\n      // Set file's contents on the corresponding path.\n      _.set(acc, file.dataPath, file.content),\n      {}\n    );\n  },\n};\n"
  },
  {
    "__docId__": 92,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/file.js",
    "memberof": null,
    "longname": "lib/file.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import path from 'path';\nimport Promise from 'bluebird';\nimport fs from 'fs-extra';\nimport _ from 'lodash';\nimport createChecksum from './checksum';\nimport log from './log';\nimport Url from './url';\nimport Parse from './parse';\nimport PluginEvents from './plugin/events';\nimport cache from './cache';\nimport filter from './filter';\nimport {\n  renderMarkdown,\n} from './markdown';\nimport {\n  renderTemplate,\n  renderTemplateString,\n} from './template';\nimport {\n  renderFileWithPlugins,\n} from './render';\n\nexport default class File {\n  constructor(filePath = '', getConfig = () => {}) {\n    /**\n     * Unique ID for this file. Right now an alias for the file's path.\n     * @type {string}\n     */\n    this.id = filePath;\n\n    /**\n     * Absolute path to file location.\n     * @type {string}\n     */\n    this.path = filePath;\n\n    /**\n     * Absolute destination path of where file should be written.\n     * @type {string} destination Absolute path to file.\n     */\n    this.destination = '';\n\n    /**\n     * Frontmatter for this file. Can be undefined if a file has no frontmatter.\n     * @type {object}\n     */\n    this.frontmatter = Object.create(null);\n\n    /**\n     * Template accessible data.\n     * @type {Object.<string, Object>}\n     */\n    this.data = Object.create(null);\n\n    /**\n     * Should we skip processing this file, ignoring templates and markdown\n     * conversion. This is generally only true for images and similar files.\n     * @type {boolean}\n     */\n    this.skipProcessing = false;\n\n    /**\n     * If this File is filtered out of rendering. Filter settings are defined\n     * in the _config.yml file.\n     * @type {boolean}\n     */\n    this.filtered = false;\n\n    /**\n     * Get the global config object.\n     * @type {Function}\n     * @private\n     */\n    this._getConfig = getConfig;\n  }\n\n  /**\n   * Update's File's data from the file system.\n   */\n  async update() {\n    // Check if a file has frontmatter.\n    const hasFrontmatter = await Parse.fileHasFrontmatter(this.path);\n\n    // If File doesn't have frontmatter then return early.\n    if (!hasFrontmatter) {\n      this.skipProcessing = true;\n      this._calculateDestination();\n      return;\n    }\n\n    /**\n     * Raw contents of file, directly from file system.\n     * @type {string} One long string.\n     */\n    const rawContent = await Promise.fromCallback(cb =>\n      fs.readFile(this.path, 'utf8', cb)\n    );\n\n    /**\n     * Checksum hash of rawContent, for use in seeing if file is different.\n     * @example:\n     *  '50de70409f11f87b430f248daaa94d67'\n     * @type {string}\n     */\n    this.checksum = createChecksum(rawContent);\n\n    // Try to parse File's frontmatter.\n    let parsedContent;\n    try {\n      parsedContent = Parse.fromFrontMatter(rawContent);\n    } catch (e) {\n      // Couldn't parse File's frontmatter.\n    }\n\n    // Ensure we have an object to dereference.\n    if (!_.isObject(parsedContent)) {\n      parsedContent = {};\n    }\n\n    const {\n      data: frontmatter,\n      // The file's text content.\n      content,\n    } = parsedContent;\n\n    // Create new data object.\n    this.data = Object.create(null);\n\n    this.frontmatter = frontmatter;\n\n    this.defaults = this._gatherDefaults();\n\n    // Merge in new data that's accessible from template.\n    _.merge(this.data, this.defaults, this.frontmatter, {\n      // The content of the Page.\n      content,\n    });\n\n    this.filtered = filter.isFileFiltered(\n      this._getConfig().get('file.filters'),\n      this\n    );\n\n    try {\n      this._calculateDestination();\n    } catch (e) {\n      throw new Error(\n        'Unable to calculate destination for file at ' +\n        `${this.path}. Message: ${e.message}`\n      );\n    }\n  }\n\n  /**\n   * Gather default values that should be applied to this file.\n   * @return {Object} Default values applied to this file.\n   */\n  _gatherDefaults() {\n    // Defaults are sorted from least to most specific, so we iterate over them\n    // in the reverse order to allow most specific first chance to apply their\n    // values.\n    return _.reduceRight(\n      this._getConfig().get('file.defaults'),\n      (acc, defaultObj) => {\n        const { scope, values } = defaultObj;\n\n        // If default path property is defined does it exist within this file's\n        // path.\n        const pathMatches = scope.path != null ?\n          this.path.includes(scope.path) :\n          true;\n\n        // If metadata is set the does it match the file's metadata.\n        const metadataMatches = _.isObject(scope.metadata) ?\n          _.isMatch(this.frontmatter, scope.metadata) :\n          true;\n\n        // If we have a match then apply the values.\n        if (pathMatches && metadataMatches) {\n          return _.defaults(acc, values);\n        }\n\n        return acc;\n      },\n      {}\n    );\n  }\n\n  /**\n   * Calculate both relative and absolute destination path for where to write\n   * the file.\n   * @private\n   */\n  _calculateDestination() {\n    let destinationUrl;\n\n    /**\n     * If the file itself wants to customize what its URL is then it will use\n     * the `config.file.url_key` value of the File's frontmatter as the basis\n     * for which the URL of this file should be.\n     * So if you have a File with a frontmatter that has `url: /pandas/` then\n     * the File's URL will be `/pandas/`.\n     * @type {string?} url Relative path to file.\n     */\n    const url = this.frontmatter[this._getConfig().get('file.url_key')];\n\n    if (url) {\n      // If the individual File defined its own unique URL that gets first\n      // dibs at setting the official URL for this file.\n      destinationUrl = url;\n    } else if (this.data.permalink) {\n      // If the file has no URL but has a permalink set on it then use it to\n      // find the URL of the File.\n      destinationUrl = Url.interpolatePermalink(\n        this.data.permalink,\n        this.data\n      );\n    } else {\n      // Path to file relative to root of project.\n      const pathRelative = this.path.replace(\n        this._getConfig().get('path.source'),\n        ''\n      );\n\n      // If the file has no URL set and no permalink then use its relative file\n      // path as its url.\n      destinationUrl = Url.replaceMarkdownExtension(\n        pathRelative,\n        this._getConfig().get('markdown.extensions')\n      );\n    }\n\n    const fileSystemSafeDestination = Url.makeUrlFileSystemSafe(destinationUrl);\n\n    this.destination = path.join(\n      this._getConfig().get('path.destination'),\n      fileSystemSafeDestination\n    );\n\n    this.data.url = Url.makePretty(fileSystemSafeDestination);\n  }\n\n  render(globalData) {\n    const template = this.data.template;\n\n    let result = this.data.content;\n\n    const templateData = {\n      ...globalData,\n      file: this.data,\n    };\n\n    try {\n      // Set result of content to result content.\n      result = renderTemplateString(\n        this.data.content,\n        templateData\n      );\n\n      // Set result to file's contents.\n      this.data.content = result;\n    } catch (e) {\n      log.error(e.message);\n      throw new Error('File: Could not render file\\'s contents.\\n' +\n        `File: ${JSON.stringify(this)}`);\n    }\n\n    // Convert to HTML.\n    // However if the File's frontmatter sets markdown value to false then\n    // skip the markdown conversion.\n    if (this.data.markdown !== false) {\n      result = renderMarkdown(this.data.content);\n      this.data.content = result;\n    }\n\n    if (\n      !_.isNil(template) &&\n      !(_.isString(template) && template.length === 0)\n    ) {\n      result = renderTemplate(template, templateData);\n    }\n\n    return result;\n  }\n\n  /**\n   * Renders the File with all plugins applied.\n   * @param {Object} globalData Site wide data.\n   * @return {Promise.<string>} Promise that resolves to rendered content.\n   */\n  async renderWithPlugins(globalData) {\n    const [, result] = await renderFileWithPlugins(\n      this,\n      globalData,\n      PluginEvents.file.beforeRender,\n      PluginEvents.file.afterRender\n    );\n\n    return result;\n  }\n\n  /**\n   * Writes a given File object to the file system.\n   * @param {Object} globalData Site wide data.\n   */\n  async write(globalData) {\n    // If this File is a static asset then we don't process it at all, and just\n    // copy it to its destination path.\n    // This typically applies to images and other similar files.\n    if (this.skipProcessing) {\n      await Promise.fromCallback(cb =>\n        fs.copy(this.path, this.destination, cb)\n      );\n      return;\n    }\n\n    // Don't write File if it is filtered.\n    if (this.filtered) {\n      return;\n    }\n\n    const content = await this.renderWithPlugins(globalData);\n\n    if (this._getConfig().get('incremental') &&\n        cache.get(this.path) === this.checksum) {\n      return;\n    }\n\n    await Promise.fromCallback((cb) => {\n      fs.outputFile(this.destination, content, 'utf8', cb);\n    });\n\n    // Save checksum to cache for incremental builds.\n    cache.put(this.path, this.checksum);\n  }\n}\n"
  },
  {
    "__docId__": 93,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "File",
    "memberof": "lib/file.js",
    "longname": "lib/file.js~File",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/file.js",
    "importStyle": "File",
    "description": null,
    "lineNumber": 23,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 94,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#constructor",
    "access": null,
    "description": null,
    "lineNumber": 24,
    "undocument": true,
    "params": [
      {
        "name": "filePath",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "",
        "defaultValue": ""
      },
      {
        "name": "getConfig",
        "optional": true,
        "types": [
          "*"
        ]
      }
    ],
    "generator": false
  },
  {
    "__docId__": 95,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "id",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#id",
    "access": null,
    "description": "Unique ID for this file. Right now an alias for the file's path.",
    "lineNumber": 29,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 96,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "path",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#path",
    "access": null,
    "description": "Absolute path to file location.",
    "lineNumber": 35,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 97,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "destination",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#destination",
    "access": null,
    "description": "Absolute destination path of where file should be written.",
    "lineNumber": 41,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 98,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "frontmatter",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#frontmatter",
    "access": null,
    "description": "Frontmatter for this file. Can be undefined if a file has no frontmatter.",
    "lineNumber": 47,
    "type": {
      "nullable": null,
      "types": [
        "object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 99,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "data",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#data",
    "access": null,
    "description": "Template accessible data.",
    "lineNumber": 53,
    "type": {
      "nullable": null,
      "types": [
        "Object.<string, Object>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 100,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "skipProcessing",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#skipProcessing",
    "access": null,
    "description": "Should we skip processing this file, ignoring templates and markdown\nconversion. This is generally only true for images and similar files.",
    "lineNumber": 60,
    "type": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 101,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "filtered",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#filtered",
    "access": null,
    "description": "If this File is filtered out of rendering. Filter settings are defined\nin the _config.yml file.",
    "lineNumber": 67,
    "type": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 102,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_getConfig",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#_getConfig",
    "access": "private",
    "description": "Get the global config object.",
    "lineNumber": 74,
    "type": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 103,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "update",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#update",
    "access": null,
    "description": "Update's File's data from the file system.",
    "lineNumber": 80,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 104,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "skipProcessing",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#skipProcessing",
    "access": null,
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 105,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "checksum",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#checksum",
    "access": null,
    "description": "Checksum hash of rawContent, for use in seeing if file is different.\n@example:\n '50de70409f11f87b430f248daaa94d67'",
    "lineNumber": 105,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 106,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "data",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#data",
    "access": null,
    "description": null,
    "lineNumber": 127,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 107,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "frontmatter",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#frontmatter",
    "access": null,
    "description": null,
    "lineNumber": 129,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 108,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "defaults",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#defaults",
    "access": null,
    "description": null,
    "lineNumber": 131,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 109,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "filtered",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#filtered",
    "access": null,
    "description": null,
    "lineNumber": 139,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 110,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_gatherDefaults",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#_gatherDefaults",
    "access": null,
    "description": "Gather default values that should be applied to this file.",
    "lineNumber": 158,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Default values applied to this file."
    },
    "generator": false
  },
  {
    "__docId__": 111,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_calculateDestination",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#_calculateDestination",
    "access": "private",
    "description": "Calculate both relative and absolute destination path for where to write\nthe file.",
    "lineNumber": 194,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 112,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "destination",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#destination",
    "access": null,
    "description": null,
    "lineNumber": 235,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 113,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "render",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#render",
    "access": null,
    "description": null,
    "lineNumber": 243,
    "undocument": true,
    "params": [
      {
        "name": "globalData",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 114,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "renderWithPlugins",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#renderWithPlugins",
    "access": null,
    "description": "Renders the File with all plugins applied.",
    "lineNumber": 291,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "globalData",
        "description": "Site wide data."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise.<string>"
      ],
      "spread": false,
      "description": "Promise that resolves to rendered content."
    },
    "generator": false
  },
  {
    "__docId__": 115,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "write",
    "memberof": "lib/file.js~File",
    "longname": "lib/file.js~File#write",
    "access": null,
    "description": "Writes a given File object to the file system.",
    "lineNumber": 306,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "globalData",
        "description": "Site wide data."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 116,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/filter/future-date.js",
    "memberof": null,
    "longname": "lib/filter/future-date.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "\n/**\n * Future date filter. Checks if a file's date occurs in the future.\n * @param {File} file File we're checking.\n * @param {Object} filterConfig Filter config object.\n * @return {boolean} If the File's date is in the future\n */\nexport default function futureDatesFilter(file, filterConfig = {}) {\n  const dateKey = filterConfig.key || 'date';\n  const fileDate = new Date(file.data[dateKey]).getTime();\n\n  // If the date is in the future we have a positive number.\n  return (fileDate - Date.now()) > 0;\n}\n"
  },
  {
    "__docId__": 117,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "futureDatesFilter",
    "memberof": "lib/filter/future-date.js",
    "longname": "lib/filter/future-date.js~futureDatesFilter",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/filter/future-date.js",
    "importStyle": "futureDatesFilter",
    "description": "Future date filter. Checks if a file's date occurs in the future.",
    "lineNumber": 8,
    "params": [
      {
        "nullable": null,
        "types": [
          "File"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": "File we're checking."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "filterConfig",
        "description": "Filter config object."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "If the File's date is in the future"
    },
    "generator": false
  },
  {
    "__docId__": 118,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/filter/index.js",
    "memberof": null,
    "longname": "lib/filter/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import _ from 'lodash';\nimport metadata from './metadata';\nimport future_date from './future-date';\n\nconst filters = {\n  metadata,\n  future_date,\n};\n\nexport default {\n  /**\n   * Whether a File is filtered by the applied filters.\n   * @param {Object} appliedFilters Filters to apply to File.\n   * @param {File} file File object.\n   * @return {boolean} True if this file is filtered.\n   */\n  isFileFiltered(appliedFilters, file) {\n    if (_.isEmpty(appliedFilters)) {\n      return false;\n    }\n\n    return _.some(appliedFilters, (filterConfig, filterName) =>\n      filters[filterName](file, filterConfig)\n    );\n  },\n};\n"
  },
  {
    "__docId__": 119,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "filters",
    "memberof": "lib/filter/index.js",
    "longname": "lib/filter/index.js~filters",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/filter/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 120,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/filter/metadata.js",
    "memberof": null,
    "longname": "lib/filter/metadata.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import _ from 'lodash';\n\n/**\n * Metadata filter. Checks if a file.data object matches all the configured\n * filter options.\n * @example\n * let filterConfig = {\n *   draft: true\n * };\n * file.data = {\n *   title: 'foo',\n *   draft: true\n * };\n * metadataFilter(filterConfig, file); // true\n * @param {File} file File we're checking.\n * @param {Object} filterConfig Filter config object.\n * @return {boolean} If the File matches the filterConfig object.\n */\nexport default function metadataFilter(file, filterConfig) {\n  return _.isMatch(file.data, filterConfig);\n}\n"
  },
  {
    "__docId__": 121,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "metadataFilter",
    "memberof": "lib/filter/metadata.js",
    "longname": "lib/filter/metadata.js~metadataFilter",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/filter/metadata.js",
    "importStyle": "metadataFilter",
    "description": "Metadata filter. Checks if a file.data object matches all the configured\nfilter options.",
    "examples": [
      "let filterConfig = {\n  draft: true\n};\nfile.data = {\n  title: 'foo',\n  draft: true\n};\nmetadataFilter(filterConfig, file); // true"
    ],
    "lineNumber": 19,
    "params": [
      {
        "nullable": null,
        "types": [
          "File"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": "File we're checking."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "filterConfig",
        "description": "Filter config object."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "If the File matches the filterConfig object."
    },
    "generator": false
  },
  {
    "__docId__": 122,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/index.js",
    "memberof": null,
    "longname": "lib/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import Promise from 'bluebird';\nimport _ from 'lodash';\nimport fp from 'lodash/fp';\nimport moment from 'moment';\nimport path from 'path';\nimport rimraf from 'rimraf';\nimport glob from 'glob';\nimport ora from 'ora';\nimport cache from './cache';\nimport * as CONSTANTS from './constants';\nimport createChecksum from './checksum';\nimport Config from './config';\nimport log from './log';\nimport Url from './url';\nimport DataFiles from './data-files';\nimport {\n  configureTemplateEngine,\n} from './template';\nimport {\n  createMarkdownEngine,\n} from './markdown';\nimport Plugin from './plugin';\nimport Theme from './theme';\nimport {\n  createCollection,\n} from './collection';\nimport File from './file';\n\n/**\n * Helper function to wrap commands with a log.startActivity command so we can\n * see how long a command takes.\n * @param {string} label A label to use for this command.\n * @param {Function} cmd A function to run as the command.\n */\nasync function wrapCommand(label, cmd) {\n  const startTime = Date.now();\n  const spinner = ora({\n    text: label,\n    spinner: 'dot4',\n  }).start();\n\n  try {\n    await cmd();\n    spinner.text = `${label} (${Date.now() - startTime}ms)`;\n    spinner.succeed();\n  } catch (e) {\n    spinner.fail();\n    throw e;\n  }\n}\n\nexport default class Reptar {\n  /**\n   * Create a new Reptar instance.\n   * @param {Object} options Options object.\n   * @param {string} options.rootPath Where the root path of this Reptar\n   *   instance points to.\n   * @param {boolean} options.incremental If we should incremental build files.\n   * @param {boolean} options.noTemplateCache Should templates be cached.\n   *   Typically this is only off when developing or in watch mode.\n   */\n  constructor(options = {}) {\n    /**\n     * Expose config object on instance.\n     * @type {Config}\n     */\n    this.config = new Config(options.rootPath);\n\n    /**\n     * Returns our config instance.\n     * @return {Object}\n     */\n    this.getConfig = () => this.config;\n\n    /**\n     * Save options passed into instance.\n     * @type {Object}\n     */\n    this.options = _.defaults(options, {\n      noTemplateCache: false,\n      clean: false,\n    });\n\n    /**\n     * All files found in our source path.\n     * Key is the full path to the file, value is the actual File object.\n     * @type {Object.<string, File>}\n     */\n    this.files = Object.create(null);\n\n    /**\n     * Site wide data available in all templates.\n     * @type {Object.<string, Object>}\n     */\n    this.data = Object.create(null);\n\n    /**\n     * Mapping of Collection IDs to the instance.\n     * @type {Object.<string, Collection>}\n     */\n    this.collections = Object.create(null);\n\n    /**\n     * Class responsible for handling themes.\n     * @type {Theme}\n     */\n    this.theme = new Theme();\n    this.theme.setGetConfig(this.getConfig);\n\n    /**\n     * Expose collections.\n     * @type {Object}\n     */\n    this.data.collections = Object.create(null);\n  }\n\n  async update() {\n    this.config.update();\n\n    const { base, dir } = path.parse(this.config.root);\n    cache.setNamespace(`${base}-${createChecksum(dir).slice(0, 10)}`);\n\n    // Options passed into constructor take precedence over the config value.\n    // We default to loading cache, unless explicitly set to false.\n    const shouldLoadCache = !_.isNil(this.options.incremental) ?\n      this.options.incremental !== false :\n      this.config.get('incremental') !== false;\n    if (shouldLoadCache) {\n      cache.load();\n    }\n\n    Url.setSlugOptions(this.config.get('slug'));\n\n    this.theme.update();\n\n    // Configure template engine.\n    configureTemplateEngine({\n      config: this.config,\n      paths: this.theme.config.path.templates,\n      noCache: this.options.noTemplateCache,\n    });\n\n    // Create markdown engine.\n    createMarkdownEngine(this.config.get('markdown.options'));\n\n    /**\n     * Expose site data from config file.\n     * @type {Object}\n     */\n    this.data.site = this.config.get('site');\n\n    // Load data files.\n    const dataFiles = await DataFiles.update(this.config.get('path.data'));\n\n    // Expose it on the site object.\n    this.data.site.data = dataFiles;\n\n    // Update our collection configs.\n    _.map(\n      this.config.get('collections'),\n      (collectionConfig, collectionName) => {\n        const instance = createCollection(\n          collectionName,\n          collectionConfig,\n          this.getConfig\n        );\n\n        this.collections[instance.id] = instance;\n      }\n    );\n\n    // Read theme files, processing any files that it needs to so that we get\n    // the final path to the ready to write files.\n    await wrapCommand(\n      'Reading theme files.\\t\\t',\n      async () => {\n        await this.theme.read();\n        // Expose theme data globally.\n        this.data.theme = this.theme.data;\n      }\n    );\n\n    await wrapCommand(\n      'Loading plugins.\\t\\t',\n      () => {\n        // Built-in plugins.\n        Plugin.loadFromPackageJson(\n          Url.pathFromRoot('./'),\n          this.config.get('plugins')\n        );\n        [\n          this.theme.config.path.plugins, // Active theme plug-ins\n          this.config.get('path.plugins'), // Site plug-ins\n        ].forEach(pluginPath => Plugin.loadFromDirectory(pluginPath));\n      }\n    );\n\n    await wrapCommand(\n      'Reading files.\\t\\t',\n      this.readFiles.bind(this)\n    );\n\n    await wrapCommand(\n      'Reading collections.\\t\\t',\n      this.readCollections.bind(this)\n    );\n  }\n\n  async readFiles() {\n    const configPathSource = this.config.get('path.source');\n\n    // Create an array of patterns that we should ignore when reading the source\n    // files of the Reptar site from disk.\n    // This primarily includes the '_config.yml' file as well as every path\n    // directory that isn't our source path, primarily '_site', '_plugins',\n    // and '_themes'.\n    const ignorePatterns = _.values(CONSTANTS.YAML).concat(\n      _.values(this.config.get('path')).filter(pathVal =>\n        pathVal !== configPathSource\n      )\n    );\n\n    // Ignore package.json file as well.\n    ignorePatterns.push('package.json');\n\n    // Read all files from disk and get their file paths.\n    const files = await Promise.fromCallback((cb) => {\n      glob(`${configPathSource}/**/*`, {\n        // Do not match directories, only files.\n        nodir: true,\n        // Array of glob patterns to exclude from matching.\n        ignore: ignorePatterns.map(ignorePath => `**/${ignorePath}/**`).concat(\n          `${configPathSource}/node_modules/**`\n        ),\n        // Follow symlinks.\n        follow: true,\n      }, cb);\n    });\n\n    const filePromises = files.map((rawPath) => {\n      // Correct the filePath created by glob to be compatible with Windows.\n      // Known issue in node-glob https://github.com/isaacs/node-glob/pull/263.\n      const filePath = path.normalize(rawPath.replace(/\\//g, path.sep));\n\n      const sourceFile = new File(filePath, this.getConfig);\n      this.files[sourceFile.id] = sourceFile;\n\n      return sourceFile.update();\n    });\n\n    return Promise.all(filePromises);\n  }\n\n  readCollections() {\n    // Populate every collection with its files.\n    _.each(this.collections, (collection) => {\n      collection.populate(this.files, this.collections);\n\n      // Add collection data to our global data object.\n      this.data.collections[collection.name] = collection.data;\n    });\n  }\n\n  /**\n   * Removes configured destination directory and all files contained.\n   * @return {Promise} Promise object.\n   */\n  cleanDestination() {\n    return wrapCommand(\n      'Cleaning destination.\\t\\t',\n      async () => {\n        await Promise.fromCallback((cb) => {\n          rimraf(this.config.get('path.destination'), cb);\n        });\n\n        // Clear cache.\n        cache.clear();\n      }\n    );\n  }\n\n  /**\n   * Builds the Reptar site in its entirety.\n   */\n  async build() {\n    if (this.config.get('clean_destination') || this.options.clean) {\n      await this.cleanDestination();\n    }\n\n    // Collect all Files and CollectionPages\n    const allFiles = _.concat(\n      _.values(this.files),\n      _.flatMap(this.collections, 'pages')\n    );\n\n    // See if any two objects have the same destination path.\n    const destinationCollisions = _.flow(\n      fp.groupBy('destination'),\n      fp.pickBy(val => val.length > 1)\n    )(allFiles);\n\n    // Show a warning for any collisions detected.\n    _.forEach(destinationCollisions, (files, dest) => {\n      log.warn(\n        `Destination collision detected at ${dest}\\n` +\n        `\\t Source files:\\n\\t\\t${files.map(f => f.id).join('\\n\\t\\t')}`\n      );\n    });\n\n    this.data.reptar = Reptar.getReptarData();\n\n    // Writes Theme files and assets to file system.\n    await wrapCommand(\n      'Writing theme files.\\t\\t',\n      this.theme.write.bind(this.theme)\n    );\n\n    await wrapCommand(\n      'Writing files.\\t\\t',\n      () =>\n        Promise.all(\n          _.map(this.files, file => file.write(this.data))\n        )\n    );\n\n    await wrapCommand(\n      'Writing collection pages.\\t',\n      () =>\n        Promise.all(\n          _.map(this.collections, collection => collection.write(this.data))\n        )\n    );\n  }\n\n  /**\n   * Get information about the Reptar installation from its package.json.\n   * @return {Object}\n   */\n  static getReptarData() {\n    let packageJson = {};\n    try {\n      // eslint-disable-next-line\n      packageJson = require(Url.pathFromRoot('./package.json'));\n    } catch (e) { /* swallow */ }\n\n    return {\n      version: packageJson.version,\n      time: moment((new Date()).getTime()).format(),\n    };\n  }\n}\n"
  },
  {
    "__docId__": 123,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "wrapCommand",
    "memberof": "lib/index.js",
    "longname": "lib/index.js~wrapCommand",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/index.js",
    "importStyle": null,
    "description": "Helper function to wrap commands with a log.startActivity command so we can\nsee how long a command takes.",
    "lineNumber": 35,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "label",
        "description": "A label to use for this command."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "cmd",
        "description": "A function to run as the command."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 124,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Reptar",
    "memberof": "lib/index.js",
    "longname": "lib/index.js~Reptar",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/index.js",
    "importStyle": "Reptar",
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 125,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#constructor",
    "access": null,
    "description": "Create a new Reptar instance.",
    "lineNumber": 62,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Options object."
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "options.rootPath",
        "description": "Where the root path of this Reptar\n  instance points to."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "options.incremental",
        "description": "If we should incremental build files."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "options.noTemplateCache",
        "description": "Should templates be cached.\n  Typically this is only off when developing or in watch mode."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 126,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "config",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#config",
    "access": null,
    "description": "Expose config object on instance.",
    "lineNumber": 67,
    "type": {
      "nullable": null,
      "types": [
        "Config"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 127,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "getConfig",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#getConfig",
    "access": null,
    "description": "Returns our config instance.",
    "lineNumber": 73,
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 128,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "options",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#options",
    "access": null,
    "description": "Save options passed into instance.",
    "lineNumber": 79,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 129,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "files",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#files",
    "access": null,
    "description": "All files found in our source path.\nKey is the full path to the file, value is the actual File object.",
    "lineNumber": 89,
    "type": {
      "nullable": null,
      "types": [
        "Object.<string, File>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 130,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "data",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#data",
    "access": null,
    "description": "Site wide data available in all templates.",
    "lineNumber": 95,
    "type": {
      "nullable": null,
      "types": [
        "Object.<string, Object>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 131,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "collections",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#collections",
    "access": null,
    "description": "Mapping of Collection IDs to the instance.",
    "lineNumber": 101,
    "type": {
      "nullable": null,
      "types": [
        "Object.<string, Collection>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 132,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "theme",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#theme",
    "access": null,
    "description": "Class responsible for handling themes.",
    "lineNumber": 107,
    "type": {
      "nullable": null,
      "types": [
        "Theme"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 133,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "update",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#update",
    "access": null,
    "description": null,
    "lineNumber": 117,
    "undocument": true,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 134,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "readFiles",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#readFiles",
    "access": null,
    "description": null,
    "lineNumber": 209,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 135,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "readCollections",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#readCollections",
    "access": null,
    "description": null,
    "lineNumber": 254,
    "undocument": true,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 136,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "cleanDestination",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#cleanDestination",
    "access": null,
    "description": "Removes configured destination directory and all files contained.",
    "lineNumber": 268,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": "Promise object."
    },
    "generator": false
  },
  {
    "__docId__": 137,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "build",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar#build",
    "access": null,
    "description": "Builds the Reptar site in its entirety.",
    "lineNumber": 285,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 138,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "getReptarData",
    "memberof": "lib/index.js~Reptar",
    "longname": "lib/index.js~Reptar.getReptarData",
    "access": null,
    "description": "Get information about the Reptar installation from its package.json.",
    "lineNumber": 339,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "__docId__": 139,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/json.js",
    "memberof": null,
    "longname": "lib/json.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import path from 'path';\nimport fs from 'fs-extra';\nimport _ from 'lodash';\n\nconst packageJson = 'package.json';\n\nconst packageKeys = [\n  'dependencies',\n  'devDependencies',\n  'peerDependencies',\n];\n\n/**\n * RegExp used to find Reptar packages.\n * @type {RegExp}\n */\nexport const packageNameRegex = /^reptar-/;\n\n/**\n * Looks at a package.json file and retrieves all module names that pass our\n * packageNameRegex, effectively all packages that start with `reptar-`.\n * @param {string} directory Directory to look for a package.json file.\n * @return {Array} Array of package names found.\n */\nexport function getReptarPackageNames(directory = '') {\n  const packagePath = path.join(directory, packageJson);\n\n  let json;\n  try {\n    json = fs.readJsonSync(packagePath);\n  } catch (e) { /* swallow */ }\n\n  const moduleNames = [];\n\n  if (!json) {\n    return moduleNames;\n  }\n\n  packageKeys.forEach((packageKey) => {\n    _.each(json[packageKey], (version, name) => {\n      // Only include a Reptar package extension once.\n      if (packageNameRegex.test(name) && !moduleNames.includes(name)) {\n        moduleNames.push(name);\n      }\n    });\n  });\n\n  return moduleNames;\n}\n"
  },
  {
    "__docId__": 140,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "packageJson",
    "memberof": "lib/json.js",
    "longname": "lib/json.js~packageJson",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/json.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 141,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "packageKeys",
    "memberof": "lib/json.js",
    "longname": "lib/json.js~packageKeys",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/json.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 142,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "packageNameRegex",
    "memberof": "lib/json.js",
    "longname": "lib/json.js~packageNameRegex",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/json.js",
    "importStyle": "{packageNameRegex}",
    "description": "RegExp used to find Reptar packages.",
    "lineNumber": 17,
    "type": {
      "nullable": null,
      "types": [
        "RegExp"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 143,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "getReptarPackageNames",
    "memberof": "lib/json.js",
    "longname": "lib/json.js~getReptarPackageNames",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/json.js",
    "importStyle": "{getReptarPackageNames}",
    "description": "Looks at a package.json file and retrieves all module names that pass our\npackageNameRegex, effectively all packages that start with `reptar-`.",
    "lineNumber": 25,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "directory",
        "description": "Directory to look for a package.json file."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": "Array of package names found."
    },
    "generator": false
  },
  {
    "__docId__": 144,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/log.js",
    "memberof": null,
    "longname": "lib/log.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "/* eslint-disable no-console */\nimport chalk from 'chalk';\nimport activity from 'activity-logger';\n\nlet verboseMode = true;\nlet isSilent = false;\n\nexport default {\n  setLogLevel(logLevel) {\n    verboseMode = logLevel === 'verbose';\n  },\n\n  setSilent(newSilent = false) {\n    isSilent = newSilent;\n  },\n\n  info(...args) {\n    const prefix = `${chalk.green('info')}:\\t`;\n    args.unshift(prefix);\n    console.log(...args);\n  },\n\n  warn(...args) {\n    if (!verboseMode) {\n      return;\n    }\n    const prefix = `${chalk.yellow('warn')}:\\t`;\n    args.unshift(prefix);\n    console.log(...args);\n  },\n\n  error(...args) {\n    const prefix = `${chalk.red('error')}:\\t`;\n    args.unshift(prefix);\n    console.log(...args);\n  },\n\n  startActivity(name) {\n    if (isSilent) {\n      return -1;\n    }\n    return activity.start(name);\n  },\n\n  endActivity(id) {\n    if (isSilent) {\n      return true;\n    }\n    return activity.end(id);\n  },\n};\n"
  },
  {
    "__docId__": 145,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "verboseMode",
    "memberof": "lib/log.js",
    "longname": "lib/log.js~verboseMode",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/log.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 146,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "isSilent",
    "memberof": "lib/log.js",
    "longname": "lib/log.js~isSilent",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/log.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 147,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/markdown.js",
    "memberof": null,
    "longname": "lib/markdown.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "/**\n * Methods for interacting with our Markdown engine.\n * Supports rendering Markdown text and configure the engine.\n */\nimport MarkdownIt from 'markdown-it';\nimport prism from 'markdown-it-prism';\nimport highlightjs from 'highlight.js';\n\nlet md;\n\n/**\n * Default options used for Markdown engine.\n * @type {Object}\n */\nconst DEFAULT_OPTIONS = {\n  highlight(str, lang) {\n    if (lang && highlightjs.getLanguage(lang)) {\n      try {\n        return highlightjs.highlight(lang, str).value;\n      } catch (e) { /* noop */ }\n    }\n\n    try {\n      return highlightjs.highlightAuto(str).value;\n    } catch (e) { /* noop */ }\n\n    // use external default escaping\n    return '';\n  },\n};\n\n/**\n * Render a piece of string from Markdown to HTML.\n * @param {string} str String to parse.\n * @return {string} Parsed Markdown.\n */\nexport function renderMarkdown(str = '') {\n  return md.render(str);\n}\n\n/**\n * Create our Markdown engine.\n * @param {Object} options Configuration object.\n */\nexport function createMarkdownEngine(options = { preset: 'commonmark' }) {\n  // If highlight is set to true then attach the highlight function handler.\n  if (options.highlight === true || options.highlight === 'highlightjs') {\n    options.highlight = DEFAULT_OPTIONS.highlight;\n  }\n\n  // Create markdown instance.\n  md = new MarkdownIt(options.preset, {\n    ...options,\n  });\n\n  if (options.highlight === 'prism') {\n    md.use(prism);\n  }\n}\n\n/**\n * Returns markdown engine instance.\n * @return {Object}\n */\nexport function getMarkdownEngine() {\n  return md;\n}\n"
  },
  {
    "__docId__": 148,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "DEFAULT_OPTIONS",
    "memberof": "lib/markdown.js",
    "longname": "lib/markdown.js~DEFAULT_OPTIONS",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/markdown.js",
    "importStyle": null,
    "description": "Default options used for Markdown engine.",
    "lineNumber": 15,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 149,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "renderMarkdown",
    "memberof": "lib/markdown.js",
    "longname": "lib/markdown.js~renderMarkdown",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/markdown.js",
    "importStyle": "{renderMarkdown}",
    "description": "Render a piece of string from Markdown to HTML.",
    "lineNumber": 37,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "str",
        "description": "String to parse."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Parsed Markdown."
    },
    "generator": false
  },
  {
    "__docId__": 150,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "createMarkdownEngine",
    "memberof": "lib/markdown.js",
    "longname": "lib/markdown.js~createMarkdownEngine",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/markdown.js",
    "importStyle": "{createMarkdownEngine}",
    "description": "Create our Markdown engine.",
    "lineNumber": 45,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Configuration object."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 151,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "getMarkdownEngine",
    "memberof": "lib/markdown.js",
    "longname": "lib/markdown.js~getMarkdownEngine",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/markdown.js",
    "importStyle": "{getMarkdownEngine}",
    "description": "Returns markdown engine instance.",
    "lineNumber": 65,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "__docId__": 152,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/parse/front-matter.js",
    "memberof": null,
    "longname": "lib/parse/front-matter.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "/**\n * Interface to gray-matter for parsing files with YAML frontmatter.\n */\nimport Promise from 'bluebird';\nimport fs from 'fs';\nimport matter from 'gray-matter';\nimport jsYaml from 'js-yaml';\n\n/**\n * The frontmatter delimiter character.\n * @type {string}\n */\nconst FRONTMATTER_DELIMITER = '-';\n\nconst frontMatterOptions = {\n  parser: jsYaml.safeLoad,\n};\n\n/**\n * Parse a file with front matter.\n * @param {string} str String to parse.\n * @param {Object} options Additional options.\n * @return {JSON} JSON object.\n */\nexport function parse(str = '', options = {}) {\n  return matter(str, Object.assign({}, frontMatterOptions, options));\n}\n\n/**\n * Stringify a document.\n * @param  {string} str Content to append to YAML.\n * @param  {Object} data Data to convert to YAML and prepend to document.\n * @return {string} Content with prepended YAML data.\n */\nexport function stringify(str = '', data = {}) {\n  return matter.stringify(str, data);\n}\n\n/**\n * This is a fast way to check if a file has frontmatter without reading all of\n * its contents into memory.\n * @param {string} filePath Path to file on the file system.\n * @return {Promise.<boolean>} Promise which resolves to true if the file has\n *   frontmatter.\n */\nexport function fileHasFrontmatter(filePath) {\n  return new Promise((resolve, reject) => {\n    let chunks = '';\n    fs\n      .createReadStream(filePath, {\n        encoding: 'utf8',\n        start: 0,\n        // Only read the first 3 characters from the file, as those are the ones\n        // which must match frontmatter delimiter.\n        end: 2,\n      })\n      .on('data', (chunk) => { chunks += chunk; })\n      .on('close', () => {\n        for (const char of chunks) {\n          // If one character doesn't match then this file doesn't have\n          // frontmatter.\n          if (char !== FRONTMATTER_DELIMITER) {\n            resolve(false);\n            return;\n          }\n        }\n\n        // If every character matches then this file has frontmatter.\n        resolve(true);\n      })\n      .on('error', reject);\n  });\n}\n"
  },
  {
    "__docId__": 153,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "FRONTMATTER_DELIMITER",
    "memberof": "lib/parse/front-matter.js",
    "longname": "lib/parse/front-matter.js~FRONTMATTER_DELIMITER",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/parse/front-matter.js",
    "importStyle": null,
    "description": "The frontmatter delimiter character.",
    "lineNumber": 13,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 154,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "frontMatterOptions",
    "memberof": "lib/parse/front-matter.js",
    "longname": "lib/parse/front-matter.js~frontMatterOptions",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/parse/front-matter.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 155,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "parse",
    "memberof": "lib/parse/front-matter.js",
    "longname": "lib/parse/front-matter.js~parse",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/parse/front-matter.js",
    "importStyle": "{parse}",
    "description": "Parse a file with front matter.",
    "lineNumber": 25,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "str",
        "description": "String to parse."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Additional options."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "JSON"
      ],
      "spread": false,
      "description": "JSON object."
    },
    "generator": false
  },
  {
    "__docId__": 156,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "stringify",
    "memberof": "lib/parse/front-matter.js",
    "longname": "lib/parse/front-matter.js~stringify",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/parse/front-matter.js",
    "importStyle": "{stringify}",
    "description": "Stringify a document.",
    "lineNumber": 35,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "str",
        "description": "Content to append to YAML."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "data",
        "description": "Data to convert to YAML and prepend to document."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Content with prepended YAML data."
    },
    "generator": false
  },
  {
    "__docId__": 157,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "fileHasFrontmatter",
    "memberof": "lib/parse/front-matter.js",
    "longname": "lib/parse/front-matter.js~fileHasFrontmatter",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/parse/front-matter.js",
    "importStyle": "{fileHasFrontmatter}",
    "description": "This is a fast way to check if a file has frontmatter without reading all of\nits contents into memory.",
    "lineNumber": 46,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "filePath",
        "description": "Path to file on the file system."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise.<boolean>"
      ],
      "spread": false,
      "description": "Promise which resolves to true if the file has\n  frontmatter."
    },
    "generator": false
  },
  {
    "__docId__": 158,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/parse/index.js",
    "memberof": null,
    "longname": "lib/parse/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import fs from 'fs';\nimport path from 'path';\nimport {\n  parse as fromFrontMatter,\n  stringify as toFrontMatter,\n  fileHasFrontmatter,\n} from './front-matter';\n\nimport {\n  parse as fromYaml,\n  stringify as toYaml,\n} from './yaml';\n\n// Supported extension parsers.\nconst ExtensionParser = {\n  json(filePath) {\n    const content = fs.readFileSync(filePath, 'utf8');\n    return JSON.parse(content);\n  },\n  yaml(filePath) {\n    const content = fs.readFileSync(filePath, 'utf8');\n    return fromYaml(content);\n  },\n};\n// Alias yml to yaml.\nExtensionParser.yml = ExtensionParser.yaml;\n\nexport default {\n  fromFrontMatter,\n  toFrontMatter,\n  fileHasFrontmatter,\n\n  fromYaml,\n  toYaml,\n\n  /**\n   * Intelligently parses a file and returns a JS object. It checks the\n   * extension and uses the correct mechanism for parsing the file.\n   * @param {string} filePath Full path to file.\n   * @return {Object} POJO.\n   */\n  smartLoadAndParse(filePath) {\n    const extension = path.extname(filePath).replace('.', '');\n    const parser = ExtensionParser[extension];\n    if (parser == null) {\n      return {};\n    }\n    return parser(filePath);\n  },\n};\n"
  },
  {
    "__docId__": 159,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "ExtensionParser",
    "memberof": "lib/parse/index.js",
    "longname": "lib/parse/index.js~ExtensionParser",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/parse/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 160,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/parse/yaml.js",
    "memberof": null,
    "longname": "lib/parse/yaml.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "/**\n * YAML operations, parse or stringify.\n */\nimport jsYaml from 'js-yaml';\n\n/**\n * Parse a YAML string into an object.\n * @param {string} str String containing YAML information.\n * @return {Object} Parsed YAML object.\n */\nexport function parse(str) {\n  return jsYaml.safeLoad(str);\n}\n\n/**\n * Stringify an object to a YAML string.\n * @param {Object} obj JavaScript object.\n * @return {string} YAML document.\n */\nexport function stringify(obj) {\n  return jsYaml.safeDump(obj);\n}\n"
  },
  {
    "__docId__": 161,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "parse",
    "memberof": "lib/parse/yaml.js",
    "longname": "lib/parse/yaml.js~parse",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/parse/yaml.js",
    "importStyle": "{parse}",
    "description": "Parse a YAML string into an object.",
    "lineNumber": 11,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "str",
        "description": "String containing YAML information."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Parsed YAML object."
    },
    "generator": false
  },
  {
    "__docId__": 162,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "stringify",
    "memberof": "lib/parse/yaml.js",
    "longname": "lib/parse/yaml.js~stringify",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/parse/yaml.js",
    "importStyle": "{stringify}",
    "description": "Stringify an object to a YAML string.",
    "lineNumber": 20,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "obj",
        "description": "JavaScript object."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "YAML document."
    },
    "generator": false
  },
  {
    "__docId__": 163,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/plugin/api.js",
    "memberof": null,
    "longname": "lib/plugin/api.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import _ from 'lodash';\nimport { addTemplateFilter } from '../template';\nimport { getMarkdownEngine } from '../markdown';\nimport Events from './events';\n\n/**\n * Create the public plugin API.\n * @param {Function} options.addEventHandler Handler for events.\n * @return {Object} Public API.\n */\nexport default function createPluginApi({\n  addEventHandler = _.noop,\n} = {}) {\n  return {\n    // Expose utility merge function.\n    merge: _.merge,\n\n    template: {\n      addFilter: addTemplateFilter,\n    },\n\n    markdown: {\n      /**\n       * Usage:\n       * Plugin.markdown.configure(function(md) {\n       *   // md is the markdown-it engine instance.\n       *   // You can do whatever you want with it.\n       *   md.use(mdExtension)\n       * });\n       * @param {Function} cb Given markdown engine instance.\n       * @return {void}\n       */\n      configure: cb => cb(getMarkdownEngine()),\n    },\n\n    // Creates a public API which you can use to easily add event handlers.\n    event: _.reduce(Events, (api, categoryEvents, eventCategory) => {\n      api[eventCategory] = {};\n\n      _.forEach(categoryEvents, (eventKey, eventName) => {\n        api[eventCategory][eventName] = (callback) => {\n          addEventHandler(eventKey, callback);\n        };\n      });\n\n      return api;\n    }, {}),\n  };\n}\n"
  },
  {
    "__docId__": 164,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "createPluginApi",
    "memberof": "lib/plugin/api.js",
    "longname": "lib/plugin/api.js~createPluginApi",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/plugin/api.js",
    "importStyle": "createPluginApi",
    "description": "Create the public plugin API.",
    "lineNumber": 11,
    "params": [
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "options.addEventHandler",
        "description": "Handler for events."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Public API."
    },
    "generator": false
  },
  {
    "__docId__": 165,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/plugin/event-handler.js",
    "memberof": null,
    "longname": "lib/plugin/event-handler.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import _ from 'lodash';\n\nexport default class EventHandler {\n  _handlers = {};\n\n  _reset() {\n    this._handlers = {};\n  }\n\n  _getHandlers(eventName) {\n    this._handlers[eventName] = this._handlers[eventName] || [];\n    return this._handlers[eventName];\n  }\n\n  addEventHandler(eventName, handler) {\n    this._getHandlers(eventName).push(handler);\n  }\n\n  /**\n   * Processes our queue of event handlers for a given eventName.\n   * If a handler returns 'undefined' then we give the next handler\n   * the original arguments so that every handler gets to touch the\n   * data.\n   * @param {string} eventName Event key where the handlers live.\n   * @param {*} args Arguments.\n   * @return {Promise} Promise that resolves to the ending value of the\n   *   promise chain.\n   */\n  async processEventHandlers(eventName, ...args) {\n    const handlers = this._getHandlers(eventName);\n\n    let processedValue = args;\n    // eslint-disable-next-line no-plusplus\n    for (let i = 0; i < handlers.length; i++) {\n      const handler = handlers[i];\n      let newVal;\n\n      // We need the returned value so we can give it to the next event handler.\n      // Effectively a waterfall.\n      // eslint-disable-next-line no-await-in-loop\n      newVal = await handler(...processedValue);\n\n      // We allow a plugin to return undefined or null to implicitly\n      // allow us to use the original value that was passed into the\n      // plugin handler.\n      if (_.isUndefined(newVal) || newVal === null) {\n        newVal = processedValue;\n      }\n\n      // If our original value was an array of 1 and is now not an\n      // array because a plugin just returned the value stick it back\n      // into an array to keep its type consistent.\n      if (processedValue.length === 1 && !Array.isArray(newVal)) {\n        newVal = [newVal];\n      }\n\n      if (newVal.length !== processedValue.length) {\n        throw new Error(`Plugin handler for '${eventName}' did not` +\n          ' return all arguments given to it.');\n      } else {\n        // eslint-disable-next-line no-loop-func\n        const allTypesMatch = newVal.every((val, index) =>\n           typeof val === typeof processedValue[index]\n        );\n\n        if (!allTypesMatch) {\n          throw new Error(`Plugin handler for '${eventName}' did not` +\n            ' return all arguments in given order.');\n        }\n      }\n\n      processedValue = newVal;\n    }\n\n    // If we have only one value then unpack it.\n    return processedValue.length === 1 ?\n      processedValue[0] :\n      processedValue;\n  }\n}\n"
  },
  {
    "__docId__": 166,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "EventHandler",
    "memberof": "lib/plugin/event-handler.js",
    "longname": "lib/plugin/event-handler.js~EventHandler",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/plugin/event-handler.js",
    "importStyle": "EventHandler",
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 167,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_reset",
    "memberof": "lib/plugin/event-handler.js~EventHandler",
    "longname": "lib/plugin/event-handler.js~EventHandler#_reset",
    "access": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 168,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_handlers",
    "memberof": "lib/plugin/event-handler.js~EventHandler",
    "longname": "lib/plugin/event-handler.js~EventHandler#_handlers",
    "access": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 169,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getHandlers",
    "memberof": "lib/plugin/event-handler.js~EventHandler",
    "longname": "lib/plugin/event-handler.js~EventHandler#_getHandlers",
    "access": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "params": [
      {
        "name": "eventName",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 170,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "addEventHandler",
    "memberof": "lib/plugin/event-handler.js~EventHandler",
    "longname": "lib/plugin/event-handler.js~EventHandler#addEventHandler",
    "access": null,
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "params": [
      {
        "name": "eventName",
        "types": [
          "*"
        ]
      },
      {
        "name": "handler",
        "types": [
          "*"
        ]
      }
    ],
    "generator": false
  },
  {
    "__docId__": 171,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "processEventHandlers",
    "memberof": "lib/plugin/event-handler.js~EventHandler",
    "longname": "lib/plugin/event-handler.js~EventHandler#processEventHandlers",
    "access": null,
    "description": "Processes our queue of event handlers for a given eventName.\nIf a handler returns 'undefined' then we give the next handler\nthe original arguments so that every handler gets to touch the\ndata.",
    "lineNumber": 29,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "eventName",
        "description": "Event key where the handlers live."
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "args",
        "description": "Arguments."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": "Promise that resolves to the ending value of the\n  promise chain."
    },
    "generator": false
  },
  {
    "__docId__": 172,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/plugin/events.js",
    "memberof": null,
    "longname": "lib/plugin/events.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "/**\n * These are the Events supported by plugins.\n * @type {Object}\n */\nconst PluginEvents = {\n  file: {\n    beforeRender: 'file:beforeRender',\n    afterRender: 'file:afterRender',\n  },\n\n  page: {\n    beforeRender: 'page:beforeRender',\n    afterRender: 'page:afterRender',\n  },\n};\n\nexport default PluginEvents;\n"
  },
  {
    "__docId__": 173,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "PluginEvents",
    "memberof": "lib/plugin/events.js",
    "longname": "lib/plugin/events.js~PluginEvents",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/plugin/events.js",
    "importStyle": "PluginEvents",
    "description": "These are the Events supported by plugins.",
    "lineNumber": 5,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 174,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/plugin/index.js",
    "memberof": null,
    "longname": "lib/plugin/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import glob from 'glob';\nimport _ from 'lodash';\n\nimport { packageNameRegex, getReptarPackageNames } from '../json';\nimport EventHandler from './event-handler';\nimport createPluginApi from './api';\n\nclass Plugin {\n  static loadFromPackageJson(directory = '', pluginConfigs) {\n    getReptarPackageNames(directory).forEach((name) => {\n      const configName = name.replace(packageNameRegex, '');\n      const pluginConfig = pluginConfigs[configName];\n\n      if (_.get(pluginConfig, 'enabled')) {\n        Plugin.loadPlugin(name, pluginConfig.options);\n      }\n    });\n  }\n\n  /**\n   * Load all .js files from a directory and load them as a plugin.\n   * @param {string} directory Path to directory where plugin files exist.\n   */\n  static loadFromDirectory(directory = '') {\n    const filePaths = glob.sync(`${directory}/**/*.js`, {\n      nodir: true,\n    });\n\n    if (!filePaths.length) {\n      return;\n    }\n\n    filePaths.forEach(Plugin.loadPlugin);\n  }\n\n  /**\n   * Using node's require function, load a plugin and invoke it, passing it\n   * the API object and any other additional objects defined from the\n   * _config.yml file.\n   * @param {string} pluginPath Path to the plugin module.\n   * @param {object} options Plugin options.\n   */\n  static loadPlugin(pluginPath = '', options = {}) {\n    // eslint-disable-next-line global-require, import/no-dynamic-require\n    require(pluginPath)(Plugin.API, options);\n  }\n}\n\nconst eventHandler = new EventHandler();\nPlugin.eventHandler = eventHandler;\n\nPlugin.API = createPluginApi({\n  addEventHandler: eventHandler.addEventHandler.bind(eventHandler),\n});\n\nexport default Plugin;\n"
  },
  {
    "__docId__": 175,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "eventHandler",
    "memberof": "lib/plugin/index.js",
    "longname": "lib/plugin/index.js~eventHandler",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/plugin/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 49,
    "undocument": true,
    "type": {
      "types": [
        "lib/plugin/event-handler.js~EventHandler"
      ]
    }
  },
  {
    "__docId__": 176,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Plugin",
    "memberof": "lib/plugin/index.js",
    "longname": "lib/plugin/index.js~Plugin",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/plugin/index.js",
    "importStyle": "Plugin",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 177,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "loadFromPackageJson",
    "memberof": "lib/plugin/index.js~Plugin",
    "longname": "lib/plugin/index.js~Plugin.loadFromPackageJson",
    "access": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "params": [
      {
        "name": "directory",
        "optional": true,
        "types": [
          "string"
        ],
        "defaultRaw": "",
        "defaultValue": ""
      },
      {
        "name": "pluginConfigs",
        "types": [
          "*"
        ]
      }
    ],
    "generator": false
  },
  {
    "__docId__": 178,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "loadFromDirectory",
    "memberof": "lib/plugin/index.js~Plugin",
    "longname": "lib/plugin/index.js~Plugin.loadFromDirectory",
    "access": null,
    "description": "Load all .js files from a directory and load them as a plugin.",
    "lineNumber": 24,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "directory",
        "description": "Path to directory where plugin files exist."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 179,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "loadPlugin",
    "memberof": "lib/plugin/index.js~Plugin",
    "longname": "lib/plugin/index.js~Plugin.loadPlugin",
    "access": null,
    "description": "Using node's require function, load a plugin and invoke it, passing it\nthe API object and any other additional objects defined from the\n_config.yml file.",
    "lineNumber": 43,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "pluginPath",
        "description": "Path to the plugin module."
      },
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Plugin options."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 180,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/render.js",
    "memberof": null,
    "longname": "lib/render.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import Plugin from './plugin';\n\n/**\n * Write a file to the file system. Calls all plugin events.\n * @param {(File|CollectionPage)} file File or CollectionPage object.\n * @param {Object} siteData Site wide template data.\n * @param {PluginEvents} eventBefore Which event handler to process before\n *   rendering the file.\n * @param {PluginEvents} eventAfter Which event handler to process after\n *   rendering the file.\n * @return {Promise}\n */\n// eslint-disable-next-line import/prefer-default-export\nexport async function renderFileWithPlugins(file, siteData,\n  eventBefore, eventAfter) {\n  if (eventBefore) {\n    await Plugin.eventHandler.processEventHandlers(eventBefore, file);\n  }\n\n  let renderedFile = file.render(siteData);\n\n  if (eventAfter) {\n    // eslint-disable-next-line no-param-reassign\n    [file, renderedFile] = await Plugin.eventHandler.processEventHandlers(\n      eventAfter,\n      file,\n      renderedFile\n    );\n  }\n\n  return [file, renderedFile];\n}\n"
  },
  {
    "__docId__": 181,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "renderFileWithPlugins",
    "memberof": "lib/render.js",
    "longname": "lib/render.js~renderFileWithPlugins",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/render.js",
    "importStyle": "{renderFileWithPlugins}",
    "description": "Write a file to the file system. Calls all plugin events.",
    "lineNumber": 14,
    "params": [
      {
        "nullable": null,
        "types": [
          "File",
          "CollectionPage"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": "File or CollectionPage object."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "siteData",
        "description": "Site wide template data."
      },
      {
        "nullable": null,
        "types": [
          "PluginEvents"
        ],
        "spread": false,
        "optional": false,
        "name": "eventBefore",
        "description": "Which event handler to process before\n  rendering the file."
      },
      {
        "nullable": null,
        "types": [
          "PluginEvents"
        ],
        "spread": false,
        "optional": false,
        "name": "eventAfter",
        "description": "Which event handler to process after\n  rendering the file."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "__docId__": 182,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/template.js",
    "memberof": null,
    "longname": "lib/template.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "/**\n * Methods for rendering a template.\n */\nimport _ from 'lodash';\nimport nunjucks from 'nunjucks';\nimport moment from 'moment';\nimport Url from './url';\n\nconst TemplateErrorMessage = {\n  NO_TEMPLATE: 'template not found',\n};\n\nlet env;\n\n/**\n * Render a template with given context variables.\n * @param {string} template  Template name, excluding the extension.\n * @param {object} variables Object of variables to interpolate in the\n *   template.\n * @return {string} Rendered template.\n */\nexport function renderTemplate(template, variables) {\n  if (!env) {\n    return '';\n  }\n\n  let result = '';\n  try {\n    result = env.render(`${template}.html`, variables);\n  } catch (e) {\n    if (e.message.includes(TemplateErrorMessage.NO_TEMPLATE)) {\n      // The message given from nunjucks looks like:\n      //   Template render error: (/reptar/templates/page.html)\n      //   Template render error: (/reptar/templates/page.html)\n      //   Error: template not found: mistake.html\n      // This takes the multi line message and just grabs the last line.\n      const message = _.last(e.message.split('\\n'))\n        .trim()\n        // Format the last line of `Error: template` to remove anything\n        // preceding our known error message. (Basically remove `Error: `)\n        .replace(\n          new RegExp(`.*${TemplateErrorMessage.NO_TEMPLATE}`),\n          TemplateErrorMessage.NO_TEMPLATE\n        );\n\n      // Re-throw formatted error message.\n      throw new Error(message);\n    } else {\n      throw e;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Render a string template with given context variables.\n * @param {string} str  Template string.\n * @param {object} variables Object of variables to interpolate in the\n *   template.\n * @return {string} Rendered template.\n */\nexport function renderTemplateString(str, variables) {\n  if (!env) {\n    return '';\n  }\n\n  return env.renderString(str, variables);\n}\n\n/**\n * Allow adding custom filters to the template engine.\n * @see {@link\n *   http://mozilla.github.io/nunjucks/api#custom-filters\n * @param {string} name Filter name.\n * @param {Function} func Filter function.\n * @param {boolean} async Whether the filter should be async.\n */\nexport function addTemplateFilter(name, func, async = false) {\n  env.addFilter(name, func, async);\n}\n\n/**\n * Adds built in filters to template renderer.\n * @param {Object} config Config instance.\n */\nexport function addBuiltinFilters(config) {\n  function dateFilter(date, momentTemplate) {\n    if (date == null) {\n      return '';\n    }\n\n    return moment(date, config.get('file.date_format'))\n      .format(momentTemplate);\n  }\n\n  [\n    [\n      'date',\n      dateFilter,\n    ],\n    [\n      'groupbydate',\n      // Group items by formating their date via momentjs.\n      // Useful for creating archive pages:\n      // eslint-disable-next-line\n      // {% for date, files in collections.post.files | reverse | groupbydate('MMMM YYYY') %}\n      function groupbydate(data, momentTemplate, dateKey = 'date') {\n        return _.groupBy(data, datum =>\n          dateFilter(datum[dateKey], momentTemplate)\n        );\n      },\n    ],\n    [\n      'slug',\n      function slug(str) {\n        return Url.slug(str);\n      },\n    ],\n    [\n      'absolute_url',\n      function absoluteUrl(relativePath, basePath) {\n        let base = basePath || '';\n        const baseLength = base.length - 1;\n        base = base[baseLength] === '/' ? base.substr(0, baseLength) : base;\n\n        let input = relativePath || '';\n        const inputLength = input.length - 1;\n        if (input[inputLength] !== '/') {\n          input = `${input}/`;\n        }\n        if (input[0] !== '/') {\n          input = `/${input}`;\n        }\n\n        return base + input;\n      },\n    ],\n    [\n      'limit',\n      function limit(arr, length) {\n        return arr.slice(0, length);\n      },\n    ],\n  ].forEach((filter) => {\n    addTemplateFilter(...filter);\n  });\n}\n\n/**\n * Exposed method to configure template engine.\n * @param {Object} options Options object with following properties:\n * @param {Object} options.config Config object.\n * @param {string|Array.<string>} options.paths Either an array of paths or a\n *   singular path that we can load templates from.\n * @param {boolean} options.noCache Whether our template engine should cache\n *   its templates. Only set to true when in watch mode.\n */\nexport function configureTemplateEngine({\n  config,\n  paths,\n  noCache = false,\n}) {\n  const fileSystemLoader = new nunjucks.FileSystemLoader(paths, {\n    noCache,\n  });\n  env = new nunjucks.Environment(fileSystemLoader, {\n    autoescape: false,\n  });\n\n  addBuiltinFilters(config);\n}\n"
  },
  {
    "__docId__": 183,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "TemplateErrorMessage",
    "memberof": "lib/template.js",
    "longname": "lib/template.js~TemplateErrorMessage",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/template.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 184,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "renderTemplate",
    "memberof": "lib/template.js",
    "longname": "lib/template.js~renderTemplate",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/template.js",
    "importStyle": "{renderTemplate}",
    "description": "Render a template with given context variables.",
    "lineNumber": 22,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "template",
        "description": "Template name, excluding the extension."
      },
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "variables",
        "description": "Object of variables to interpolate in the\n  template."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Rendered template."
    },
    "generator": false
  },
  {
    "__docId__": 185,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "renderTemplateString",
    "memberof": "lib/template.js",
    "longname": "lib/template.js~renderTemplateString",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/template.js",
    "importStyle": "{renderTemplateString}",
    "description": "Render a string template with given context variables.",
    "lineNumber": 63,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "str",
        "description": "Template string."
      },
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "variables",
        "description": "Object of variables to interpolate in the\n  template."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Rendered template."
    },
    "generator": false
  },
  {
    "__docId__": 186,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "addTemplateFilter",
    "memberof": "lib/template.js",
    "longname": "lib/template.js~addTemplateFilter",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/template.js",
    "importStyle": "{addTemplateFilter}",
    "description": "Allow adding custom filters to the template engine.",
    "see": [
      "{@link\n  http://mozilla.github.io/nunjucks/api#custom-filters"
    ],
    "lineNumber": 79,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Filter name."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "func",
        "description": "Filter function."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "async",
        "description": "Whether the filter should be async."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 187,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "addBuiltinFilters",
    "memberof": "lib/template.js",
    "longname": "lib/template.js~addBuiltinFilters",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/template.js",
    "importStyle": "{addBuiltinFilters}",
    "description": "Adds built in filters to template renderer.",
    "lineNumber": 87,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "config",
        "description": "Config instance."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 188,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "configureTemplateEngine",
    "memberof": "lib/template.js",
    "longname": "lib/template.js~configureTemplateEngine",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/template.js",
    "importStyle": "{configureTemplateEngine}",
    "description": "Exposed method to configure template engine.",
    "lineNumber": 159,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Options object with following properties:"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "options.config",
        "description": "Config object."
      },
      {
        "nullable": null,
        "types": [
          "string",
          "Array.<string>"
        ],
        "spread": false,
        "optional": false,
        "name": "options.paths",
        "description": "Either an array of paths or a\n  singular path that we can load templates from."
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "options.noCache",
        "description": "Whether our template engine should cache\n  its templates. Only set to true when in watch mode."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 189,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/theme/asset.js",
    "memberof": null,
    "longname": "lib/theme/asset.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import fs from 'fs-extra';\nimport _ from 'lodash';\n\nimport log from '../log';\nimport browserify from './processor/browserify';\nimport less from './processor/less';\nimport sass from './processor/sass';\n\nconst processors = {\n  browserify,\n  less,\n  sass,\n};\n\nexport default class Asset {\n  constructor(assetType, assetConfig) {\n    /**\n     * ID of asset, right now an alias to its type.\n     * @type {string}\n     */\n    this.id = assetType;\n\n    /**\n     * What type of asset this is. css/js/font etc.\n     * @type {string}\n     */\n    this.type = assetType;\n\n    /**\n     * The asset config object.\n     * @type {Object}\n     */\n    this.config = assetConfig;\n\n    // If this asset has a processor, instantiate the class that handles how to\n    // process the asset.\n    if (this.config.processor && this.config.processor.name) {\n      const processorName = this.config.processor.name;\n      const ProcessorClass = processors[processorName];\n\n      if (_.isUndefined(ProcessorClass)) {\n        const msg = `Could not load processer '${processorName}'. Aborting.`;\n        log.error(msg);\n        throw new Error(msg);\n      }\n\n      /**\n       * Asset processor.\n       * @type {Processor}\n       */\n      this.processor = new ProcessorClass(this);\n\n      /**\n       * Asset destination where it should be written to.\n       * @type {string}\n       */\n      this.destination = '';\n\n      /**\n       * The processed Asset content.\n       * @type {string}\n       */\n      this.content = '';\n    }\n\n    /**\n     * Data accessible to templates.\n     * @type {Object}\n     */\n    this.data = Object.create(null);\n  }\n\n  async process(pathDestination) {\n    if (!this.processor) {\n      return;\n    }\n\n    try {\n      const processedFile = await this.processor.process();\n\n      this.destination = processedFile.destination;\n      this.content = processedFile.asset;\n    } catch (e) {\n      throw e;\n    }\n\n    // Expose relative url to file.\n    this.data.url = this.destination.replace(pathDestination, '');\n  }\n\n  async write() {\n    // If there is a processor let it handle writing the file.\n    if (this.processor) {\n      if (!(this.destination || this.content)) {\n        log.warn(`Asset: ${this.id} found no processed file when about ` +\n          'to write asset to disk. Processing now.');\n        await this.process();\n      }\n\n      fs.outputFileSync(this.destination, this.content, 'utf8');\n    } else {\n      // If there's no processor then just copy the source to the destination.\n      try {\n        fs.copySync(this.config.source, this.config.destination);\n      } catch (e) {\n        log.error(`Asset: Could not copy '${this.type}' assets.`);\n      }\n    }\n  }\n}\n"
  },
  {
    "__docId__": 190,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "processors",
    "memberof": "lib/theme/asset.js",
    "longname": "lib/theme/asset.js~processors",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/theme/asset.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 191,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Asset",
    "memberof": "lib/theme/asset.js",
    "longname": "lib/theme/asset.js~Asset",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/theme/asset.js",
    "importStyle": "Asset",
    "description": null,
    "lineNumber": 15,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 192,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#constructor",
    "access": null,
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "params": [
      {
        "name": "assetType",
        "types": [
          "*"
        ]
      },
      {
        "name": "assetConfig",
        "types": [
          "*"
        ]
      }
    ],
    "generator": false
  },
  {
    "__docId__": 193,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "id",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#id",
    "access": null,
    "description": "ID of asset, right now an alias to its type.",
    "lineNumber": 21,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 194,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "type",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#type",
    "access": null,
    "description": "What type of asset this is. css/js/font etc.",
    "lineNumber": 27,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 195,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "config",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#config",
    "access": null,
    "description": "The asset config object.",
    "lineNumber": 33,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 196,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "processor",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#processor",
    "access": null,
    "description": "Asset processor.",
    "lineNumber": 51,
    "type": {
      "nullable": null,
      "types": [
        "Processor"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 197,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "destination",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#destination",
    "access": null,
    "description": "Asset destination where it should be written to.",
    "lineNumber": 57,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 198,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "content",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#content",
    "access": null,
    "description": "The processed Asset content.",
    "lineNumber": 63,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 199,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "data",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#data",
    "access": null,
    "description": "Data accessible to templates.",
    "lineNumber": 70,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 200,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "process",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#process",
    "access": null,
    "description": null,
    "lineNumber": 73,
    "undocument": true,
    "params": [
      {
        "name": "pathDestination",
        "types": [
          "*"
        ]
      }
    ],
    "generator": false
  },
  {
    "__docId__": 201,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "destination",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#destination",
    "access": null,
    "description": null,
    "lineNumber": 81,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 202,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "content",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#content",
    "access": null,
    "description": null,
    "lineNumber": 82,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 203,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "write",
    "memberof": "lib/theme/asset.js~Asset",
    "longname": "lib/theme/asset.js~Asset#write",
    "access": null,
    "description": null,
    "lineNumber": 91,
    "undocument": true,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 204,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/theme/index.js",
    "memberof": null,
    "longname": "lib/theme/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import glob from 'glob';\nimport path from 'path';\nimport fs from 'fs-extra';\nimport resolve from 'resolve';\nimport _ from 'lodash';\nimport { getReptarPackageNames } from '../json';\nimport Parse from '../parse';\nimport * as CONSTANTS from '../constants';\nimport Asset from './asset';\n\n/**\n * Find all theme.yml files in node_modules.\n * @param {string} directory Directory to load package.json from.\n * @return {Array.<string>} Array of paths to theme.yml files.\n */\nfunction getThemesFromPackageJson(directory = '') {\n  const reptarThemePackageNameRegex = /^reptar-theme-/;\n\n  // All packages that exist in our root package.json file.\n  const reptarPackages = getReptarPackageNames(directory);\n\n  // Return only the path to the theme.yml file.\n  return reptarPackages.reduce((packageThemes, packageName) => {\n    if (!reptarThemePackageNameRegex.test(packageName)) {\n      return packageThemes;\n    }\n\n    // Use module's main field which should reference the config yaml file.\n    const yamlPath = resolve.sync(packageName, {\n      basedir: directory,\n    });\n\n    packageThemes.push(yamlPath);\n\n    return packageThemes;\n  }, []);\n}\n\nexport default class Theme {\n  constructor() {\n    /**\n     * The current theme name.\n     * @type {string}\n     */\n    this.name = '';\n\n    /**\n     * Raw object that holds the theme config object.\n     * @type {Object}\n     */\n    this.config = Object.create(null);\n\n    /**\n     * Collection of all assets for this theme.\n     * @type {Object.<string, Asset>}\n     */\n    this.assets = Object.create(null);\n\n    /**\n     * Data of asset names and paths that is exposed to templates.\n     * @type {Object}\n     */\n    this.data = Object.create(null);\n  }\n\n  /**\n   * Set global config delegate function.\n   * @param {Object} getConfig Config object.\n   */\n  setGetConfig(getConfig) {\n    this._getConfig = getConfig;\n  }\n\n  update() {\n    this.name = this._getConfig().get('theme');\n\n    const configPath = this._getConfig().get('path');\n\n    // Find all theme config files that might exist.\n    const fileSystemYamls = glob.sync(\n      `${configPath.themes}/**/${CONSTANTS.YAML.THEME}`,\n      { nodir: true }\n    );\n\n    const moduleYamls = getThemesFromPackageJson(configPath.source);\n\n    const allYamls = [].concat(fileSystemYamls, moduleYamls);\n\n    const files = allYamls.reduce((allFiles, file) => {\n      let parsedFile;\n      try {\n        parsedFile = Parse.fromYaml(\n          fs.readFileSync(file, 'utf8')\n        );\n      } catch (e) {\n        return allFiles;\n      }\n\n      // If the found theme config file name matches our set theme name\n      // then save it.\n      if (_.get(parsedFile, 'name') === this.name) {\n        // Save the directory where the correct theme file was found.\n        parsedFile.path[CONSTANTS.KEY.SOURCE] = path.dirname(file);\n        allFiles.push(parsedFile);\n      }\n\n      return allFiles;\n    }, []);\n\n    if (files.length === 0) {\n      throw new Error(`Did not find any theme named '${this.name}' installed.`);\n    } else if (files.length !== 1) {\n      const names = files.join(',');\n      throw new Error(`Found multiple themes with the same name: ${names}`);\n    }\n\n    const parsedFile = files[0];\n\n    // Save raw theme config.\n    this.config = parsedFile;\n\n    // Calculate absolute path of 'paths' keys.\n    _.each(this.config.path, (val, key) => {\n      if (key !== CONSTANTS.KEY.SOURCE) {\n        // The root of the theme's destination is the site's destination.\n        const rootPath = key === CONSTANTS.KEY.DESTINATION ?\n          configPath.destination : this.config.path.source;\n\n        const keyValue = this.config.path[key];\n\n        // Support converting array of values to their absolute path.\n        if (_.isArray(keyValue)) {\n          this.config.path[key] = keyValue.map(value =>\n            path.resolve(rootPath, value)\n          );\n        } else {\n          this.config.path[key] = path.resolve(rootPath, keyValue);\n        }\n      }\n    });\n\n    this._createAssets();\n  }\n\n  _createAssets() {\n    // Instantiate an Asset for every asset the theme configures.\n    this.assets = _.reduce(\n      this.config.assets,\n      (assets, assetConfig, assetType) => {\n        assetConfig.destination = path.resolve(\n          this.config.path.destination,\n          assetConfig.source\n        );\n\n        assetConfig.source = path.resolve(\n          this.config.path.source,\n          assetConfig.source\n        );\n\n        const asset = new Asset(assetType, assetConfig);\n        assets[asset.id] = asset;\n        return assets;\n      },\n      Object.create(null)\n    );\n  }\n\n  async read() {\n    const pathDestination = this._getConfig().get('path.destination');\n\n    // Have every asset write itself to the destination folder.\n    await Promise.all(\n      _.map(this.assets, asset => asset.process(pathDestination))\n    );\n\n    // Expose every asset's data onto the theme's data object.\n    _.each(this.assets, (asset) => {\n      if (asset.data) {\n        this.data[asset.type] = asset.data.url;\n      }\n    });\n  }\n\n  async write() {\n    // Have every asset write itself to the destination folder.\n    await Promise.all(\n      _.map(this.assets, asset => asset.write())\n    );\n  }\n}\n"
  },
  {
    "__docId__": 205,
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "getThemesFromPackageJson",
    "memberof": "lib/theme/index.js",
    "longname": "lib/theme/index.js~getThemesFromPackageJson",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/theme/index.js",
    "importStyle": null,
    "description": "Find all theme.yml files in node_modules.",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "directory",
        "description": "Directory to load package.json from."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array.<string>"
      ],
      "spread": false,
      "description": "Array of paths to theme.yml files."
    },
    "generator": false
  },
  {
    "__docId__": 206,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Theme",
    "memberof": "lib/theme/index.js",
    "longname": "lib/theme/index.js~Theme",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/theme/index.js",
    "importStyle": "Theme",
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 207,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#constructor",
    "access": null,
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 208,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#name",
    "access": null,
    "description": "The current theme name.",
    "lineNumber": 45,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 209,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "config",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#config",
    "access": null,
    "description": "Raw object that holds the theme config object.",
    "lineNumber": 51,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 210,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "assets",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#assets",
    "access": null,
    "description": "Collection of all assets for this theme.",
    "lineNumber": 57,
    "type": {
      "nullable": null,
      "types": [
        "Object.<string, Asset>"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 211,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "data",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#data",
    "access": null,
    "description": "Data of asset names and paths that is exposed to templates.",
    "lineNumber": 63,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 212,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "setGetConfig",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#setGetConfig",
    "access": null,
    "description": "Set global config delegate function.",
    "lineNumber": 70,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "getConfig",
        "description": "Config object."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 213,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_getConfig",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#_getConfig",
    "access": null,
    "description": null,
    "lineNumber": 71,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 214,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "update",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#update",
    "access": null,
    "description": null,
    "lineNumber": 74,
    "undocument": true,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 215,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#name",
    "access": null,
    "description": null,
    "lineNumber": 75,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 216,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "config",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#config",
    "access": null,
    "description": null,
    "lineNumber": 120,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 217,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_createAssets",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#_createAssets",
    "access": null,
    "description": null,
    "lineNumber": 145,
    "undocument": true,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 218,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "assets",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#assets",
    "access": null,
    "description": null,
    "lineNumber": 147,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 219,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "read",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#read",
    "access": null,
    "description": null,
    "lineNumber": 168,
    "undocument": true,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 220,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "write",
    "memberof": "lib/theme/index.js~Theme",
    "longname": "lib/theme/index.js~Theme#write",
    "access": null,
    "description": null,
    "lineNumber": 184,
    "undocument": true,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 221,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/theme/processor/browserify.js",
    "memberof": null,
    "longname": "lib/theme/processor/browserify.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import _ from 'lodash';\nimport browserify from 'browserify';\nimport babelify from 'babelify';\nimport uglifyify from 'uglifyify';\nimport ProcessorBase from '../processor-base';\n\nexport default class Browserify extends ProcessorBase {\n  _getFile() {\n    let bundle = browserify();\n    bundle.add(this.assetSource);\n\n    if (this.plugins) {\n      if (!_.isUndefined(this.plugins.babelify)) {\n        bundle = bundle.transform(\n          babelify.configure(this.plugins.babelify || {})\n        );\n      }\n      if (!_.isUndefined(this.plugins.uglifyify)) {\n        bundle = bundle.transform(\n          uglifyify\n        );\n      }\n    }\n\n    return new Promise((resolve, reject) => {\n      bundle.bundle((err, buffer) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(buffer.toString('utf8'));\n        }\n      });\n    });\n  }\n}\n"
  },
  {
    "__docId__": 222,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Browserify",
    "memberof": "lib/theme/processor/browserify.js",
    "longname": "lib/theme/processor/browserify.js~Browserify",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/theme/processor/browserify.js",
    "importStyle": "Browserify",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "interface": false,
    "extends": [
      "lib/theme/processor-base.js~ProcessorBase"
    ]
  },
  {
    "__docId__": 223,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getFile",
    "memberof": "lib/theme/processor/browserify.js~Browserify",
    "longname": "lib/theme/processor/browserify.js~Browserify#_getFile",
    "access": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 224,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/theme/processor/less.js",
    "memberof": null,
    "longname": "lib/theme/processor/less.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import _ from 'lodash';\nimport path from 'path';\nimport fs from 'fs-extra';\nimport less from 'less';\nimport LessPluginAutoPrefix from 'less-plugin-autoprefix';\nimport LessPluginCleanCSS from 'less-plugin-clean-css';\nimport LessPluginNpmImport from 'less-plugin-npm-import';\nimport ProcessorBase from '../processor-base';\n\nexport default class Less extends ProcessorBase {\n  _getFile() {\n    // Derive source path from the input source file.\n    const sourcePath = path.dirname(this.assetSource);\n\n    const lessPlugins = [];\n\n    // Add built-in plugins.\n    lessPlugins.push(\n      new LessPluginNpmImport({\n        basedir: sourcePath,\n      })\n    );\n\n    if (this.plugins) {\n      if (!_.isUndefined(this.plugins.autoprefixer)) {\n        lessPlugins.push(\n          new LessPluginAutoPrefix(this.plugins.autoprefixer || {})\n        );\n      }\n      if (!_.isUndefined(this.plugins['clean-css'])) {\n        lessPlugins.push(\n          new LessPluginCleanCSS(this.plugins['clean-css'] || {})\n        );\n      }\n    }\n\n    const rawAsset = fs.readFileSync(this.assetSource, 'utf8');\n\n    return new Promise((resolve, reject) => {\n      less.render(rawAsset, {\n        // Specify search paths for @import directives.\n        paths: [sourcePath],\n        plugins: lessPlugins,\n      }, (e, output) => {\n        if (e) {\n          reject(e);\n          return;\n        }\n\n        resolve(output.css);\n      });\n    });\n  }\n\n  _getDestination() {\n    const destination = this.assetDestination.replace(\n      /\\.less$/,\n      '.css'\n    );\n\n    return destination;\n  }\n}\n"
  },
  {
    "__docId__": 225,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Less",
    "memberof": "lib/theme/processor/less.js",
    "longname": "lib/theme/processor/less.js~Less",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/theme/processor/less.js",
    "importStyle": "Less",
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "interface": false,
    "extends": [
      "lib/theme/processor-base.js~ProcessorBase"
    ]
  },
  {
    "__docId__": 226,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getFile",
    "memberof": "lib/theme/processor/less.js~Less",
    "longname": "lib/theme/processor/less.js~Less#_getFile",
    "access": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 227,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getDestination",
    "memberof": "lib/theme/processor/less.js~Less",
    "longname": "lib/theme/processor/less.js~Less#_getDestination",
    "access": null,
    "description": null,
    "lineNumber": 55,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 228,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/theme/processor/sass.js",
    "memberof": null,
    "longname": "lib/theme/processor/sass.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import sass from 'node-sass';\nimport ProcessorBase from '../processor-base';\n\nexport default class Sass extends ProcessorBase {\n  _getFile() {\n    return new Promise((resolve, reject) => {\n      sass.render({\n        file: this.assetSource,\n      }, (e, result) => {\n        if (e) {\n          reject(e);\n          return;\n        }\n\n        resolve(result.css);\n      });\n    });\n  }\n\n  _getDestination() {\n    const destination = this.assetDestination.replace(\n      /\\.s[ac]ss$/,\n      '.css'\n    );\n\n    return destination;\n  }\n}\n"
  },
  {
    "__docId__": 229,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Sass",
    "memberof": "lib/theme/processor/sass.js",
    "longname": "lib/theme/processor/sass.js~Sass",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/theme/processor/sass.js",
    "importStyle": "Sass",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false,
    "extends": [
      "lib/theme/processor-base.js~ProcessorBase"
    ]
  },
  {
    "__docId__": 230,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getFile",
    "memberof": "lib/theme/processor/sass.js~Sass",
    "longname": "lib/theme/processor/sass.js~Sass#_getFile",
    "access": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 231,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getDestination",
    "memberof": "lib/theme/processor/sass.js~Sass",
    "longname": "lib/theme/processor/sass.js~Sass#_getDestination",
    "access": null,
    "description": null,
    "lineNumber": 20,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 232,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/theme/processor-base.js",
    "memberof": null,
    "longname": "lib/theme/processor-base.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import path from 'path';\nimport createChecksum from '../checksum';\n\nexport default class ProcessorBase {\n  constructor(asset) {\n    /**\n     * The asset we're processing.\n     * @type {Asset}\n     * @private\n     */\n    this._asset = asset;\n\n    /**\n     * Path from where to read the asset.\n     * @type {string}\n     */\n    this.assetSource = this._asset.config.source;\n\n    /**\n     * Path of where to write the asset.\n     * @type {string}\n     */\n    this.assetDestination = this._asset.config.destination;\n\n    /**\n     * What plugins to apply to the processor.\n     * @type {Object}\n     */\n    this.plugins = this._asset.config.processor.plugins;\n\n    /**\n     * Whether we should hash the file name.\n     * @type {boolean}\n     */\n    this.shouldHash = this._asset.config.processor.hash;\n  }\n\n  /**\n   * Public API that is used to process the asset.\n   * @return {Promise} Returns a promise that resolves with the destination\n   *  and actual content of the processed asset.\n   */\n  async process() {\n    const asset = await this._getFile();\n\n    let destination = this._getDestination(asset);\n\n    if (this.shouldHash) {\n      this.checksum = createChecksum(asset).slice(0, 10);\n\n      // Get destination extension, i.e. `.css`.\n      const extension = path.extname(destination);\n\n      // Append checksum to path.\n      destination = destination.replace(\n        new RegExp(`${extension}$`),\n        `-${this.checksum}${extension}`\n      );\n    }\n\n    return {\n      destination,\n      asset,\n    };\n  }\n\n  _getDestination() {\n    return this.assetDestination;\n  }\n}\n"
  },
  {
    "__docId__": 233,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "ProcessorBase",
    "memberof": "lib/theme/processor-base.js",
    "longname": "lib/theme/processor-base.js~ProcessorBase",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/theme/processor-base.js",
    "importStyle": "ProcessorBase",
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "interface": false
  },
  {
    "__docId__": 234,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/theme/processor-base.js~ProcessorBase",
    "longname": "lib/theme/processor-base.js~ProcessorBase#constructor",
    "access": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "params": [
      {
        "name": "asset",
        "types": [
          "*"
        ]
      }
    ],
    "generator": false
  },
  {
    "__docId__": 235,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_asset",
    "memberof": "lib/theme/processor-base.js~ProcessorBase",
    "longname": "lib/theme/processor-base.js~ProcessorBase#_asset",
    "access": "private",
    "description": "The asset we're processing.",
    "lineNumber": 11,
    "type": {
      "nullable": null,
      "types": [
        "Asset"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 236,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "assetSource",
    "memberof": "lib/theme/processor-base.js~ProcessorBase",
    "longname": "lib/theme/processor-base.js~ProcessorBase#assetSource",
    "access": null,
    "description": "Path from where to read the asset.",
    "lineNumber": 17,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 237,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "assetDestination",
    "memberof": "lib/theme/processor-base.js~ProcessorBase",
    "longname": "lib/theme/processor-base.js~ProcessorBase#assetDestination",
    "access": null,
    "description": "Path of where to write the asset.",
    "lineNumber": 23,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 238,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "plugins",
    "memberof": "lib/theme/processor-base.js~ProcessorBase",
    "longname": "lib/theme/processor-base.js~ProcessorBase#plugins",
    "access": null,
    "description": "What plugins to apply to the processor.",
    "lineNumber": 29,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 239,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "shouldHash",
    "memberof": "lib/theme/processor-base.js~ProcessorBase",
    "longname": "lib/theme/processor-base.js~ProcessorBase#shouldHash",
    "access": null,
    "description": "Whether we should hash the file name.",
    "lineNumber": 35,
    "type": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 240,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "process",
    "memberof": "lib/theme/processor-base.js~ProcessorBase",
    "longname": "lib/theme/processor-base.js~ProcessorBase#process",
    "access": null,
    "description": "Public API that is used to process the asset.",
    "lineNumber": 43,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": "Returns a promise that resolves with the destination\n and actual content of the processed asset."
    },
    "generator": false
  },
  {
    "__docId__": 241,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "checksum",
    "memberof": "lib/theme/processor-base.js~ProcessorBase",
    "longname": "lib/theme/processor-base.js~ProcessorBase#checksum",
    "access": null,
    "description": null,
    "lineNumber": 49,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 242,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getDestination",
    "memberof": "lib/theme/processor-base.js~ProcessorBase",
    "longname": "lib/theme/processor-base.js~ProcessorBase#_getDestination",
    "access": null,
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 243,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/url.js",
    "memberof": null,
    "longname": "lib/url.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import moment from 'moment';\nimport slug from 'slug';\nimport path from 'path';\n\n/**\n * Are we running within a dist build (i.e. pre-compiled)?\n * @type {boolean} True if we're running in the dist folder.\n */\nconst isDistBuild = __dirname.indexOf('dist') > -1;\n\n// Cached slug options.\nlet slugOptions;\n\nconst Url = {\n  /**\n   * Interpolates variables into a permalink structure.\n   * @example\n   * // returns '/hello-world/'\n   * interpolatePermalink('/:title/', {\n   *   title: 'hello-world'\n   * });\n   * @param {string} permalink A permalink template.\n   * @param {Object} context An object with keys that if matched to the\n   *   permalink will have the value interpolated to the string.\n   * @return {string} Actual permalink value.\n   */\n  interpolatePermalink(permalink, context) {\n    // eslint-disable-next-line no-useless-escape\n    const PERMALINK_REGEX = /:(\\w+[\\|A-Z]*)/g;\n\n    const params = permalink.match(PERMALINK_REGEX);\n\n    // If we found no tags in the permalink then just return the given string.\n    if (!params) {\n      return permalink;\n    }\n\n    let result = permalink;\n\n    params.forEach((param) => {\n      // Replace ':title' -> 'title'.\n      let paramKey = param.substr(1);\n\n      let paramPipe;\n      if (paramKey.includes('|')) {\n        [paramKey, paramPipe] = paramKey.split('|');\n      }\n\n      let paramValue = context[paramKey];\n\n      if (paramValue) {\n        if (paramPipe) {\n          paramValue = moment(paramValue).format(paramPipe);\n        }\n        const sanitized = Url.slug(paramValue);\n        result = result.replace(param, sanitized);\n      } else {\n        throw new Error(`${'interpolatePermalink: could not find param value ' +\n          'for key: '}${paramKey}`);\n      }\n    });\n\n    return result;\n  },\n\n  /**\n   * Wrapper around the slug module. Handles taking a string and making it\n   * into a slug, a URL safe string.\n   * @param {string} str String to slugify.\n   * @param {Object} options Slug options.\n   * @return {string} Slugified string.\n   */\n  slug(str, options) {\n    return slug(str, {\n      ...slugOptions,\n      options,\n    });\n  },\n\n  /**\n   * Set slug options to be used by Url.slug.\n   * @param {Object} options Options\n   */\n  setSlugOptions(options) {\n    slugOptions = options;\n  },\n\n  /**\n   * Replaces a markdown file path with `.html` if it's a known markdown file.\n   * @param {string} filePath A file path.\n   * @param {Array.<string>} markdownExtensions Array of known markdown file\n   *   extensions.\n   * @return {string} Modified file path.\n   */\n  replaceMarkdownExtension(filePath, markdownExtensions) {\n    // Get file extension of file. i.e. 'post.md' would give 'md'.\n    const fileExtension = path.extname(filePath).replace(/^\\./, '');\n    const index = markdownExtensions.indexOf(fileExtension);\n\n    let result = filePath;\n\n    // Is this file's extension one of our known markdown extensions?\n    if (index > -1) {\n      const foundExtension = markdownExtensions[index];\n      result = filePath.replace(\n        new RegExp(`.${foundExtension}$`),\n        '.html'\n      );\n    }\n\n    return result;\n  },\n\n  /**\n   * When writing to the file system update the permalink so that it renders\n   * correctly.\n   * @example\n   * // returns '/hello-world/index.html'\n   * Url.makeUrlFileSystemSafe('/hello-world');\n   * @param {string} url Url to make file system safe.\n   * @return {string} Safe url.\n   */\n  makeUrlFileSystemSafe(url) {\n    let result = url;\n\n    // If the url does not end with an extension then we need to modify the URL.\n    if (!path.extname(url)) {\n      // If we don't have a leading / then add it.\n      if (!url.startsWith('/')) {\n        result = `/${url}`;\n      }\n\n      // If we don't have a trailing / then add it.\n      if (!url.endsWith('/')) {\n        result += '/';\n      }\n\n      // Append the default file name.\n      result += 'index.html';\n    }\n\n    return result;\n  },\n\n  /**\n   * Given a URL that ends with 'index.html' it'll strip it off and return the\n   * resulting value. Useful when creating URLs in a template.\n   * @param {string} url Url to augment.\n   * @return {string} Augmented url.\n   */\n  makePretty(url) {\n    const makePrettyRegEx = /\\/index.html$/;\n    return url.replace(makePrettyRegEx, '/');\n  },\n\n  /**\n   * Resolve a path from the root of the project, taking into account\n   * the relative depth we need to go to get to the root of the project,\n   * depending if we're in a pre-compiled build or not.\n   * @param {...string} args Splat of strings.\n   * @return {string} Full path.\n   */\n  pathFromRoot(...args) {\n    // Push relative distance from root of project.\n    args.unshift(\n      isDistBuild ? '../../' : '../'\n    );\n\n    // Add dirname relative from.\n    args.unshift(__dirname);\n\n    return path.resolve(...args);\n  },\n};\n\nexport default Url;\n"
  },
  {
    "__docId__": 244,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "isDistBuild",
    "memberof": "lib/url.js",
    "longname": "lib/url.js~isDistBuild",
    "access": null,
    "export": false,
    "importPath": "reptar/lib/url.js",
    "importStyle": null,
    "description": "Are we running within a dist build (i.e. pre-compiled)?",
    "lineNumber": 9,
    "type": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 245,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "Url",
    "memberof": "lib/url.js",
    "longname": "lib/url.js~Url",
    "access": null,
    "export": true,
    "importPath": "reptar/lib/url.js",
    "importStyle": "Url",
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 247,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Infinity",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 248,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~NaN",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 249,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~undefined",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 250,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~null",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 251,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Object",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 252,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~object",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 253,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Function",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 254,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~function",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 255,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Boolean",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 256,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~boolean",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 257,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Symbol",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 258,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Error",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 259,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~EvalError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 260,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~InternalError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 261,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~RangeError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 262,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~ReferenceError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 263,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~SyntaxError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 264,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~TypeError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 265,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~URIError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 266,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Number",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 267,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~number",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 268,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Date",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 269,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~String",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 270,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~string",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 271,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~RegExp",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 272,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 273,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int8Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 274,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint8Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 275,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint8ClampedArray",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 276,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int16Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 277,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint16Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 278,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int32Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 279,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint32Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 280,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Float32Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 281,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Float64Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 282,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Map",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 283,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Set",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 284,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~WeakMap",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 285,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~WeakSet",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 286,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~ArrayBuffer",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 287,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~DataView",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 288,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~JSON",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 289,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Promise",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 290,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Generator",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 291,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~GeneratorFunction",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 292,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Reflect",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 293,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Proxy",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 295,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "CanvasRenderingContext2D",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~CanvasRenderingContext2D",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 296,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "DocumentFragment",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~DocumentFragment",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 297,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Element",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Element",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Element",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 298,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Event",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Event",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Event",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 299,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Node",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Node",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Node",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 300,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "NodeList",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/NodeList",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~NodeList",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 301,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "XMLHttpRequest",
    "externalLink": "https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~XMLHttpRequest",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 302,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "AudioContext",
    "externalLink": "https://developer.mozilla.org/en/docs/Web/API/AudioContext",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~AudioContext",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 303,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/e2e/yarn.spec.js",
    "memberof": null,
    "longname": "test/e2e/yarn.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport sinon from 'sinon';\nimport _ from 'lodash';\n\nimport {\n  mockSimpleSite,\n  getPathToSimpleMock,\n  getSimpleOneOutput,\n  filterOnlyFiles,\n  restoreMockFs,\n} from '../fixtures';\nimport fs from 'fs-extra'; // eslint-disable-line import/first\n\nimport Reptar from '../../lib/index';\nimport cache from '../../lib/cache';\nimport Config from '../../lib/config/index';\nimport Theme from '../../lib/theme/index';\nimport log from '../../lib/log';\n\nlog.setSilent(true);\n\ndescribe('reptar Reptar', function test() {\n  this.timeout(5000);\n\n  let sandbox;\n  let simpleOneOutput;\n  beforeEach(async () => {\n    sandbox = sinon.sandbox.create();\n    simpleOneOutput = await getSimpleOneOutput();\n    simpleOneOutput = filterOnlyFiles(simpleOneOutput);\n    await mockSimpleSite();\n\n    // Don't actually save cache to file system.\n    sandbox.stub(cache, 'save');\n    sandbox.stub(fs, 'copy', (path, dest, cb) => setTimeout(cb, 0));\n  });\n\n  afterEach(() => {\n    sandbox.restore();\n    restoreMockFs();\n  });\n\n  it('instantiates correctly', async () => {\n    sandbox.spy(Reptar.prototype, 'update');\n    sandbox.spy(Config.prototype, 'update');\n    sandbox.spy(Theme.prototype, 'setGetConfig');\n\n    const instance = new Reptar({\n      rootPath: getPathToSimpleMock(),\n    });\n    assert.equal(instance.update.callCount, 0);\n\n    await instance.update();\n    assert.equal(instance.update.callCount, 1);\n\n    assert(instance.config instanceof Config);\n    assert.equal(instance.config.update.callCount, 1);\n\n    assert(instance.theme instanceof Theme);\n    assert.equal(instance.theme.setGetConfig.callCount, 1);\n\n    assert(_.isObject(instance.files));\n    assert(_.isObject(instance.collections));\n    assert(_.isObject(instance.data));\n    assert(_.isObject(instance.data.collections));\n  });\n\n  it('builds site correctly', async () => {\n    sandbox.spy(fs, 'outputFile');\n\n    // Build site.\n    const instance = new Reptar({\n      rootPath: getPathToSimpleMock(),\n    });\n    await instance.update();\n    await instance.build();\n\n    assert(fs.outputFile.callCount > 0);\n\n    // eslint-disable-next-line no-plusplus\n    for (let i = 0; i < fs.outputFile.callCount; i++) {\n      const fileDestination = fs.outputFile.getCall(i).args[0];\n      const fileDestinationRelative = fileDestination.replace(\n        /(.*)_site\\//, ''\n      );\n      const fileWritten = fs.outputFile.getCall(i).args[1];\n\n      // Make sure what Reptar built matches what we expect it to have built.\n      assert.equal(fileWritten, simpleOneOutput[fileDestinationRelative]);\n    }\n  });\n});\n"
  },
  {
    "__docId__": 304,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe0",
    "testId": 0,
    "memberof": "test/e2e/yarn.spec.js",
    "testDepth": 0,
    "longname": "test/e2e/yarn.spec.js~describe0",
    "access": null,
    "description": "reptar Reptar",
    "lineNumber": 22
  },
  {
    "__docId__": 305,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it1",
    "testId": 1,
    "memberof": "test/e2e/yarn.spec.js~describe0",
    "testDepth": 1,
    "longname": "test/e2e/yarn.spec.js~describe0.it1",
    "access": null,
    "description": "instantiates correctly",
    "lineNumber": 43
  },
  {
    "__docId__": 306,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it2",
    "testId": 2,
    "memberof": "test/e2e/yarn.spec.js~describe0",
    "testDepth": 1,
    "longname": "test/e2e/yarn.spec.js~describe0.it2",
    "access": null,
    "description": "builds site correctly",
    "lineNumber": 68
  },
  {
    "__docId__": 307,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/collection/base.spec.js",
    "memberof": null,
    "longname": "test/unit/collection/base.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "/* eslint-disable no-new */\nimport assert from 'power-assert';\nimport sinon from 'sinon';\nimport _ from 'lodash';\n\nimport fixture from '../../fixture';\n\nimport Plugin from '../../../lib/plugin/index';\n\nimport CollectionBase from '../../../lib/collection/base';\n\ndescribe('collection/base CollectionBase', () => {\n  let sandbox;\n  beforeEach(() => {\n    sandbox = sinon.sandbox.create();\n\n    Plugin.eventHandler._reset();\n  });\n\n  afterEach(() => {\n    sandbox.restore();\n  });\n\n  describe('constructor', () => {\n    it('throws when no collection name is given', () => {\n      assert.throws(() => {\n        new CollectionBase();\n      }, /requires a name/);\n\n      assert.throws(() => {\n        new CollectionBase('');\n      }, /requires a name/);\n    });\n\n    it('accepts a name and no config object', () => {\n      const instance = new CollectionBase('name');\n\n      assert.equal(instance.name, 'name');\n      assert(_.isUndefined(instance.path));\n      assert(_.isUndefined(instance.metadata));\n      assert(_.isUndefined(instance.template));\n      assert(_.isUndefined(instance.permalink));\n      assert(_.isUndefined(instance.sort));\n      assert(_.isUndefined(instance.pagination));\n      assert(_.isUndefined(instance.files));\n      assert(_.isUndefined(instance.excludePaths));\n      assert(_.isUndefined(instance.metadataFiles));\n      assert(_.isArray(instance.pages));\n      assert.equal(instance.pages.length, 0);\n      assert(_.isObject(instance.data));\n    });\n  });\n\n  describe('isFiltered', () => {\n    it('returns if a file in collection is filtered', () => {\n      const instance = new CollectionBase('name');\n      const file = {\n        filtered: undefined,\n      };\n\n      assert.equal(instance.isFiltered(file), false);\n\n      file.filtered = false;\n      assert.equal(instance.isFiltered(file), false);\n\n      file.filtered = true;\n      assert.equal(instance.isFiltered(file), true);\n    });\n  });\n\n  describe('sortFiles', () => {\n    let files;\n\n    const additionalData = [\n      {\n        number: 10,\n        date: '2017-03-28',\n      },\n      {\n        number: 1,\n        date: '2013-09-8',\n      },\n      {\n        number: 5,\n        date: '2016-05-1',\n      },\n    ];\n    beforeEach(() => {\n      files = fixture.collectionFiles().map((file, index) => {\n        _.extend(file.data, additionalData[index]);\n        return file;\n      });\n    });\n\n    it('sorts integer value descending', () => {\n      const sortConfig = {\n        key: 'number',\n        order: 'descending',\n      };\n\n      assert.deepEqual(\n        CollectionBase.sortFiles(files, sortConfig),\n        [files[0], files[2], files[1]]\n      );\n    });\n\n    it('sorts integer value ascending', () => {\n      const sortConfig = {\n        key: 'number',\n        order: 'ascending',\n      };\n\n      assert.deepEqual(\n        CollectionBase.sortFiles(files, sortConfig),\n        [files[1], files[2], files[0]]\n      );\n    });\n\n    it('sorts date value descending', () => {\n      const sortConfig = {\n        key: 'date',\n        order: 'descending',\n      };\n\n      assert.deepEqual(\n        CollectionBase.sortFiles(files, sortConfig),\n        [files[0], files[2], files[1]]\n      );\n    });\n\n    it('sorts date value ascending', () => {\n      const sortConfig = {\n        key: 'date',\n        order: 'ascending',\n      };\n\n      assert.deepEqual(\n        CollectionBase.sortFiles(files, sortConfig),\n        [files[1], files[2], files[0]]\n      );\n    });\n  });\n});\n"
  },
  {
    "__docId__": 308,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe3",
    "testId": 3,
    "memberof": "test/unit/collection/base.spec.js",
    "testDepth": 0,
    "longname": "test/unit/collection/base.spec.js~describe3",
    "access": null,
    "description": "collection/base CollectionBase",
    "lineNumber": 12
  },
  {
    "__docId__": 309,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe4",
    "testId": 4,
    "memberof": "test/unit/collection/base.spec.js~describe3",
    "testDepth": 1,
    "longname": "test/unit/collection/base.spec.js~describe3.describe4",
    "access": null,
    "description": "constructor",
    "lineNumber": 24
  },
  {
    "__docId__": 310,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it5",
    "testId": 5,
    "memberof": "test/unit/collection/base.spec.js~describe3.describe4",
    "testDepth": 2,
    "longname": "test/unit/collection/base.spec.js~describe3.describe4.it5",
    "access": null,
    "description": "throws when no collection name is given",
    "lineNumber": 25
  },
  {
    "__docId__": 311,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it6",
    "testId": 6,
    "memberof": "test/unit/collection/base.spec.js~describe3.describe4",
    "testDepth": 2,
    "longname": "test/unit/collection/base.spec.js~describe3.describe4.it6",
    "access": null,
    "description": "accepts a name and no config object",
    "lineNumber": 35
  },
  {
    "__docId__": 312,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe7",
    "testId": 7,
    "memberof": "test/unit/collection/base.spec.js~describe3",
    "testDepth": 1,
    "longname": "test/unit/collection/base.spec.js~describe3.describe7",
    "access": null,
    "description": "isFiltered",
    "lineNumber": 54
  },
  {
    "__docId__": 313,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it8",
    "testId": 8,
    "memberof": "test/unit/collection/base.spec.js~describe3.describe7",
    "testDepth": 2,
    "longname": "test/unit/collection/base.spec.js~describe3.describe7.it8",
    "access": null,
    "description": "returns if a file in collection is filtered",
    "lineNumber": 55
  },
  {
    "__docId__": 314,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe9",
    "testId": 9,
    "memberof": "test/unit/collection/base.spec.js~describe3",
    "testDepth": 1,
    "longname": "test/unit/collection/base.spec.js~describe3.describe9",
    "access": null,
    "description": "sortFiles",
    "lineNumber": 71
  },
  {
    "__docId__": 315,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it10",
    "testId": 10,
    "memberof": "test/unit/collection/base.spec.js~describe3.describe9",
    "testDepth": 2,
    "longname": "test/unit/collection/base.spec.js~describe3.describe9.it10",
    "access": null,
    "description": "sorts integer value descending",
    "lineNumber": 95
  },
  {
    "__docId__": 316,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it11",
    "testId": 11,
    "memberof": "test/unit/collection/base.spec.js~describe3.describe9",
    "testDepth": 2,
    "longname": "test/unit/collection/base.spec.js~describe3.describe9.it11",
    "access": null,
    "description": "sorts integer value ascending",
    "lineNumber": 107
  },
  {
    "__docId__": 317,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it12",
    "testId": 12,
    "memberof": "test/unit/collection/base.spec.js~describe3.describe9",
    "testDepth": 2,
    "longname": "test/unit/collection/base.spec.js~describe3.describe9.it12",
    "access": null,
    "description": "sorts date value descending",
    "lineNumber": 119
  },
  {
    "__docId__": 318,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it13",
    "testId": 13,
    "memberof": "test/unit/collection/base.spec.js~describe3.describe9",
    "testDepth": 2,
    "longname": "test/unit/collection/base.spec.js~describe3.describe9.it13",
    "access": null,
    "description": "sorts date value ascending",
    "lineNumber": 131
  },
  {
    "__docId__": 319,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/collection/index.spec.js",
    "memberof": null,
    "longname": "test/unit/collection/index.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\n\nimport FileSystemCollection from\n  '../../../lib/collection/type/file-system';\nimport MetadataCollection from '../../../lib/collection/type/metadata';\nimport {\n  createCollection,\n} from '../../../lib/collection/index';\n\ndescribe('collection/index', () => {\n  describe('create', () => {\n    it('creates the right Collection class', () => {\n      assert(createCollection('name', {\n      }) instanceof FileSystemCollection);\n\n      assert(createCollection('name', {\n        metadata: 'whee',\n      }) instanceof MetadataCollection);\n    });\n  });\n});\n"
  },
  {
    "__docId__": 320,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe14",
    "testId": 14,
    "memberof": "test/unit/collection/index.spec.js",
    "testDepth": 0,
    "longname": "test/unit/collection/index.spec.js~describe14",
    "access": null,
    "description": "collection/index",
    "lineNumber": 10
  },
  {
    "__docId__": 321,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe15",
    "testId": 15,
    "memberof": "test/unit/collection/index.spec.js~describe14",
    "testDepth": 1,
    "longname": "test/unit/collection/index.spec.js~describe14.describe15",
    "access": null,
    "description": "create",
    "lineNumber": 11
  },
  {
    "__docId__": 322,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it16",
    "testId": 16,
    "memberof": "test/unit/collection/index.spec.js~describe14.describe15",
    "testDepth": 2,
    "longname": "test/unit/collection/index.spec.js~describe14.describe15.it16",
    "access": null,
    "description": "creates the right Collection class",
    "lineNumber": 12
  },
  {
    "__docId__": 323,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/collection/page.spec.js",
    "memberof": null,
    "longname": "test/unit/collection/page.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport sinon from 'sinon';\n\nimport fixture from '../../fixture';\nimport {\n  createMockConfig,\n} from '../../utils';\n\nimport Url from '../../../lib/url';\n\nimport CollectionPage from '../../../lib/collection/page';\n\ndescribe('collection/page CollectionPage', () => {\n  const config = createMockConfig();\n  const getConfig = () => config;\n\n  let sandbox;\n  beforeEach(() => {\n    sandbox = sinon.sandbox.create();\n  });\n\n  afterEach(() => {\n    sandbox.restore();\n  });\n\n  const collectionPageData = {\n    page: 2,\n\n    // How many pages in the collection.\n    total_pages: 3,\n\n    // Posts displayed per page\n    per_page: 1,\n\n    // Total number of posts\n    total: 3,\n  };\n\n  describe('constructor', () => {\n    it('throws an error if it doesn\\'t get expected values', () => {\n      assert.throws(() => {\n        // eslint-disable-next-line no-new\n        new CollectionPage();\n      }, /ID as a string.$/);\n\n      assert.throws(() => {\n        // eslint-disable-next-line no-new\n        new CollectionPage('idHere');\n      }, /index.$/);\n    });\n\n    it('creates a unique id', () => {\n      const id = 'idHere';\n      const index = 4;\n\n      const instance = new CollectionPage(id, index);\n\n      assert.equal(instance.id, `${id}:${index}`);\n      assert.equal(instance.collectionId, id);\n      assert.equal(instance.index, index);\n      assert.equal(instance.data.page, index + 1);\n    });\n  });\n\n  describe('setData', () => {\n    it('saves passed in values', () => {\n      const data = collectionPageData;\n      const files = fixture.collectionFiles();\n\n      const instance = new CollectionPage('id', 2);\n      instance.setGetConfig(getConfig);\n      instance.permalink = 'ok';\n\n      instance.setData(data);\n      instance.setFiles(files);\n\n      data.files = files.map(file => file.data);\n      data.url = Url.makePretty(Url.makeUrlFileSystemSafe(instance.permalink));\n\n      assert.deepEqual(instance.data, data);\n    });\n  });\n});\n"
  },
  {
    "__docId__": 324,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe17",
    "testId": 17,
    "memberof": "test/unit/collection/page.spec.js",
    "testDepth": 0,
    "longname": "test/unit/collection/page.spec.js~describe17",
    "access": null,
    "description": "collection/page CollectionPage",
    "lineNumber": 13
  },
  {
    "__docId__": 325,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe18",
    "testId": 18,
    "memberof": "test/unit/collection/page.spec.js~describe17",
    "testDepth": 1,
    "longname": "test/unit/collection/page.spec.js~describe17.describe18",
    "access": null,
    "description": "constructor",
    "lineNumber": 39
  },
  {
    "__docId__": 326,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it19",
    "testId": 19,
    "memberof": "test/unit/collection/page.spec.js~describe17.describe18",
    "testDepth": 2,
    "longname": "test/unit/collection/page.spec.js~describe17.describe18.it19",
    "access": null,
    "description": "throws an error if it doesn't get expected values",
    "lineNumber": 40
  },
  {
    "__docId__": 327,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it20",
    "testId": 20,
    "memberof": "test/unit/collection/page.spec.js~describe17.describe18",
    "testDepth": 2,
    "longname": "test/unit/collection/page.spec.js~describe17.describe18.it20",
    "access": null,
    "description": "creates a unique id",
    "lineNumber": 52
  },
  {
    "__docId__": 328,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe21",
    "testId": 21,
    "memberof": "test/unit/collection/page.spec.js~describe17",
    "testDepth": 1,
    "longname": "test/unit/collection/page.spec.js~describe17.describe21",
    "access": null,
    "description": "setData",
    "lineNumber": 65
  },
  {
    "__docId__": 329,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it22",
    "testId": 22,
    "memberof": "test/unit/collection/page.spec.js~describe17.describe21",
    "testDepth": 2,
    "longname": "test/unit/collection/page.spec.js~describe17.describe21.it22",
    "access": null,
    "description": "saves passed in values",
    "lineNumber": 66
  },
  {
    "__docId__": 330,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/collection/type/file-system.spec.js",
    "memberof": null,
    "longname": "test/unit/collection/type/file-system.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport sinon from 'sinon';\nimport _ from 'lodash';\n\nimport fixture from '../../../fixture';\nimport {\n  createMockConfig,\n} from '../../../utils';\n\nimport Plugin from '../../../../lib/plugin/index';\nimport CollectionPage from '../../../../lib/collection/page';\n\nimport CollectionBase from '../../../../lib/collection/base';\nimport FileSystemCollection\n  from '../../../../lib/collection/type/file-system';\n\ndescribe('collection/type/file-system FileSystemCollection', () => {\n  const config = createMockConfig();\n  const getConfig = () => config;\n\n  let sandbox;\n  beforeEach(() => {\n    sandbox = sinon.sandbox.create();\n\n    Plugin.eventHandler._reset();\n  });\n\n  afterEach(() => {\n    sandbox.restore();\n  });\n\n  describe('_isFileInCollection', () => {\n    it('is false if file\\'s path is not within collection\\'s path', () => {\n      const path = 'my/file/path';\n      const instance = new FileSystemCollection('name');\n      instance.path = path;\n\n      let file = {\n        path: 'my/file',\n      };\n\n      assert.equal(instance._isFileInCollection(file), false);\n\n      file = {\n        path: 'my/file/pat',\n      };\n\n      assert.equal(instance._isFileInCollection(file), false);\n\n      file = {\n        path: 'your/file/path/is/close',\n      };\n\n      assert.equal(instance._isFileInCollection(file), false);\n    });\n\n    it('is true if file\\'s path includes collection\\'s path', () => {\n      const path = 'my/file/path';\n      const instance = new FileSystemCollection('name');\n      instance.path = path;\n      sinon.stub(instance, '_isFileExcluded').returns(false);\n\n      let file = {\n        path: 'my/file/path',\n      };\n\n      assert.equal(instance._isFileInCollection(file), true);\n\n      file = {\n        path: 'my/file/path/is/deeper',\n      };\n\n      assert.equal(instance._isFileInCollection(file), true);\n    });\n\n    it('is false if file\\'s path is excluded from collection', () => {\n      const path = 'my/file/path';\n      const instance = new FileSystemCollection('name');\n      instance.path = path;\n      sinon.stub(instance, '_isFileExcluded').returns(true);\n\n      let file = {\n        path: 'my/file/path',\n      };\n\n      assert.equal(instance._isFileInCollection(file), false);\n\n      file = {\n        path: 'my/file/path/is/deeper',\n      };\n\n      assert.equal(instance._isFileInCollection(file), false);\n    });\n  });\n\n  describe('populate', () => {\n    it('adds files to collection', () => {\n      const instance = new FileSystemCollection('name');\n      instance.path = 'ok';\n      instance.permalink = '/my/:permalink';\n      sinon.spy(instance, 'addFile');\n      sinon.stub(instance, 'createCollectionPages').returns(sinon.spy());\n      sinon.stub(instance, '_isFileInCollection').returns(true);\n      sandbox.spy(CollectionBase, 'sortFiles');\n      assert(_.isObject(instance.files));\n\n      const files = fixture.collectionFiles();\n      assert.deepEqual(instance.populate(files), instance);\n      assert.equal(instance.addFile.callCount, 3);\n      assert.equal(instance.createCollectionPages.calledOnce, true);\n      assert.equal(CollectionBase.sortFiles.calledOnce, false);\n      assert(_.isUndefined(instance.metadataFiles));\n\n      files.forEach((file, index) => {\n        assert.equal(file.data, instance.data.files[index]);\n      });\n    });\n\n    it('does not add files to collection', () => {\n      const instance = new FileSystemCollection('name');\n      instance.path = 'ok';\n      instance.permalink = '/my/:permalink';\n      sinon.spy(instance, 'addFile');\n      sinon.stub(instance, 'createCollectionPages').returns(sinon.spy());\n      sinon.stub(instance, '_isFileInCollection').returns(false);\n      sandbox.spy(CollectionBase, 'sortFiles');\n      assert(_.isObject(instance.files));\n\n      const files = fixture.collectionFiles();\n      assert.deepEqual(instance.populate(files), instance);\n      assert.equal(instance.addFile.callCount, 3);\n      assert.equal(instance.createCollectionPages.calledOnce, true);\n      assert.equal(CollectionBase.sortFiles.calledOnce, false);\n\n      files.forEach((file) => {\n        assert(_.isUndefined(file.permalink));\n      });\n\n      assert(_.isUndefined(instance.metadataFiles));\n      assert.equal(_.isEmpty(instance.files), true);\n\n      assert(_.isArray(instance.data.files));\n      assert.equal(instance.data.files.length, 0);\n    });\n  });\n\n  describe('createCollectionPages', () => {\n    it('adds files to collectionPages', () => {\n      const pageSize = 1;\n\n      const instance = new FileSystemCollection('name', undefined, getConfig);\n      const filesArray = fixture.collectionFiles();\n      filesArray.forEach((file, index) => {\n        instance.files[index] = file;\n      });\n      instance.pageSize = pageSize;\n      instance.permalink = {};\n      instance.permalink.index = 'index.html';\n      instance.permalink.page = '/page.html';\n      sinon.spy(instance, 'createPage');\n      sinon.spy(instance, '_linkPages');\n      sandbox.spy(CollectionBase, 'sortFiles');\n      assert.equal(instance.pages.length, 0);\n\n      assert.equal(instance.createCollectionPages(), true);\n\n      assert.equal(instance.pages.length, 3);\n      assert.equal(instance.createPage.callCount, 3);\n      assert.equal(instance._linkPages.calledOnce, true);\n      assert.equal(CollectionBase.sortFiles.calledOnce, true);\n\n      instance.pages.forEach((page, index) => {\n        assert(page instanceof CollectionPage);\n        assert.deepEqual(page.data.files, [instance.files[index].data]);\n\n        const expectedPermalink = index === 0 ?\n          instance.permalink.index :\n          instance.permalink.page;\n\n        assert.equal(page.permalink, expectedPermalink);\n\n        assert.equal(page.data.total_pages, filesArray.length / pageSize);\n        assert.equal(page.data.per_page, pageSize);\n        assert.equal(page.data.total, filesArray.length);\n\n        if (index === 0) {\n          assert(_.isUndefined(page.data.prev));\n          assert(_.isUndefined(page.data.prev_link));\n        } else {\n          const previous = instance.pages[index - 1];\n          assert.equal(page.data.prev, previous.data.page);\n          assert.equal(page.data.prev_link, previous.data.url);\n        }\n\n        if (index === (instance.pages.length - 1)) {\n          assert(_.isUndefined(page.data.next));\n          assert(_.isUndefined(page.data.next_link));\n        } else {\n          const next = instance.pages[index + 1];\n          assert.equal(page.data.next, next.data.page);\n          assert.equal(page.data.next_link, next.data.url);\n        }\n\n        assert.deepEqual(instance.data.pages[index], page.data);\n      });\n    });\n  });\n\n  describe('createCollectionPages', () => {\n    it('returns early if no pagination permalinks are set', () => {\n      sandbox.spy(CollectionBase, 'sortFiles');\n      const instance = new FileSystemCollection('name');\n      assert.equal(instance.createCollectionPages(), false);\n\n      instance.permalink = {};\n      instance.permalink.index = 'index.html';\n      instance.permalink.page = undefined;\n      assert.equal(instance.createCollectionPages(), false);\n      assert.equal(CollectionBase.sortFiles.calledOnce, false);\n\n      instance.permalink.index = undefined;\n      instance.permalink.page = '/page.html';\n      assert.equal(instance.createCollectionPages(), false);\n      assert.equal(CollectionBase.sortFiles.calledOnce, false);\n    });\n  });\n\n  describe('_setExcludePaths', () => {\n    const excludeCollections = [\n      {\n        path: '/my/path',\n      },\n      {\n        path: 'your/path',\n      },\n    ];\n\n    const excludePaths = excludeCollections.map(coll => coll.path);\n\n    it('can set exclude paths', () => {\n      const instance = new FileSystemCollection('name', undefined, getConfig);\n      assert(_.isUndefined(instance.path));\n      assert(_.isArray(instance.excludePaths));\n      assert.equal(instance.excludePaths.length, 0);\n\n      instance._setExcludePaths(Array.from(excludeCollections));\n      assert.deepEqual(instance.excludePaths, excludePaths);\n    });\n\n    it('does not add its own path to the exclude path array', () => {\n      const instance = new FileSystemCollection('name', undefined, getConfig);\n      instance.path = excludePaths[0];\n      assert(_.isArray(instance.excludePaths));\n      assert.equal(instance.excludePaths.length, 0);\n\n      instance._setExcludePaths(Array.from(excludeCollections));\n      assert.deepEqual(instance.excludePaths, [excludePaths[1]]);\n    });\n  });\n\n  describe('_isFileExcluded', () => {\n    it('is false when FileSystemCollection has no path', () => {\n      const instance = new FileSystemCollection('name');\n      assert(_.isUndefined(instance.path));\n\n      assert.equal(instance._isFileExcluded(), false);\n      assert.equal(instance._isFileExcluded({}), false);\n    });\n\n    it('is false when FileSystemCollection has metadata', () => {\n      const instance = new FileSystemCollection('name');\n      instance.metadata = 'dummy/path';\n      instance.metadata = 'fixture.collectionMetadataKey';\n\n      assert.equal(instance._isFileExcluded(), false);\n      assert.equal(instance._isFileExcluded({}), false);\n      assert.equal(instance._isFileExcluded({}), false);\n    });\n\n    it('is false when no excludePaths are set', () => {\n      const instance = new FileSystemCollection('name');\n      instance.path = '/dummy/path';\n      assert(_.isArray(instance.excludePaths));\n      assert.equal(instance.excludePaths.length, 0);\n\n      assert.equal(instance._isFileExcluded(), false);\n      assert.equal(instance._isFileExcluded({}), false);\n\n      instance.excludePaths = [];\n\n      assert.equal(instance._isFileExcluded(), false);\n      assert.equal(instance._isFileExcluded({}), false);\n    });\n\n    it('is true if the file path is contained in our excludePaths', () => {\n      const path = '/dummy/path';\n      const instance = new FileSystemCollection('name');\n      instance.path = path;\n      instance.excludePaths = [\n        'another/path',\n        path,\n      ];\n\n      const file = {\n        path: `a/long${path}`,\n      };\n\n      assert.equal(instance._isFileExcluded(file), true);\n    });\n\n    it('is false if the file path is not in our excludePaths', () => {\n      const path = '/dummy/path';\n      const instance = new FileSystemCollection('name');\n      instance.path = path;\n      instance.excludePaths = [\n        'another/path',\n        path,\n      ];\n\n      const file = {\n        path: 'a/long/time/ago',\n      };\n\n      assert.equal(instance._isFileExcluded(file), false);\n    });\n  });\n});\n"
  },
  {
    "__docId__": 331,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe23",
    "testId": 23,
    "memberof": "test/unit/collection/type/file-system.spec.js",
    "testDepth": 0,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23",
    "access": null,
    "description": "collection/type/file-system FileSystemCollection",
    "lineNumber": 17
  },
  {
    "__docId__": 332,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe24",
    "testId": 24,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23",
    "testDepth": 1,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe24",
    "access": null,
    "description": "_isFileInCollection",
    "lineNumber": 32
  },
  {
    "__docId__": 333,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it25",
    "testId": 25,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe24",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe24.it25",
    "access": null,
    "description": "is false if file's path is not within collection's path",
    "lineNumber": 33
  },
  {
    "__docId__": 334,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it26",
    "testId": 26,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe24",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe24.it26",
    "access": null,
    "description": "is true if file's path includes collection's path",
    "lineNumber": 57
  },
  {
    "__docId__": 335,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it27",
    "testId": 27,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe24",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe24.it27",
    "access": null,
    "description": "is false if file's path is excluded from collection",
    "lineNumber": 76
  },
  {
    "__docId__": 336,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe28",
    "testId": 28,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23",
    "testDepth": 1,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe28",
    "access": null,
    "description": "populate",
    "lineNumber": 96
  },
  {
    "__docId__": 337,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it29",
    "testId": 29,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe28",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe28.it29",
    "access": null,
    "description": "adds files to collection",
    "lineNumber": 97
  },
  {
    "__docId__": 338,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it30",
    "testId": 30,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe28",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe28.it30",
    "access": null,
    "description": "does not add files to collection",
    "lineNumber": 119
  },
  {
    "__docId__": 339,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe31",
    "testId": 31,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23",
    "testDepth": 1,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe31",
    "access": null,
    "description": "createCollectionPages",
    "lineNumber": 147
  },
  {
    "__docId__": 340,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it32",
    "testId": 32,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe31",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe31.it32",
    "access": null,
    "description": "adds files to collectionPages",
    "lineNumber": 148
  },
  {
    "__docId__": 341,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe33",
    "testId": 33,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23",
    "testDepth": 1,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe33",
    "access": null,
    "description": "createCollectionPages",
    "lineNumber": 209
  },
  {
    "__docId__": 342,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it34",
    "testId": 34,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe33",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe33.it34",
    "access": null,
    "description": "returns early if no pagination permalinks are set",
    "lineNumber": 210
  },
  {
    "__docId__": 343,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe35",
    "testId": 35,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23",
    "testDepth": 1,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe35",
    "access": null,
    "description": "_setExcludePaths",
    "lineNumber": 228
  },
  {
    "__docId__": 344,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it36",
    "testId": 36,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe35",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe35.it36",
    "access": null,
    "description": "can set exclude paths",
    "lineNumber": 240
  },
  {
    "__docId__": 345,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it37",
    "testId": 37,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe35",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe35.it37",
    "access": null,
    "description": "does not add its own path to the exclude path array",
    "lineNumber": 250
  },
  {
    "__docId__": 346,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe38",
    "testId": 38,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23",
    "testDepth": 1,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe38",
    "access": null,
    "description": "_isFileExcluded",
    "lineNumber": 261
  },
  {
    "__docId__": 347,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it39",
    "testId": 39,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe38",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe38.it39",
    "access": null,
    "description": "is false when FileSystemCollection has no path",
    "lineNumber": 262
  },
  {
    "__docId__": 348,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it40",
    "testId": 40,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe38",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe38.it40",
    "access": null,
    "description": "is false when FileSystemCollection has metadata",
    "lineNumber": 270
  },
  {
    "__docId__": 349,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it41",
    "testId": 41,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe38",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe38.it41",
    "access": null,
    "description": "is false when no excludePaths are set",
    "lineNumber": 280
  },
  {
    "__docId__": 350,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it42",
    "testId": 42,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe38",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe38.it42",
    "access": null,
    "description": "is true if the file path is contained in our excludePaths",
    "lineNumber": 295
  },
  {
    "__docId__": 351,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it43",
    "testId": 43,
    "memberof": "test/unit/collection/type/file-system.spec.js~describe23.describe38",
    "testDepth": 2,
    "longname": "test/unit/collection/type/file-system.spec.js~describe23.describe38.it43",
    "access": null,
    "description": "is false if the file path is not in our excludePaths",
    "lineNumber": 311
  },
  {
    "__docId__": 352,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/collection/type/metadata.spec.js",
    "memberof": null,
    "longname": "test/unit/collection/type/metadata.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport sinon from 'sinon';\nimport _ from 'lodash';\n\nimport fixture from '../../../fixture';\nimport {\n  createMockConfig,\n} from '../../../utils';\n\nimport Plugin from '../../../../lib/plugin/index';\nimport CollectionPage from '../../../../lib/collection/page';\n\nimport CollectionBase from '../../../../lib/collection/base';\nimport MetadataCollection from\n  '../../../../lib/collection/type/metadata';\n\ndescribe('collection/type/metadata MetadataCollection', () => {\n  const config = createMockConfig();\n  const getConfig = () => config;\n\n  let sandbox;\n  beforeEach(() => {\n    sandbox = sinon.sandbox.create();\n\n    Plugin.eventHandler._reset();\n  });\n\n  afterEach(() => {\n    sandbox.restore();\n  });\n\n  describe('_isFileInCollection', () => {\n    it('is false if file does not have collection\\'s metadata key', () => {\n      const instance = new MetadataCollection('name');\n      instance.metadata = 'soMeta';\n\n      const file = {\n        data: {},\n      };\n\n      file.data.someMeta = 'ok';\n      assert.equal(instance._isFileInCollection(file), false);\n\n      file.data[instance.metadata] = undefined;\n      assert.equal(instance._isFileInCollection(file), false);\n    });\n\n    it('is true if file has collection\\'s metadata key', () => {\n      const instance = new MetadataCollection('name');\n      instance.metadata = 'soMeta';\n\n      const file = {\n        data: {},\n      };\n\n      file.data[instance.metadata] = null;\n      assert.equal(instance._isFileInCollection(file), true);\n\n      file.data[instance.metadata] = '';\n      assert.equal(instance._isFileInCollection(file), true);\n\n      file.data[instance.metadata] = [];\n      assert.equal(instance._isFileInCollection(file), true);\n    });\n  });\n\n  describe('populate', () => {\n    it('adds files to collection', () => {\n      const instance = new MetadataCollection('name');\n      instance.metadata = fixture.collectionMetadataKey;\n      sinon.stub(instance, 'createCollectionPages').returns(sinon.spy());\n      sinon.stub(instance, '_isFileInCollection').returns(true);\n      sandbox.spy(CollectionBase, 'sortFiles');\n      assert(_.isUndefined(instance.files));\n      assert(_.isEmpty(instance.metadataFiles));\n\n      const files = fixture.collectionFiles();\n      assert.deepEqual(instance.populate(files), instance);\n      assert.equal(instance.createCollectionPages.calledOnce, true);\n      assert.equal(CollectionBase.sortFiles.called, false);\n\n      assert(_.isUndefined(instance.files));\n      assert(typeof instance.metadataFiles === 'object');\n\n      assert.equal(\n        Object.keys(instance.metadataFiles).length,\n        files.length\n      );\n\n      assert.equal(instance.metadataFiles['norman'].length, 2);\n      assert.equal(instance.metadataFiles['rockwell'].length, 1);\n      assert.equal(instance.metadataFiles['null'].length, 1);\n\n      assert(_.isEqual(\n        instance.metadataFiles['norman'],\n        [files[0], files[1]]\n      ));\n\n      assert(_.isEqual(\n        Object.keys(instance.metadataFiles),\n        Object.keys(instance.data.metadata)\n      ));\n    });\n\n    it('does not add files to collection', () => {\n      const instance = new MetadataCollection('name');\n      instance.metadata = fixture.collectionMetadataKey;\n      sinon.stub(instance, 'createCollectionPages').returns(sinon.spy());\n      sinon.stub(instance, '_isFileInCollection').returns(false);\n      sandbox.spy(CollectionBase, 'sortFiles');\n      assert(_.isUndefined(instance.files));\n      assert(_.isEmpty(instance.metadataFiles));\n\n      const files = fixture.collectionFiles();\n      assert.deepEqual(instance.populate(files), instance);\n      assert.equal(instance.createCollectionPages.calledOnce, true);\n      assert.equal(CollectionBase.sortFiles.called, false);\n\n      assert(_.isUndefined(instance.files));\n      assert(typeof instance.metadataFiles === 'object');\n\n      assert.equal(\n        Object.keys(instance.metadataFiles).length,\n        0\n      );\n\n      assert.equal(\n        Object.keys(instance.data.metadata).length,\n        0\n      );\n    });\n  });\n\n\n  describe('createCollectionPages', () => {\n    it('returns early if no pagination permalinks are set', () => {\n      const instance = new MetadataCollection('name', undefined, getConfig);\n      assert.equal(instance.createCollectionPages(), false);\n\n      instance.permalink = {};\n      instance.permalink.index = 'index.html';\n      instance.permalink.page = undefined;\n      assert.equal(instance.createCollectionPages(), false);\n\n      instance.permalink.index = undefined;\n      instance.permalink.page = '/page.html';\n      assert.equal(instance.createCollectionPages(), false);\n    });\n\n    const pageSize = 1;\n    it('adds files to collectionPages', () => {\n      const files = fixture.collectionFiles();\n      const instance = new MetadataCollection('name', undefined, getConfig);\n      instance.metadata = fixture.collectionMetadataKey;\n      instance.permalink = {};\n      instance.pageSize = pageSize;\n      instance.permalink.index = 'index.html';\n      instance.permalink.page = '/page/:metadata/:page.html';\n      assert.equal(instance.pages.length, 0);\n      assert(_.isEmpty(instance.metadataFiles));\n      sinon.spy(instance, 'createCollectionPages');\n      sandbox.spy(CollectionBase, 'sortFiles');\n\n      // Use instance.populate so we have proper instance.metadataFiles\n      // structure.\n      instance.populate(files);\n      assert.ok(instance.createCollectionPages.returned(true));\n\n      assert(typeof instance.metadataFiles === 'object');\n      assert.equal(CollectionBase.sortFiles.callCount, 3);\n      assert.equal(instance.pages.length, 4);\n\n      instance.pages.forEach((page, realIndex) => {\n        // Since we have two files with same tag, they're in multiple pages.\n        // This if statement just moves the pointer so we're interacting with\n        // the right page data.\n        let index = realIndex;\n        let expectedPermalink = index === 0 ?\n          instance.permalink.index :\n          instance.permalink.page;\n        if (realIndex === 2) {\n          index = 0;\n          expectedPermalink = instance.permalink.index;\n        } else if (realIndex === 3) {\n          index = 0;\n          expectedPermalink = instance.permalink.index;\n        }\n\n        // eslint-disable-next-line no-shadow\n        const files = instance.metadataFiles[page.data.metadata];\n\n        assert(page instanceof CollectionPage);\n\n        assert.deepEqual(page.data.files, [files[index].data]);\n\n        assert.equal(page.permalink, expectedPermalink);\n        assert.equal(page.data.total_pages, files.length / pageSize);\n        assert.equal(page.data.per_page, pageSize);\n        assert.equal(page.data.total, files.length);\n\n        if (index === 0) {\n          assert(_.isUndefined(page.data.prev));\n          assert(_.isUndefined(page.data.prev_link));\n        } else {\n          assert(_.isUndefined(page.data.next));\n          assert(_.isUndefined(page.data.next_link));\n\n          const previous = instance.pages[index - 1];\n          assert.equal(page.data.prev, previous.data.page);\n          assert.equal(page.data.prev_link, previous.data.url);\n\n          assert(_.isUndefined(page.data.next));\n          assert(_.isUndefined(page.data.next_link));\n        }\n\n        assert.deepEqual(instance.data.pages[realIndex], page.data);\n      });\n    });\n  });\n});\n"
  },
  {
    "__docId__": 353,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe44",
    "testId": 44,
    "memberof": "test/unit/collection/type/metadata.spec.js",
    "testDepth": 0,
    "longname": "test/unit/collection/type/metadata.spec.js~describe44",
    "access": null,
    "description": "collection/type/metadata MetadataCollection",
    "lineNumber": 17
  },
  {
    "__docId__": 354,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe45",
    "testId": 45,
    "memberof": "test/unit/collection/type/metadata.spec.js~describe44",
    "testDepth": 1,
    "longname": "test/unit/collection/type/metadata.spec.js~describe44.describe45",
    "access": null,
    "description": "_isFileInCollection",
    "lineNumber": 32
  },
  {
    "__docId__": 355,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it46",
    "testId": 46,
    "memberof": "test/unit/collection/type/metadata.spec.js~describe44.describe45",
    "testDepth": 2,
    "longname": "test/unit/collection/type/metadata.spec.js~describe44.describe45.it46",
    "access": null,
    "description": "is false if file does not have collection's metadata key",
    "lineNumber": 33
  },
  {
    "__docId__": 356,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it47",
    "testId": 47,
    "memberof": "test/unit/collection/type/metadata.spec.js~describe44.describe45",
    "testDepth": 2,
    "longname": "test/unit/collection/type/metadata.spec.js~describe44.describe45.it47",
    "access": null,
    "description": "is true if file has collection's metadata key",
    "lineNumber": 48
  },
  {
    "__docId__": 357,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe48",
    "testId": 48,
    "memberof": "test/unit/collection/type/metadata.spec.js~describe44",
    "testDepth": 1,
    "longname": "test/unit/collection/type/metadata.spec.js~describe44.describe48",
    "access": null,
    "description": "populate",
    "lineNumber": 67
  },
  {
    "__docId__": 358,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it49",
    "testId": 49,
    "memberof": "test/unit/collection/type/metadata.spec.js~describe44.describe48",
    "testDepth": 2,
    "longname": "test/unit/collection/type/metadata.spec.js~describe44.describe48.it49",
    "access": null,
    "description": "adds files to collection",
    "lineNumber": 68
  },
  {
    "__docId__": 359,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it50",
    "testId": 50,
    "memberof": "test/unit/collection/type/metadata.spec.js~describe44.describe48",
    "testDepth": 2,
    "longname": "test/unit/collection/type/metadata.spec.js~describe44.describe48.it50",
    "access": null,
    "description": "does not add files to collection",
    "lineNumber": 105
  },
  {
    "__docId__": 360,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe51",
    "testId": 51,
    "memberof": "test/unit/collection/type/metadata.spec.js~describe44",
    "testDepth": 1,
    "longname": "test/unit/collection/type/metadata.spec.js~describe44.describe51",
    "access": null,
    "description": "createCollectionPages",
    "lineNumber": 135
  },
  {
    "__docId__": 361,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it52",
    "testId": 52,
    "memberof": "test/unit/collection/type/metadata.spec.js~describe44.describe51",
    "testDepth": 2,
    "longname": "test/unit/collection/type/metadata.spec.js~describe44.describe51.it52",
    "access": null,
    "description": "returns early if no pagination permalinks are set",
    "lineNumber": 136
  },
  {
    "__docId__": 362,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it53",
    "testId": 53,
    "memberof": "test/unit/collection/type/metadata.spec.js~describe44.describe51",
    "testDepth": 2,
    "longname": "test/unit/collection/type/metadata.spec.js~describe44.describe51.it53",
    "access": null,
    "description": "adds files to collectionPages",
    "lineNumber": 151
  },
  {
    "__docId__": 363,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/config/index.spec.js",
    "memberof": null,
    "longname": "test/unit/config/index.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport rewire from 'rewire';\nimport sinon from 'sinon';\nimport path from 'path';\nimport _ from 'lodash';\n\nimport fixture from '../../fixture';\n\nconst ConfigRewire = rewire('../../../lib/config/index.js');\nconst Config = ConfigRewire.default;\n\ndescribe('config/index Config', () => {\n  let sandbox;\n  beforeEach(() => {\n    sandbox = sinon.sandbox.create();\n  });\n\n  afterEach(() => {\n    sandbox.restore();\n  });\n\n  describe('constructor', () => {\n    it('can create an instance', () => {\n      sandbox.spy(Config.prototype, 'update');\n\n      const instance = new Config('');\n\n      assert.ok(instance);\n      assert(typeof instance._raw === 'object');\n\n      assert(instance.update.calledOnce === false);\n    });\n  });\n\n  describe('update', () => {\n    let revert;\n\n    afterEach(() => {\n      if (_.isFunction(revert)) {\n        revert();\n        revert = null;\n      }\n    });\n\n    it('calculates paths correctly', () => {\n      const root = '/root/';\n\n      const instance = new Config('');\n      instance.root = root;\n\n      revert = ConfigRewire.__set__(\n        'loadAndParseYaml',\n        sinon.stub().returns(fixture.configDefault())\n      );\n\n      instance.update();\n\n      const expectedConfig = fixture.configDefault();\n\n      assert.equal(\n        instance._raw.path.source,\n        path.resolve(\n          root + expectedConfig.path.source\n        )\n      );\n\n      assert.equal(\n        instance._raw.path.destination,\n        path.resolve(\n          root + expectedConfig.path.source + expectedConfig.path.destination\n        )\n      );\n\n      assert.equal(\n        instance._raw.path.plugins,\n        path.resolve(\n          root + expectedConfig.path.source + expectedConfig.path.plugins\n        )\n      );\n\n      assert.equal(\n        instance._raw.path.themes,\n        path.resolve(\n          root + expectedConfig.path.source + expectedConfig.path.themes\n        )\n      );\n\n      _.each(instance.path, (val, key) => {\n        assert.equal(instance.path[key], instance._raw.path[key]);\n      });\n    });\n\n    it('throws when given an invalid config object', () => {\n      const root = '/root/';\n\n      const instance = new Config('');\n      instance.root = root;\n\n      const invalidConfigs = [\n        {\n          path: false,\n        },\n        {\n          site: 'Test',\n        },\n      ];\n\n      invalidConfigs.forEach((config) => {\n        revert = ConfigRewire.__set__(\n          'loadAndParseYaml',\n          sinon.stub().returns(config)\n        );\n\n        assert.throws(() => instance.update(), JSON.stringify(config));\n      });\n    });\n\n    it('sorts file defaults in correct precedence order', () => {\n      const root = '/root/';\n\n      const instance = new Config('');\n      instance.root = root;\n\n      const expectedFileDefaultsOrder = [\n        {\n          scope: {\n            metadata: {\n              foo: 'bar',\n            },\n          },\n          values: {},\n        },\n        {\n          scope: {\n            path: './',\n          },\n          values: {},\n        },\n        {\n          scope: {\n            path: './_posts/',\n          },\n          values: {},\n        },\n        {\n          scope: {\n            path: './_posts/',\n            metadata: {\n              foo: 'bar',\n            },\n          },\n          values: {},\n        },\n        {\n          scope: {\n            path: './_posts/',\n            metadata: {\n              draft: true,\n            },\n          },\n          values: {},\n        },\n        {\n          scope: {\n            path: './_posts/2016',\n          },\n          values: {},\n        },\n      ];\n\n      // Test 3 random orderings.\n      _.times(3, () => {\n        revert = ConfigRewire.__set__(\n          'loadAndParseYaml',\n          sinon.stub().returns({\n            ...fixture.configDefault(),\n            path: {\n              source: './',\n            },\n            file: {\n              defaults: _.shuffle(expectedFileDefaultsOrder),\n            },\n          })\n        );\n\n        instance.update();\n\n        instance.get('file.defaults').forEach((defaultObj, index) => {\n          // Ignore index 3 and 4 as they are sorted by the order in which\n          // they are given. They can be in either order depending on what\n          // the _.shuffle operation does.\n          // This is safe to ignore as everything else has a known expected\n          // order.\n          if (index === 3 || index === 4) {\n            return;\n          }\n\n          const expectedObj = _.cloneDeep(expectedFileDefaultsOrder[index]);\n          if (expectedObj.scope.path != null) {\n            expectedObj.scope.path = path.resolve(\n              root,\n              expectedObj.scope.path\n            );\n          }\n\n          assert.deepEqual(\n            defaultObj,\n            expectedObj\n          );\n        });\n      });\n    });\n  });\n});\n"
  },
  {
    "__docId__": 364,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe54",
    "testId": 54,
    "memberof": "test/unit/config/index.spec.js",
    "testDepth": 0,
    "longname": "test/unit/config/index.spec.js~describe54",
    "access": null,
    "description": "config/index Config",
    "lineNumber": 12
  },
  {
    "__docId__": 365,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe55",
    "testId": 55,
    "memberof": "test/unit/config/index.spec.js~describe54",
    "testDepth": 1,
    "longname": "test/unit/config/index.spec.js~describe54.describe55",
    "access": null,
    "description": "constructor",
    "lineNumber": 22
  },
  {
    "__docId__": 366,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it56",
    "testId": 56,
    "memberof": "test/unit/config/index.spec.js~describe54.describe55",
    "testDepth": 2,
    "longname": "test/unit/config/index.spec.js~describe54.describe55.it56",
    "access": null,
    "description": "can create an instance",
    "lineNumber": 23
  },
  {
    "__docId__": 367,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe57",
    "testId": 57,
    "memberof": "test/unit/config/index.spec.js~describe54",
    "testDepth": 1,
    "longname": "test/unit/config/index.spec.js~describe54.describe57",
    "access": null,
    "description": "update",
    "lineNumber": 35
  },
  {
    "__docId__": 368,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it58",
    "testId": 58,
    "memberof": "test/unit/config/index.spec.js~describe54.describe57",
    "testDepth": 2,
    "longname": "test/unit/config/index.spec.js~describe54.describe57.it58",
    "access": null,
    "description": "calculates paths correctly",
    "lineNumber": 45
  },
  {
    "__docId__": 369,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it59",
    "testId": 59,
    "memberof": "test/unit/config/index.spec.js~describe54.describe57",
    "testDepth": 2,
    "longname": "test/unit/config/index.spec.js~describe54.describe57.it59",
    "access": null,
    "description": "throws when given an invalid config object",
    "lineNumber": 93
  },
  {
    "__docId__": 370,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it60",
    "testId": 60,
    "memberof": "test/unit/config/index.spec.js~describe54.describe57",
    "testDepth": 2,
    "longname": "test/unit/config/index.spec.js~describe54.describe57.it60",
    "access": null,
    "description": "sorts file defaults in correct precedence order",
    "lineNumber": 118
  },
  {
    "__docId__": 371,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/data-files.spec.js",
    "memberof": null,
    "longname": "test/unit/data-files.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport path from 'path';\nimport DataFiles from '../../lib/data-files';\n\ndescribe('data-files DataFiles', () => {\n  describe('update', () => {\n    it('returns empty object when no data objects found', async () => {\n      const result = await DataFiles.update('foo');\n\n      assert.deepEqual(result, {});\n    });\n\n    it('works', async () => {\n      const dataPath = path.resolve(\n        __dirname,\n        '../fixtures/simple/_data'\n      );\n      const result = await DataFiles.update(dataPath);\n\n      assert.deepEqual(result, {\n        cities: [\n          {\n            name: 'New York City',\n            cuisine: 'bagel',\n          },\n          {\n            name: 'Los Angeles',\n            cuisine: 'kale',\n          },\n          {\n            name: 'New Orleans',\n            cuisine: 'beignets',\n          },\n        ],\n        friends: {\n          'angelica': {\n            name: 'Angelica',\n            birthday: 'May 12, 1988',\n          },\n          chuckie: {\n            name: 'Chuckie',\n            birthday: 'April 15, 1989',\n          },\n          tommy: {\n            name: 'Tommy',\n            birthday: 'June 11th, 1990',\n          },\n        },\n      });\n    });\n  });\n});\n"
  },
  {
    "__docId__": 372,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe61",
    "testId": 61,
    "memberof": "test/unit/data-files.spec.js",
    "testDepth": 0,
    "longname": "test/unit/data-files.spec.js~describe61",
    "access": null,
    "description": "data-files DataFiles",
    "lineNumber": 5
  },
  {
    "__docId__": 373,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe62",
    "testId": 62,
    "memberof": "test/unit/data-files.spec.js~describe61",
    "testDepth": 1,
    "longname": "test/unit/data-files.spec.js~describe61.describe62",
    "access": null,
    "description": "update",
    "lineNumber": 6
  },
  {
    "__docId__": 374,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it63",
    "testId": 63,
    "memberof": "test/unit/data-files.spec.js~describe61.describe62",
    "testDepth": 2,
    "longname": "test/unit/data-files.spec.js~describe61.describe62.it63",
    "access": null,
    "description": "returns empty object when no data objects found",
    "lineNumber": 7
  },
  {
    "__docId__": 375,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it64",
    "testId": 64,
    "memberof": "test/unit/data-files.spec.js~describe61.describe62",
    "testDepth": 2,
    "longname": "test/unit/data-files.spec.js~describe61.describe62.it64",
    "access": null,
    "description": "works",
    "lineNumber": 13
  },
  {
    "__docId__": 376,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/file.spec.js",
    "memberof": null,
    "longname": "test/unit/file.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import _ from 'lodash';\nimport assert from 'power-assert';\nimport path from 'path';\nimport sinon from 'sinon';\nimport fs from 'fs-extra';\n\nimport fixture from '../fixture';\nimport {\n  createMockConfig,\n} from '../utils';\n\nimport Url from '../../lib/url';\nimport Parse from '../../lib/parse';\nimport File from '../../lib/file';\nimport { createMarkdownEngine } from '../../lib/markdown';\n\ncreateMarkdownEngine();\n\ndescribe('file File', () => {\n  const filePath = '/fixture/_posts/hello-world.md';\n\n  let config;\n  let getConfig;\n\n  let sandbox;\n  beforeEach(() => {\n    config = createMockConfig();\n    getConfig = () => config;\n\n    sandbox = sinon.sandbox.create();\n\n    const readFileStub = (file, opts, cb) =>\n      cb(null, fixture.frontmatterString);\n\n    sandbox.stub(fs, 'readFile', readFileStub)\n      .withArgs(filePath, 'utf8');\n\n    sandbox.stub(Parse, 'fileHasFrontmatter').returns(true);\n  });\n\n  afterEach(() => {\n    sandbox.restore();\n  });\n\n  describe('constructor', () => {\n    it('can create an instance', async () => {\n      const instance = new File(filePath, getConfig);\n      await instance.update();\n\n      assert.ok(instance);\n\n      assert.equal(instance.path, filePath);\n      assert.equal(instance.id, filePath);\n      assert.ok(instance.checksum);\n      assert.ok(instance.data, fixture.frontmatterJSON.data);\n      assert.ok(instance.data.content, fixture.frontmatterJSON.content);\n    });\n\n    it('calculates destination path', async () => {\n      sandbox.spy(File.prototype, '_calculateDestination');\n\n      const instance = new File(filePath, getConfig);\n      await instance.update();\n\n      assert.ok(instance._calculateDestination.calledOnce);\n      assert.ok(instance.destination);\n    });\n  });\n\n  describe('default values from config', () => {\n    const defaults = [\n      {\n        scope: {\n          path: '',\n        },\n        values: {\n          post: false,\n        },\n      },\n      {\n        scope: {\n          path: '_posts',\n          metadata: {\n            draft: false,\n          },\n        },\n        values: {\n          post: true,\n          layout: 'post',\n        },\n      },\n      {\n        scope: {\n          path: '_posts/2016',\n        },\n        values: {\n          newAge: true,\n        },\n      },\n    ];\n    // eslint-disable-next-line no-shadow\n    const config = createMockConfig({\n      file: {\n        defaults,\n      },\n    });\n    // eslint-disable-next-line no-shadow\n    const getConfig = () => config;\n\n    function createFile(filePathParts, additionalFrontmatter = {}) {\n      return async () => {\n        sandbox.restore();\n\n        // eslint-disable-next-line no-shadow\n        const filePath = path.join(config.get('path.source'), ...filePathParts);\n\n        const readFileStub = (file, opts, cb) =>\n          cb(null, fixture.frontmatterString);\n\n        sandbox.stub(fs, 'readFile', readFileStub)\n          .withArgs(filePath, 'utf8');\n        sandbox.stub(Parse, 'fileHasFrontmatter').returns(true);\n\n        const instance = new File(filePath, getConfig);\n        await instance.update();\n        _.extend(instance.frontmatter, additionalFrontmatter);\n        instance.defaults = instance._gatherDefaults();\n        // Mimic internal File.update behavior to copy over data.\n        _.merge(instance.data, instance.defaults, instance.frontmatter);\n\n        return instance;\n      };\n    }\n\n    it('applies default values that match', () => {\n      const promises = [\n        [\n          createFile(['..', 'test.md']),\n          {},\n        ],\n        [\n          createFile(['_posts', 'hello-world.md'], {\n            draft: true,\n          }),\n          _.defaults(\n            defaults[0].values\n          ),\n        ],\n        [\n          createFile(['_posts', 'hello-world.md'], {\n            draft: false,\n          }),\n          _.defaults(\n            defaults[1].values,\n            defaults[0].values\n          ),\n        ],\n        [\n          createFile(['_posts', '2016', 'its-me-again.md'], {\n            draft: false,\n            pleasant: 'dreams',\n          }),\n          _.defaults(\n            defaults[2].values,\n            defaults[1].values,\n            defaults[0].values\n          ),\n        ],\n      ].map(async ([creator, expectedValue]) => {\n        const instance = await creator();\n        assert.deepEqual(instance.defaults, expectedValue);\n        assert.ok(_.isMatch(instance.data, instance.frontmatter));\n\n        // Make sure that for every expected default it should at least exist\n        // as a property on the data object. The value might be different\n        // depending if it is over-written but it should exist.\n        Object.keys(expectedValue).forEach((expectedKey) => {\n          assert.ok(instance.data[expectedKey] != null);\n        });\n      });\n\n      return Promise.all(promises);\n    });\n  });\n\n  describe('_calculateDestination', () => {\n    it('allows custom file url property', async () => {\n      const permalinkValue = 'whee';\n      const instance = new File(filePath, getConfig);\n      await instance.update();\n\n      // Should use filePath when no file url or permalink is et.\n      assert.equal(instance.data.url, Url.makePretty(\n        Url.makeUrlFileSystemSafe(\n          Url.replaceMarkdownExtension(\n            filePath,\n            instance._getConfig().get('markdown.extensions')\n          )\n        )\n      ));\n      assert.equal(instance.url, undefined);\n\n      // Should use permalink value when no url is set.\n      instance.data.permalink = permalinkValue;\n      instance._calculateDestination();\n      assert.equal(instance.data.url, Url.makePretty(\n        Url.makeUrlFileSystemSafe(permalinkValue)\n      ));\n      assert.equal(instance.url, undefined);\n\n      // Should use File url if set.\n      const customPermalinkValue = 'customPermalinkValue';\n      instance.frontmatter.url = customPermalinkValue;\n      instance.data.permalink = permalinkValue;\n      instance._calculateDestination();\n      assert.equal(instance.data.url, Url.makePretty(\n        Url.makeUrlFileSystemSafe(customPermalinkValue)\n      ));\n      assert.equal(instance.frontmatter.url, customPermalinkValue);\n    });\n  });\n\n  it('has all proper values on its data object', async () => {\n    const instance = new File(filePath, getConfig);\n    await instance.update();\n\n    assert.strictEqual(instance.url, undefined);\n    assert.equal(instance.data.url, Url.makePretty(\n      Url.makeUrlFileSystemSafe(\n        Url.replaceMarkdownExtension(\n          filePath,\n          instance._getConfig().get('markdown.extensions')\n        )\n      )\n    ));\n\n    const permalink = 'whee';\n    instance.data.permalink = permalink;\n    instance._calculateDestination();\n\n    assert.deepEqual(instance.data, {\n      content: fixture.frontmatterJSON.content,\n      ...fixture.frontmatterJSON.data,\n      permalink,\n      url: Url.makePretty(\n        Url.makeUrlFileSystemSafe(instance.data.permalink)\n      ),\n    });\n  });\n\n  describe('filtered', () => {\n    it('set correctly', async () => {\n      const instance = new File(filePath, getConfig);\n\n      await instance.update();\n      assert.equal(instance.filtered, false);\n\n      config._raw.file.filters = {\n        metadata: {\n          draft: false,\n        },\n      };\n      await instance.update();\n      assert.equal(instance.filtered, false);\n\n      config._raw.file.filters = {\n        metadata: {\n          draft: true,\n        },\n      };\n      await instance.update();\n      assert.equal(instance.filtered, true);\n\n      config._raw.file.filters = {\n        future_date: {\n          key: 'draft',\n        },\n      };\n      await instance.update();\n      assert.equal(instance.filtered, false);\n\n      config._raw.file.filters = {\n        future_date: {\n          key: 'future_date',\n        },\n      };\n      await instance.update();\n      assert.equal(instance.filtered, true);\n\n      config._raw.file.filters = {\n        future_date: {\n          key: 'date',\n        },\n      };\n      await instance.update();\n      assert.equal(instance.filtered, false);\n    });\n  });\n});\n"
  },
  {
    "__docId__": 377,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe65",
    "testId": 65,
    "memberof": "test/unit/file.spec.js",
    "testDepth": 0,
    "longname": "test/unit/file.spec.js~describe65",
    "access": null,
    "description": "file File",
    "lineNumber": 19
  },
  {
    "__docId__": 378,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe66",
    "testId": 66,
    "memberof": "test/unit/file.spec.js~describe65",
    "testDepth": 1,
    "longname": "test/unit/file.spec.js~describe65.describe66",
    "access": null,
    "description": "constructor",
    "lineNumber": 45
  },
  {
    "__docId__": 379,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it67",
    "testId": 67,
    "memberof": "test/unit/file.spec.js~describe65.describe66",
    "testDepth": 2,
    "longname": "test/unit/file.spec.js~describe65.describe66.it67",
    "access": null,
    "description": "can create an instance",
    "lineNumber": 46
  },
  {
    "__docId__": 380,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it68",
    "testId": 68,
    "memberof": "test/unit/file.spec.js~describe65.describe66",
    "testDepth": 2,
    "longname": "test/unit/file.spec.js~describe65.describe66.it68",
    "access": null,
    "description": "calculates destination path",
    "lineNumber": 59
  },
  {
    "__docId__": 381,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe69",
    "testId": 69,
    "memberof": "test/unit/file.spec.js~describe65",
    "testDepth": 1,
    "longname": "test/unit/file.spec.js~describe65.describe69",
    "access": null,
    "description": "default values from config",
    "lineNumber": 70
  },
  {
    "__docId__": 382,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it70",
    "testId": 70,
    "memberof": "test/unit/file.spec.js~describe65.describe69",
    "testDepth": 2,
    "longname": "test/unit/file.spec.js~describe65.describe69.it70",
    "access": null,
    "description": "applies default values that match",
    "lineNumber": 135
  },
  {
    "__docId__": 383,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe71",
    "testId": 71,
    "memberof": "test/unit/file.spec.js~describe65",
    "testDepth": 1,
    "longname": "test/unit/file.spec.js~describe65.describe71",
    "access": null,
    "description": "_calculateDestination",
    "lineNumber": 186
  },
  {
    "__docId__": 384,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it72",
    "testId": 72,
    "memberof": "test/unit/file.spec.js~describe65.describe71",
    "testDepth": 2,
    "longname": "test/unit/file.spec.js~describe65.describe71.it72",
    "access": null,
    "description": "allows custom file url property",
    "lineNumber": 187
  },
  {
    "__docId__": 385,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it73",
    "testId": 73,
    "memberof": "test/unit/file.spec.js~describe65",
    "testDepth": 1,
    "longname": "test/unit/file.spec.js~describe65.it73",
    "access": null,
    "description": "has all proper values on its data object",
    "lineNumber": 223
  },
  {
    "__docId__": 386,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe74",
    "testId": 74,
    "memberof": "test/unit/file.spec.js~describe65",
    "testDepth": 1,
    "longname": "test/unit/file.spec.js~describe65.describe74",
    "access": null,
    "description": "filtered",
    "lineNumber": 251
  },
  {
    "__docId__": 387,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it75",
    "testId": 75,
    "memberof": "test/unit/file.spec.js~describe65.describe74",
    "testDepth": 2,
    "longname": "test/unit/file.spec.js~describe65.describe74.it75",
    "access": null,
    "description": "set correctly",
    "lineNumber": 252
  },
  {
    "__docId__": 388,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/filter/future-date.spec.js",
    "memberof": null,
    "longname": "test/unit/filter/future-date.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\n\nimport futureDate from '../../../lib/filter/future-date';\n\ndescribe('filter/future-date futureDate', () => {\n  it('should default to use date as key value', () => {\n    assert.equal(futureDate({\n      data: {\n        date: Date.now() - 1000,\n      },\n    }), false);\n\n    assert.equal(futureDate({\n      data: {\n        date: Date.now() + 1000,\n      },\n    }), true);\n\n    assert.equal(futureDate({\n      data: {\n        dateKey: Date.now() + 1000,\n      },\n    }), false);\n  });\n\n  it('should allow setting of what date key to use', () => {\n    assert.equal(futureDate({\n      data: {\n        whee: Date.now() - 1000,\n      },\n    }, { key: 'whee' }), false);\n\n    assert.equal(futureDate({\n      data: {\n        whee: Date.now() + 1000,\n      },\n    }, { key: 'whee' }), true);\n\n    assert.equal(futureDate({\n      data: {\n        date: Date.now() + 1000,\n      },\n    }, { key: 'whee' }), false);\n  });\n});\n"
  },
  {
    "__docId__": 389,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe76",
    "testId": 76,
    "memberof": "test/unit/filter/future-date.spec.js",
    "testDepth": 0,
    "longname": "test/unit/filter/future-date.spec.js~describe76",
    "access": null,
    "description": "filter/future-date futureDate",
    "lineNumber": 5
  },
  {
    "__docId__": 390,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it77",
    "testId": 77,
    "memberof": "test/unit/filter/future-date.spec.js~describe76",
    "testDepth": 1,
    "longname": "test/unit/filter/future-date.spec.js~describe76.it77",
    "access": null,
    "description": "should default to use date as key value",
    "lineNumber": 6
  },
  {
    "__docId__": 391,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it78",
    "testId": 78,
    "memberof": "test/unit/filter/future-date.spec.js~describe76",
    "testDepth": 1,
    "longname": "test/unit/filter/future-date.spec.js~describe76.it78",
    "access": null,
    "description": "should allow setting of what date key to use",
    "lineNumber": 26
  },
  {
    "__docId__": 392,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/filter/index.spec.js",
    "memberof": null,
    "longname": "test/unit/filter/index.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\n\nimport filter from '../../../lib/filter/index';\n\ndescribe('filter/index', () => {\n  const mockFile = {\n    data: {\n      date: '2017-2-28',\n      foo: 'bar',\n    },\n  };\n\n  describe('isFileFiltered', () => {\n    assert.equal(filter.isFileFiltered({}, mockFile), false);\n    assert.equal(filter.isFileFiltered({\n      future_date: {\n        key: 'foo',\n      },\n    }, mockFile), false);\n    assert.equal(filter.isFileFiltered({\n      future_date: {\n        key: 'date',\n      },\n    }, mockFile), true);\n    assert.equal(filter.isFileFiltered({\n      metadata: {\n        foo: 'date',\n      },\n    }, mockFile), false);\n    assert.equal(filter.isFileFiltered({\n      metadata: {\n        foo: 'bar',\n      },\n    }, mockFile), true);\n  });\n});\n"
  },
  {
    "__docId__": 393,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe79",
    "testId": 79,
    "memberof": "test/unit/filter/index.spec.js",
    "testDepth": 0,
    "longname": "test/unit/filter/index.spec.js~describe79",
    "access": null,
    "description": "filter/index",
    "lineNumber": 5
  },
  {
    "__docId__": 394,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe80",
    "testId": 80,
    "memberof": "test/unit/filter/index.spec.js~describe79",
    "testDepth": 1,
    "longname": "test/unit/filter/index.spec.js~describe79.describe80",
    "access": null,
    "description": "isFileFiltered",
    "lineNumber": 13
  },
  {
    "__docId__": 395,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/filter/metadata.spec.js",
    "memberof": null,
    "longname": "test/unit/filter/metadata.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\n\nimport metadata from '../../../lib/filter/metadata';\n\ndescribe('filter/metadata metadata', () => {\n  it('should return true when a match is found', () => {\n    assert.equal(metadata({\n      data: {\n        draft: true,\n        title: 'test',\n      },\n    }, {\n      draft: true,\n    }), true);\n\n    assert.equal(metadata({\n      data: {\n        draft: true,\n        title: 'test',\n      },\n    }, {\n      draft: true,\n      title: 'test',\n    }), true);\n\n    assert.equal(metadata({\n      data: {\n        draft: true,\n        title: 'test',\n        date: 'ok',\n      },\n    }, {\n      draft: true,\n      title: 'test',\n    }), true);\n  });\n\n  it('should return false when a match is not found', () => {\n    assert.equal(metadata({\n      data: {\n        draft: false,\n        title: 'test',\n      },\n    }, {\n      draft: true,\n    }), false);\n\n    assert.equal(metadata({\n      data: {\n        draft: true,\n      },\n    }, {\n      draft: true,\n      title: 'test',\n    }), false);\n\n    assert.equal(metadata({\n      data: {\n        draft: true,\n        title: 'surprise',\n      },\n    }, {\n      draft: true,\n      title: 'test',\n    }), false);\n\n    assert.equal(metadata({\n      data: {\n        draft: true,\n        title: 'surprise',\n        date: 'ok',\n      },\n    }, {\n      draft: true,\n      title: 'test',\n    }), false);\n  });\n});\n"
  },
  {
    "__docId__": 396,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe81",
    "testId": 81,
    "memberof": "test/unit/filter/metadata.spec.js",
    "testDepth": 0,
    "longname": "test/unit/filter/metadata.spec.js~describe81",
    "access": null,
    "description": "filter/metadata metadata",
    "lineNumber": 5
  },
  {
    "__docId__": 397,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it82",
    "testId": 82,
    "memberof": "test/unit/filter/metadata.spec.js~describe81",
    "testDepth": 1,
    "longname": "test/unit/filter/metadata.spec.js~describe81.it82",
    "access": null,
    "description": "should return true when a match is found",
    "lineNumber": 6
  },
  {
    "__docId__": 398,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it83",
    "testId": 83,
    "memberof": "test/unit/filter/metadata.spec.js~describe81",
    "testDepth": 1,
    "longname": "test/unit/filter/metadata.spec.js~describe81.it83",
    "access": null,
    "description": "should return false when a match is not found",
    "lineNumber": 38
  },
  {
    "__docId__": 399,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/json.spec.js",
    "memberof": null,
    "longname": "test/unit/json.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport path from 'path';\nimport _ from 'lodash';\nimport * as json from '../../lib/json';\n\ndescribe('json JSON', () => {\n  describe('getReptarPackageNames', () => {\n    it('returns the Reptar package names', () => {\n      const rootDir = path.resolve(__dirname, '../../');\n      const plugins = json.getReptarPackageNames(rootDir);\n\n      assert(_.isEqual(\n        Array.from(plugins),\n        ['reptar-excerpt', 'reptar-html-minifier']\n      ));\n    });\n  });\n});\n"
  },
  {
    "__docId__": 400,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe84",
    "testId": 84,
    "memberof": "test/unit/json.spec.js",
    "testDepth": 0,
    "longname": "test/unit/json.spec.js~describe84",
    "access": null,
    "description": "json JSON",
    "lineNumber": 6
  },
  {
    "__docId__": 401,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe85",
    "testId": 85,
    "memberof": "test/unit/json.spec.js~describe84",
    "testDepth": 1,
    "longname": "test/unit/json.spec.js~describe84.describe85",
    "access": null,
    "description": "getReptarPackageNames",
    "lineNumber": 7
  },
  {
    "__docId__": 402,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it86",
    "testId": 86,
    "memberof": "test/unit/json.spec.js~describe84.describe85",
    "testDepth": 2,
    "longname": "test/unit/json.spec.js~describe84.describe85.it86",
    "access": null,
    "description": "returns the Reptar package names",
    "lineNumber": 8
  },
  {
    "__docId__": 403,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/parse/front-matter.spec.js",
    "memberof": null,
    "longname": "test/unit/parse/front-matter.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport * as frontMatter from '../../../lib/parse/front-matter';\n\nimport fixture from '../../fixture';\n\ndescribe('parse/front-matter', () => {\n  describe('parse', () => {\n    it('correctly takes a string and produces a json object', () => {\n      assert.deepEqual(\n        frontMatter.parse(fixture.frontmatterString),\n        fixture.frontmatterJSON\n      );\n    });\n  });\n\n  describe('stringify', () => {\n    it('correctly takes json object and produces a string', () => {\n      assert.equal(\n        frontMatter.stringify(\n          fixture.frontmatterJSON.content,\n          fixture.frontmatterJSON.data\n        ),\n        `${fixture.frontmatterString}\\n`\n      );\n    });\n  });\n});\n"
  },
  {
    "__docId__": 404,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe87",
    "testId": 87,
    "memberof": "test/unit/parse/front-matter.spec.js",
    "testDepth": 0,
    "longname": "test/unit/parse/front-matter.spec.js~describe87",
    "access": null,
    "description": "parse/front-matter",
    "lineNumber": 6
  },
  {
    "__docId__": 405,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe88",
    "testId": 88,
    "memberof": "test/unit/parse/front-matter.spec.js~describe87",
    "testDepth": 1,
    "longname": "test/unit/parse/front-matter.spec.js~describe87.describe88",
    "access": null,
    "description": "parse",
    "lineNumber": 7
  },
  {
    "__docId__": 406,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it89",
    "testId": 89,
    "memberof": "test/unit/parse/front-matter.spec.js~describe87.describe88",
    "testDepth": 2,
    "longname": "test/unit/parse/front-matter.spec.js~describe87.describe88.it89",
    "access": null,
    "description": "correctly takes a string and produces a json object",
    "lineNumber": 8
  },
  {
    "__docId__": 407,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe90",
    "testId": 90,
    "memberof": "test/unit/parse/front-matter.spec.js~describe87",
    "testDepth": 1,
    "longname": "test/unit/parse/front-matter.spec.js~describe87.describe90",
    "access": null,
    "description": "stringify",
    "lineNumber": 16
  },
  {
    "__docId__": 408,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it91",
    "testId": 91,
    "memberof": "test/unit/parse/front-matter.spec.js~describe87.describe90",
    "testDepth": 2,
    "longname": "test/unit/parse/front-matter.spec.js~describe87.describe90.it91",
    "access": null,
    "description": "correctly takes json object and produces a string",
    "lineNumber": 17
  },
  {
    "__docId__": 409,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/parse/yaml.spec.js",
    "memberof": null,
    "longname": "test/unit/parse/yaml.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport * as yaml from '../../../lib/parse/yaml';\n\ndescribe('parse/yaml', () => {\n  const yamlString =\n`\nfoo: bar\nfood:\n- pizza\n- bagel\n`;\n\n  const yamlAsObj = {\n    foo: 'bar',\n    food: [\n      'pizza',\n      'bagel',\n    ],\n  };\n\n  describe('parse', () => {\n    it('empty string', () => {\n      assert.deepEqual(\n        yaml.parse(''),\n        undefined\n      );\n    });\n\n    it('undefined', () => {\n      assert.deepEqual(\n        yaml.parse(undefined),\n        'undefined'\n      );\n    });\n\n    it('proper yaml string', () => {\n      assert.deepEqual(\n        yaml.parse(yamlString),\n        yamlAsObj\n      );\n    });\n  });\n});\n"
  },
  {
    "__docId__": 410,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe92",
    "testId": 92,
    "memberof": "test/unit/parse/yaml.spec.js",
    "testDepth": 0,
    "longname": "test/unit/parse/yaml.spec.js~describe92",
    "access": null,
    "description": "parse/yaml",
    "lineNumber": 4
  },
  {
    "__docId__": 411,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe93",
    "testId": 93,
    "memberof": "test/unit/parse/yaml.spec.js~describe92",
    "testDepth": 1,
    "longname": "test/unit/parse/yaml.spec.js~describe92.describe93",
    "access": null,
    "description": "parse",
    "lineNumber": 21
  },
  {
    "__docId__": 412,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it94",
    "testId": 94,
    "memberof": "test/unit/parse/yaml.spec.js~describe92.describe93",
    "testDepth": 2,
    "longname": "test/unit/parse/yaml.spec.js~describe92.describe93.it94",
    "access": null,
    "description": "empty string",
    "lineNumber": 22
  },
  {
    "__docId__": 413,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it95",
    "testId": 95,
    "memberof": "test/unit/parse/yaml.spec.js~describe92.describe93",
    "testDepth": 2,
    "longname": "test/unit/parse/yaml.spec.js~describe92.describe93.it95",
    "access": null,
    "description": "undefined",
    "lineNumber": 29
  },
  {
    "__docId__": 414,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it96",
    "testId": 96,
    "memberof": "test/unit/parse/yaml.spec.js~describe92.describe93",
    "testDepth": 2,
    "longname": "test/unit/parse/yaml.spec.js~describe92.describe93.it96",
    "access": null,
    "description": "proper yaml string",
    "lineNumber": 36
  },
  {
    "__docId__": 415,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/plugin/api.spec.js",
    "memberof": null,
    "longname": "test/unit/plugin/api.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport sinon from 'sinon';\nimport _ from 'lodash';\n\nimport { addTemplateFilter } from '../../../lib/template';\nimport { getMarkdownEngine } from '../../../lib/markdown';\nimport createPluginApi from '../../../lib/plugin/api';\nimport PluginEvents from '../../../lib/plugin/events';\nimport EventHandler from '../../../lib/plugin/event-handler';\n\ndescribe('plugin/api PluginAPI', () => {\n  it('provides a proxy to template.addFilter method', () => {\n    const API = createPluginApi();\n    assert.deepEqual(\n      API.template.addFilter,\n      addTemplateFilter\n    );\n  });\n\n  it('allows you to configure markdown engine', () => {\n    const API = createPluginApi();\n    assert(typeof API.markdown.configure === 'function');\n    API.markdown.configure((md) => {\n      assert.equal(md, getMarkdownEngine());\n    });\n  });\n\n  it('creates methods for registering event handlers', () => {\n    const eventHandler = new EventHandler();\n    const API = createPluginApi({\n      addEventHandler: eventHandler.addEventHandler.bind(eventHandler),\n    });\n\n    const beforeSpy = sinon.spy();\n    API.event.file.beforeRender(beforeSpy);\n\n    assert(_.isArray(eventHandler._handlers[PluginEvents.file.beforeRender]));\n    assert.equal(\n      eventHandler._handlers[PluginEvents.file.beforeRender].length,\n      1\n    );\n    assert.deepEqual(\n      eventHandler._handlers[PluginEvents.file.beforeRender][0],\n      beforeSpy\n    );\n    assert.equal(beforeSpy.called, false);\n\n    const afterSpy = sinon.spy();\n    API.event.file.afterRender(afterSpy);\n    API.event.file.afterRender(afterSpy);\n\n    assert(_.isArray(eventHandler._handlers[PluginEvents.file.afterRender]));\n    assert.equal(\n      eventHandler._handlers[PluginEvents.file.afterRender].length,\n      2\n    );\n    assert.deepEqual(\n      eventHandler._handlers[PluginEvents.file.afterRender][0],\n      afterSpy\n    );\n    assert.deepEqual(\n      eventHandler._handlers[PluginEvents.file.afterRender][1],\n      afterSpy\n    );\n    assert.equal(afterSpy.called, false);\n  });\n});\n"
  },
  {
    "__docId__": 416,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe97",
    "testId": 97,
    "memberof": "test/unit/plugin/api.spec.js",
    "testDepth": 0,
    "longname": "test/unit/plugin/api.spec.js~describe97",
    "access": null,
    "description": "plugin/api PluginAPI",
    "lineNumber": 11
  },
  {
    "__docId__": 417,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it98",
    "testId": 98,
    "memberof": "test/unit/plugin/api.spec.js~describe97",
    "testDepth": 1,
    "longname": "test/unit/plugin/api.spec.js~describe97.it98",
    "access": null,
    "description": "provides a proxy to template.addFilter method",
    "lineNumber": 12
  },
  {
    "__docId__": 418,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it99",
    "testId": 99,
    "memberof": "test/unit/plugin/api.spec.js~describe97",
    "testDepth": 1,
    "longname": "test/unit/plugin/api.spec.js~describe97.it99",
    "access": null,
    "description": "allows you to configure markdown engine",
    "lineNumber": 20
  },
  {
    "__docId__": 419,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it100",
    "testId": 100,
    "memberof": "test/unit/plugin/api.spec.js~describe97",
    "testDepth": 1,
    "longname": "test/unit/plugin/api.spec.js~describe97.it100",
    "access": null,
    "description": "creates methods for registering event handlers",
    "lineNumber": 28
  },
  {
    "__docId__": 420,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/plugin/event-handler.spec.js",
    "memberof": null,
    "longname": "test/unit/plugin/event-handler.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport sinon from 'sinon';\nimport _ from 'lodash';\nimport Promise from 'bluebird';\nimport EventHandler from '../../../lib/plugin/event-handler';\n\ndescribe('plugin/event-handler EventHandler', () => {\n  const handlerName = 'test:handler';\n  let instance;\n\n  beforeEach(() => {\n    instance = new EventHandler();\n  });\n\n  describe('addEventHandler', () => {\n    it('can add handlers', () => {\n      const handlerFn = sinon.spy();\n\n      instance.addEventHandler(handlerName, handlerFn);\n\n      assert(_.isArray(instance._handlers[handlerName]));\n      assert.equal(instance._handlers[handlerName].length, 1);\n\n      assert.deepEqual(\n        instance._handlers[handlerName][0],\n        handlerFn\n      );\n\n      assert.equal(handlerFn.called, false);\n\n      instance.addEventHandler(handlerName, handlerFn);\n\n      assert.equal(instance._handlers[handlerName].length, 2);\n    });\n  });\n\n  describe('processEventHandlers', () => {\n    describe('can invoke handlers when none exist', () => {\n      it('with one passed argument', async () => {\n        const eventArg = 'hey man';\n        let newVal;\n        try {\n          newVal = await instance.processEventHandlers('bogus', eventArg);\n        } catch (e) {\n          // noop\n        }\n\n        assert.deepEqual(newVal, eventArg);\n      });\n\n      it('with multiple passed arguments', async () => {\n        const eventArgs = [\n          'the chicken',\n          'is',\n          5,\n        ];\n\n        let newVal;\n        try {\n          newVal = await instance.processEventHandlers(\n            'bogus',\n            eventArgs[0],\n            eventArgs[1],\n            eventArgs[2]\n          );\n        } catch (e) {\n          // noop\n        }\n\n        assert.deepEqual(newVal, eventArgs);\n      });\n    });\n\n    it('can invoke handlers sequentionally', async () => {\n      const noopFunc = sinon.spy(() => {\n        // noop\n      });\n\n      const promiseFn = sinon.spy(val =>\n        new Promise((resolve) => {\n          resolve(val);\n        })\n      );\n\n      instance.addEventHandler(handlerName, noopFunc);\n      instance.addEventHandler(handlerName, promiseFn);\n\n      assert(_.isArray(instance._handlers[handlerName]));\n      assert.equal(instance._handlers[handlerName].length, 2);\n\n      const handlerValue = 5;\n      let newVal;\n\n      try {\n        newVal = await instance.processEventHandlers(handlerName, handlerValue);\n      } catch (e) {\n        throw e;\n      }\n\n      assert.equal(noopFunc.callCount, 1);\n      assert.ok(noopFunc.calledWith(5));\n\n      assert.equal(promiseFn.callCount, 1);\n      assert.ok(promiseFn.calledWith(5));\n\n      assert.equal(newVal, handlerValue);\n\n      const modifierFn = sinon.spy(val => val * val);\n      const trailingNoopFn = sinon.spy();\n\n      instance.addEventHandler(handlerName, modifierFn);\n      instance.addEventHandler(handlerName, trailingNoopFn);\n\n      try {\n        newVal = await instance.processEventHandlers(handlerName, handlerValue);\n      } catch (e) {\n        throw e;\n      }\n\n      assert.equal(noopFunc.callCount, 2);\n      assert.equal(promiseFn.callCount, 2);\n      assert.equal(modifierFn.callCount, 1);\n      assert.ok(modifierFn.calledWith(5));\n      assert.equal(trailingNoopFn.callCount, 1);\n\n      assert.equal(newVal, handlerValue * handlerValue);\n    });\n\n    it('invokes handlers with multiple arguments', async () => {\n      const blankReturnFn = sinon.spy(() => {});\n\n      instance.addEventHandler(handlerName, blankReturnFn);\n\n      assert(_.isArray(instance._handlers[handlerName]));\n      assert.equal(instance._handlers[handlerName].length, 1);\n\n      const argValue1 = { foo: 'bar' };\n      const argValue2 = 'a wonderful world';\n      let processedEventValue;\n\n      try {\n        processedEventValue = await instance.processEventHandlers(\n          handlerName,\n          argValue1,\n          argValue2\n        );\n      } catch (e) {\n        // noop\n      }\n\n      assert.equal(blankReturnFn.callCount, 1);\n      assert.ok(blankReturnFn.calledWith(argValue1, argValue2));\n\n      assert.equal(argValue1, processedEventValue[0]);\n      assert.equal(argValue2, processedEventValue[1]);\n    });\n\n    describe('throws when plugin handlers', () => {\n      it('return only part of the arguments given', (done) => {\n        const eventHandlerFn = sinon.spy((arg1, arg2) => arg2);\n\n        instance.addEventHandler(handlerName, eventHandlerFn);\n\n        assert(_.isArray(instance._handlers[handlerName]));\n        assert.equal(instance._handlers[handlerName].length, 1);\n\n        const argValue1 = { foo: 'bar' };\n        const argValue2 = 'a wonderful world';\n\n        instance.processEventHandlers(\n          handlerName,\n          argValue1,\n          argValue2\n        ).catch(() => {\n          done();\n        });\n      });\n\n      it('returns arguments in wrong order given', (done) => {\n        const eventHandlerFn = sinon.spy((arg1, arg2) => [arg2, arg1]);\n\n        instance.addEventHandler(handlerName, eventHandlerFn);\n\n        assert(_.isArray(instance._handlers[handlerName]));\n        assert.equal(instance._handlers[handlerName].length, 1);\n\n        const argValue1 = { foo: 'bar' };\n        const argValue2 = 'a wonderful world';\n\n        instance.processEventHandlers(\n          handlerName,\n          argValue1,\n          argValue2\n        ).catch(() => {\n          done();\n        });\n      });\n    });\n  });\n});\n"
  },
  {
    "__docId__": 421,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe101",
    "testId": 101,
    "memberof": "test/unit/plugin/event-handler.spec.js",
    "testDepth": 0,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101",
    "access": null,
    "description": "plugin/event-handler EventHandler",
    "lineNumber": 7
  },
  {
    "__docId__": 422,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe102",
    "testId": 102,
    "memberof": "test/unit/plugin/event-handler.spec.js~describe101",
    "testDepth": 1,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101.describe102",
    "access": null,
    "description": "addEventHandler",
    "lineNumber": 15
  },
  {
    "__docId__": 423,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it103",
    "testId": 103,
    "memberof": "test/unit/plugin/event-handler.spec.js~describe101.describe102",
    "testDepth": 2,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101.describe102.it103",
    "access": null,
    "description": "can add handlers",
    "lineNumber": 16
  },
  {
    "__docId__": 424,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe104",
    "testId": 104,
    "memberof": "test/unit/plugin/event-handler.spec.js~describe101",
    "testDepth": 1,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101.describe104",
    "access": null,
    "description": "processEventHandlers",
    "lineNumber": 37
  },
  {
    "__docId__": 425,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe105",
    "testId": 105,
    "memberof": "test/unit/plugin/event-handler.spec.js~describe101.describe104",
    "testDepth": 2,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101.describe104.describe105",
    "access": null,
    "description": "can invoke handlers when none exist",
    "lineNumber": 38
  },
  {
    "__docId__": 426,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it106",
    "testId": 106,
    "memberof": "test/unit/plugin/event-handler.spec.js~describe101.describe104.describe105",
    "testDepth": 3,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101.describe104.describe105.it106",
    "access": null,
    "description": "with one passed argument",
    "lineNumber": 39
  },
  {
    "__docId__": 427,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it107",
    "testId": 107,
    "memberof": "test/unit/plugin/event-handler.spec.js~describe101.describe104.describe105",
    "testDepth": 3,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101.describe104.describe105.it107",
    "access": null,
    "description": "with multiple passed arguments",
    "lineNumber": 51
  },
  {
    "__docId__": 428,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it108",
    "testId": 108,
    "memberof": "test/unit/plugin/event-handler.spec.js~describe101.describe104",
    "testDepth": 2,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101.describe104.it108",
    "access": null,
    "description": "can invoke handlers sequentionally",
    "lineNumber": 74
  },
  {
    "__docId__": 429,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it109",
    "testId": 109,
    "memberof": "test/unit/plugin/event-handler.spec.js~describe101.describe104",
    "testDepth": 2,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101.describe104.it109",
    "access": null,
    "description": "invokes handlers with multiple arguments",
    "lineNumber": 129
  },
  {
    "__docId__": 430,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe110",
    "testId": 110,
    "memberof": "test/unit/plugin/event-handler.spec.js~describe101.describe104",
    "testDepth": 2,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101.describe104.describe110",
    "access": null,
    "description": "throws when plugin handlers",
    "lineNumber": 158
  },
  {
    "__docId__": 431,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it111",
    "testId": 111,
    "memberof": "test/unit/plugin/event-handler.spec.js~describe101.describe104.describe110",
    "testDepth": 3,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101.describe104.describe110.it111",
    "access": null,
    "description": "return only part of the arguments given",
    "lineNumber": 159
  },
  {
    "__docId__": 432,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it112",
    "testId": 112,
    "memberof": "test/unit/plugin/event-handler.spec.js~describe101.describe104.describe110",
    "testDepth": 3,
    "longname": "test/unit/plugin/event-handler.spec.js~describe101.describe104.describe110.it112",
    "access": null,
    "description": "returns arguments in wrong order given",
    "lineNumber": 179
  },
  {
    "__docId__": 433,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/plugin/index.spec.js",
    "memberof": null,
    "longname": "test/unit/plugin/index.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\n\nimport Plugin from '../../../lib/plugin/index';\n\ndescribe('plugin/index Plugin', () => {\n  it('has expected public methods', () => {\n    assert(typeof Plugin.API === 'object');\n  });\n});\n"
  },
  {
    "__docId__": 434,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe113",
    "testId": 113,
    "memberof": "test/unit/plugin/index.spec.js",
    "testDepth": 0,
    "longname": "test/unit/plugin/index.spec.js~describe113",
    "access": null,
    "description": "plugin/index Plugin",
    "lineNumber": 5
  },
  {
    "__docId__": 435,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it114",
    "testId": 114,
    "memberof": "test/unit/plugin/index.spec.js~describe113",
    "testDepth": 1,
    "longname": "test/unit/plugin/index.spec.js~describe113.it114",
    "access": null,
    "description": "has expected public methods",
    "lineNumber": 6
  },
  {
    "__docId__": 436,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/render.spec.js",
    "memberof": null,
    "longname": "test/unit/render.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport fs from 'fs-extra';\nimport sinon from 'sinon';\nimport fixture from '../fixture';\nimport Plugin from '../../lib/plugin/index';\nimport PluginEvents from '../../lib/plugin/events';\nimport CollectionBase from '../../lib/collection/base';\nimport {\n  renderFileWithPlugins,\n} from '../../lib/render';\n\nconst PluginAPI = Plugin.API;\n\ndescribe('render Render', () => {\n  let sandbox;\n  beforeEach(() => {\n    sandbox = sinon.sandbox.create();\n\n    Plugin.eventHandler._reset();\n  });\n\n  afterEach(() => {\n    sandbox.restore();\n  });\n\n  describe('renderFileWithPlugins', () => {\n    it('calls all functions in expected order', async () => {\n      // Disallow actually writing to disk.\n      sandbox.stub(fs, 'outputFile', (...args) => {\n        // Call callback.\n        args[args.length - 1]();\n      });\n\n      const renderContent = 'hello world';\n\n      const instance = new CollectionBase('name');\n      instance.files = fixture.collectionFiles().map((file) => {\n        file.render = sinon.spy(() => renderContent);\n        return file;\n      });\n\n      const file = instance.files[0];\n      const beforeSpy = sinon.spy();\n      const afterSpy = sinon.spy((val, val2) => [val, val2]);\n      PluginAPI.event.file.beforeRender(beforeSpy);\n      PluginAPI.event.file.afterRender(afterSpy);\n\n      try {\n        await renderFileWithPlugins(\n          file,\n          {},\n          PluginEvents.file.beforeRender,\n          PluginEvents.file.afterRender\n        );\n      } catch (e) {\n        // noop\n      }\n\n      assert.equal(beforeSpy.callCount, 1);\n      assert.ok(beforeSpy.calledWith(file));\n\n      assert.equal(file.render.callCount, 1);\n      assert.ok(file.render.calledWith({}));\n\n      assert.equal(afterSpy.callCount, 1);\n      assert.ok(afterSpy.calledWith(file, renderContent));\n    });\n  });\n});\n"
  },
  {
    "__docId__": 437,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe115",
    "testId": 115,
    "memberof": "test/unit/render.spec.js",
    "testDepth": 0,
    "longname": "test/unit/render.spec.js~describe115",
    "access": null,
    "description": "render Render",
    "lineNumber": 14
  },
  {
    "__docId__": 438,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe116",
    "testId": 116,
    "memberof": "test/unit/render.spec.js~describe115",
    "testDepth": 1,
    "longname": "test/unit/render.spec.js~describe115.describe116",
    "access": null,
    "description": "renderFileWithPlugins",
    "lineNumber": 26
  },
  {
    "__docId__": 439,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it117",
    "testId": 117,
    "memberof": "test/unit/render.spec.js~describe115.describe116",
    "testDepth": 2,
    "longname": "test/unit/render.spec.js~describe115.describe116.it117",
    "access": null,
    "description": "calls all functions in expected order",
    "lineNumber": 27
  },
  {
    "__docId__": 440,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/theme/index.spec.js",
    "memberof": null,
    "longname": "test/unit/theme/index.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// const assert = require('assert');\n\n// const Theme = require('../../../lib/theme/index.js');\n\ndescribe('Theme', () => {\n  describe('TODO', () => {\n    it('TODO', () => {\n    });\n  });\n});\n"
  },
  {
    "__docId__": 441,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe118",
    "testId": 118,
    "memberof": "test/unit/theme/index.spec.js",
    "testDepth": 0,
    "longname": "test/unit/theme/index.spec.js~describe118",
    "access": null,
    "description": "Theme",
    "lineNumber": 5
  },
  {
    "__docId__": 442,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe119",
    "testId": 119,
    "memberof": "test/unit/theme/index.spec.js~describe118",
    "testDepth": 1,
    "longname": "test/unit/theme/index.spec.js~describe118.describe119",
    "access": null,
    "description": "TODO",
    "lineNumber": 6
  },
  {
    "__docId__": 443,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it120",
    "testId": 120,
    "memberof": "test/unit/theme/index.spec.js~describe118.describe119",
    "testDepth": 2,
    "longname": "test/unit/theme/index.spec.js~describe118.describe119.it120",
    "access": null,
    "description": "TODO",
    "lineNumber": 7
  },
  {
    "__docId__": 444,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/unit/url.spec.js",
    "memberof": null,
    "longname": "test/unit/url.spec.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import assert from 'power-assert';\nimport Url from '../../lib/url';\n\ndescribe('url Url', () => {\n  Url.setSlugOptions({\n    lower: true,\n  });\n\n  describe('interpolatePermalink', () => {\n    it('handles simple interpolations', () => {\n      assert.equal(Url.interpolatePermalink('/:title/', {\n        title: 'banana',\n      }), '/banana/');\n    });\n\n    it('handles duplicate param interpolations', () => {\n      assert.equal(Url.interpolatePermalink('/:title/:title/', {\n        title: 'banana',\n      }), '/banana/banana/');\n    });\n\n    it('handles permalink with no interpolation', () => {\n      assert.equal(Url.interpolatePermalink('/index.html', {\n        title: 'banana',\n      }), '/index.html');\n    });\n\n    it('throw if it can\\'t find value to interpolate in permalink', () => {\n      assert.throws(() => {\n        Url.interpolatePermalink('/:title/:unknown/', {\n          title: 'banana',\n        });\n      });\n    });\n\n    it('handles special date permalink values', () => {\n      assert.equal(\n        Url.interpolatePermalink('/:date|YYYY/:date|MM/:date|D/:title/', {\n          title: '  In the future, the past will be history.  ',\n          date: new Date('2000-02-28T00:00:00-05:00'),\n        }), '/2000/02/28/in-the-future-the-past-will-be-history/'\n      );\n\n      assert.equal(Url\n        .interpolatePermalink('/:date_future|YYYY/:date|MM/:date|D/:title/', {\n          title: 'Does jello dance, or does it just jiggle?  ',\n          date: new Date('2000-02-28T00:00:00-05:00'),\n          date_future: new Date('2020-10-01T00:00:00-05:00'),\n        }), '/2020/02/28/does-jello-dance-or-does-it-just-jiggle/');\n    });\n  });\n\n  describe('replaceMarkdownExtension', () => {\n    it('replaces known markdown extensions', () => {\n      const markdownExtensions = [\n        'md',\n        'markdown',\n      ];\n\n      assert.equal(\n        Url.replaceMarkdownExtension(\n          '/_posts/hello-world.md',\n          markdownExtensions\n        ),\n        '/_posts/hello-world.html'\n      );\n\n      assert.equal(\n        Url.replaceMarkdownExtension(\n          '/_posts/hello-world.markdown',\n          markdownExtensions\n        ),\n        '/_posts/hello-world.html'\n      );\n\n      assert.equal(\n        Url.replaceMarkdownExtension(\n          '/_posts/hello-world.mkdown',\n          markdownExtensions\n        ),\n        '/_posts/hello-world.mkdown'\n      );\n\n      assert.equal(\n        Url.replaceMarkdownExtension(\n          '/_posts/hello-world.html',\n          markdownExtensions\n        ),\n        '/_posts/hello-world.html'\n      );\n    });\n  });\n\n  describe('makeUrlFileSystemSafe', () => {\n    it('appends index.html to a url that has no file extension', () => {\n      assert.equal(Url.makeUrlFileSystemSafe('/my-beautiful-html-permalink'),\n        '/my-beautiful-html-permalink/index.html'\n      );\n\n      assert.equal(Url.makeUrlFileSystemSafe('/my-beautiful-html-permalink/'),\n        '/my-beautiful-html-permalink/index.html'\n      );\n\n      assert.equal(Url.makeUrlFileSystemSafe('my-beautiful-html-permalink'),\n        '/my-beautiful-html-permalink/index.html'\n      );\n    });\n\n    it('does not append index.html to a url that does not need it', () => {\n      assert.equal(Url.makeUrlFileSystemSafe('/html/goes-here.html'),\n        '/html/goes-here.html'\n      );\n\n      assert.equal(Url.makeUrlFileSystemSafe('/html/image.png'),\n        '/html/image.png'\n      );\n\n      assert.equal(Url.makeUrlFileSystemSafe('/html/index.gif'),\n        '/html/index.gif'\n      );\n    });\n  });\n\n  describe('makePretty', () => {\n    it('works', () => {\n      let url = '/html/goes-here.html';\n      assert.equal(\n        Url.makePretty(url),\n        url\n      );\n\n      url = '/my/beautiful-dream';\n      assert.equal(\n        Url.makePretty(url),\n        url\n      );\n\n      url = '/have-you-got-a-minute/';\n      assert.equal(\n        Url.makePretty(`${url}index.html`),\n        url\n      );\n\n      url = '/no-time-to-wasteindex.html';\n      assert.equal(\n        Url.makePretty(url),\n        url\n      );\n\n      url = '/favicon.ico';\n      assert.equal(\n        Url.makePretty(url),\n        url\n      );\n\n      url = '/images/index.gif';\n      assert.equal(\n        Url.makePretty(url),\n        url\n      );\n    });\n  });\n});\n"
  },
  {
    "__docId__": 445,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe121",
    "testId": 121,
    "memberof": "test/unit/url.spec.js",
    "testDepth": 0,
    "longname": "test/unit/url.spec.js~describe121",
    "access": null,
    "description": "url Url",
    "lineNumber": 4
  },
  {
    "__docId__": 446,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe122",
    "testId": 122,
    "memberof": "test/unit/url.spec.js~describe121",
    "testDepth": 1,
    "longname": "test/unit/url.spec.js~describe121.describe122",
    "access": null,
    "description": "interpolatePermalink",
    "lineNumber": 9
  },
  {
    "__docId__": 447,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it123",
    "testId": 123,
    "memberof": "test/unit/url.spec.js~describe121.describe122",
    "testDepth": 2,
    "longname": "test/unit/url.spec.js~describe121.describe122.it123",
    "access": null,
    "description": "handles simple interpolations",
    "lineNumber": 10
  },
  {
    "__docId__": 448,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it124",
    "testId": 124,
    "memberof": "test/unit/url.spec.js~describe121.describe122",
    "testDepth": 2,
    "longname": "test/unit/url.spec.js~describe121.describe122.it124",
    "access": null,
    "description": "handles duplicate param interpolations",
    "lineNumber": 16
  },
  {
    "__docId__": 449,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it125",
    "testId": 125,
    "memberof": "test/unit/url.spec.js~describe121.describe122",
    "testDepth": 2,
    "longname": "test/unit/url.spec.js~describe121.describe122.it125",
    "access": null,
    "description": "handles permalink with no interpolation",
    "lineNumber": 22
  },
  {
    "__docId__": 450,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it126",
    "testId": 126,
    "memberof": "test/unit/url.spec.js~describe121.describe122",
    "testDepth": 2,
    "longname": "test/unit/url.spec.js~describe121.describe122.it126",
    "access": null,
    "description": "throw if it can't find value to interpolate in permalink",
    "lineNumber": 28
  },
  {
    "__docId__": 451,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it127",
    "testId": 127,
    "memberof": "test/unit/url.spec.js~describe121.describe122",
    "testDepth": 2,
    "longname": "test/unit/url.spec.js~describe121.describe122.it127",
    "access": null,
    "description": "handles special date permalink values",
    "lineNumber": 36
  },
  {
    "__docId__": 452,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe128",
    "testId": 128,
    "memberof": "test/unit/url.spec.js~describe121",
    "testDepth": 1,
    "longname": "test/unit/url.spec.js~describe121.describe128",
    "access": null,
    "description": "replaceMarkdownExtension",
    "lineNumber": 53
  },
  {
    "__docId__": 453,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it129",
    "testId": 129,
    "memberof": "test/unit/url.spec.js~describe121.describe128",
    "testDepth": 2,
    "longname": "test/unit/url.spec.js~describe121.describe128.it129",
    "access": null,
    "description": "replaces known markdown extensions",
    "lineNumber": 54
  },
  {
    "__docId__": 454,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe130",
    "testId": 130,
    "memberof": "test/unit/url.spec.js~describe121",
    "testDepth": 1,
    "longname": "test/unit/url.spec.js~describe121.describe130",
    "access": null,
    "description": "makeUrlFileSystemSafe",
    "lineNumber": 94
  },
  {
    "__docId__": 455,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it131",
    "testId": 131,
    "memberof": "test/unit/url.spec.js~describe121.describe130",
    "testDepth": 2,
    "longname": "test/unit/url.spec.js~describe121.describe130.it131",
    "access": null,
    "description": "appends index.html to a url that has no file extension",
    "lineNumber": 95
  },
  {
    "__docId__": 456,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it132",
    "testId": 132,
    "memberof": "test/unit/url.spec.js~describe121.describe130",
    "testDepth": 2,
    "longname": "test/unit/url.spec.js~describe121.describe130.it132",
    "access": null,
    "description": "does not append index.html to a url that does not need it",
    "lineNumber": 109
  },
  {
    "__docId__": 457,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe133",
    "testId": 133,
    "memberof": "test/unit/url.spec.js~describe121",
    "testDepth": 1,
    "longname": "test/unit/url.spec.js~describe121.describe133",
    "access": null,
    "description": "makePretty",
    "lineNumber": 124
  },
  {
    "__docId__": 458,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it134",
    "testId": 134,
    "memberof": "test/unit/url.spec.js~describe121.describe133",
    "testDepth": 2,
    "longname": "test/unit/url.spec.js~describe121.describe133.it134",
    "access": null,
    "description": "works",
    "lineNumber": 125
  }
]